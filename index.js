/**varsion 8.3.0 */
function _defineProperty(t,e,i){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==typeof e?e:String(e)}function _toPrimitive(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}import React,{Component,createRef,useContext,createContext,Fragment,useState,useEffect}from"react";import*as ReactDOMServer from"react-dom/server";import Axios from"axios";import{Icon}from"@mdi/react";import{mdiChevronDown,mdiLoading,mdiAttachment,mdiChevronRight,mdiClose,mdiCircleMedium,mdiArrowUp,mdiArrowDown,mdiSort,mdiFileExcel,mdiMagnify,mdiPlusThick,mdiChevronLeft,mdiImage,mdiEye,mdiEyeOff,mdiDownloadOutline,mdiCrosshairsGps}from"@mdi/js";import $ from"jquery";import AIODate from"aio-date";import RVD from"react-virtual-dom";import AIOPopup from"aio-popup";import AIOStorage from"aio-storage";import"./index.css";import{jsx as _jsx}from"react/jsx-runtime";import{jsxs as _jsxs}from"react/jsx-runtime";import{Fragment as _Fragment}from"react/jsx-runtime";let AICTX=createContext();export default class AIOInput extends Component{constructor(t){super(t),this.types={type:t.type,isInput:-1!==["text","number","textarea","password"].indexOf(t.type),isDropdown:-1!==["text","number","textarea","select","multiselect","button","datepicker"].indexOf(t.type),hasOption:-1!==["text","number","textarea","color","select","multiselect","radio","tabs","list"].indexOf(t.type),hasPlaceholder:-1!==["text","number","textarea","color","select","table","image","datepicker"].indexOf(t.type),hasMultiple:-1!==["radio","file","slider"].indexOf(t.type),hasKeyboard:-1!==["text","textarea","number","password"].indexOf(t.type),hasText:-1!==["multiselect","checkbox","button","select"].indexOf(t.type),hasSearch:-1!==["multiselect","table","select"].indexOf(t.type)},this.handleIsMultiple(t.type),this.dom=createRef(),this.datauniqid="aiobutton"+Math.round(1e7*Math.random()),this.popup=new AIOPopup,this.getPopover=new Popover(this.getProp.bind(this),this.datauniqid,this.toggle.bind(this),this.getOptions.bind(this),this.addToAttrs.bind(this)).getFn(),this.state={open:this.getProp("open",!1),showPassword:!1}}handleIsMultiple(t){"multiselect"===t||"table"===t?this.isMultiple=()=>!0:"radio"===t||"slider"===t||"file"===t?this.isMultiple=()=>!!this.props.multiple:this.isMultiple=()=>!1}dragStart(t){this.dragIndex=parseInt($(t.target).attr("datarealindex"))}dragOver(t){t.preventDefault()}drop(t){t.stopPropagation();let e=this.dragIndex,i=$(t.target);if(i.hasClass("aio-input-option")||(i=i.parents(".aio-input-option")),!i.hasClass("aio-input-option"))return;let s=parseInt(i.attr("datarealindex"));e!==s&&this.properties.onSwap(e,s,this.swap)}swap(t,e,i){if(i===e+1){let s=i;i=e,e=s}let r=t.map((t,e)=>(t._testswapindex=e,t)),o=r[e]._testswapindex;return r.splice(i,0,{...r[e],_testswapindex:!1}),r.filter(t=>t._testswapindex!==o)}getSelectText(){let t=this.getProp("options",[]),e=this.getProp("value"),i=t.find(t=>void 0!==e&&this.getOptionProp(t,"value")===e);if(void 0!==i)return this.getOptionProp(i,"text")}getDatepickerText(){let t=this.getProp("value"),e=this.getProp("unit","day"),i=this.getProp("pattern"),s=this.getProp("calendarType"),r=this.getProp("placeholder");if(t){let o=AIODate().convertToArray({date:t}),[n,a=1,l=1,h=0]=o;o=[n,a,l,h];let p,u=AIODate().getSplitter(t);return i?p=i:"month"===e?p=`{year}${u}{month}`:"day"===e?p=`{year}${u}{month}${u}{day}`:"hour"===e&&(p=`{year}${u}{month}${u}{day} - {hour} : 00`),_jsx("div",{style:{direction:"ltr"},children:AIODate().getDateByPattern({date:o,pattern:p})})}return r||("gregorian"===s?"Select Date":"انتخاب تاریخ")}addToAttrs(t={},{className:e,style:i,stylePriority:s=!0}){let r=[];t.className&&r.push(t.className),e&&r.push(e);let o=r.length?r.join(" "):void 0,n=s?{...t.style,...i}:{...i,...t.style};return{...t,className:o,style:n}}getProp(t,e,i){let{type:s}=this.props,r="function"!==this.props[t]||i?this.props[t]:this.props[t]();if(null===r&&(r=void 0),"value"===t){if(null===r&&(r=void 0),this.isMultiple())void 0===r&&(r=[]),Array.isArray(r)||(console.error(`aio-input error => in type="${s}" by multiple:true value should be an array but is ${r}`),r=[r]);else if(Array.isArray(r)&&(console.error(`aio-input error => in type="${s}" by multiple:false|undefined value cannot be an array`),r=r[0]),"map"===s){let{lat:o,lng:n}=r||{};null===o&&(o=35.699739),null===n&&(n=51.338097),r={lat:o,lng:n}}return"slider"!==s||Array.isArray(r)||(r="number"!=typeof r?[]:[r]),void 0===r?e:r}if("type"===t)return this.props.type;if("props"===t)return this.props;if("after"===t&&"password"===s&&this.getProp("visible")){let{showPassword:a}=this.state;return _jsx("div",{className:"align-v",onClick:()=>this.toggleShowPassword(),children:_jsx(Icon,{path:a?mdiEyeOff:mdiEye,size:.8})})}if("caret"===t)return!1!==r&&("button"===s?!!this.getProp("popover"):!!("select"===s||"multiselect"===s||"datepicker"===s||("text"===s||"number"===s||"textarea"===s)&&this.getProp("options"))&&(r||!0));if("text"===t&&void 0===r){if("select"===s)return this.getSelectText();if("datepicker"===s)return this.getDatepickerText()}return void 0===r?e:r}getOptionProp(option,key,def,preventFunction){let optionResult="function"!=typeof option[key]||preventFunction?option[key]:option[key](option,this.props);if(void 0!==optionResult)return optionResult;let prop=this.props["option"+key[0].toUpperCase()+key.slice(1,key.length)];if("string"==typeof prop)try{let props=this.props,value;return eval("value = "+prop),value}catch{}if("function"==typeof prop&&!preventFunction){let res=prop(option,this.props);return void 0===res?def:res}return void 0!==prop?prop:def}toggle(t,e){!!t!=!!this.popup.getModals().length&&(t?(this.popup.addModal(t),this.setState({open:!0})):(this.popup.removeModal(),this.setState({open:!1}),setTimeout(()=>$(this.dom.current).focus(),0)))}click(t,e){let i=this.types.type,s=this.properties.onChange||(()=>{}),r=this.properties.attrs;"checkbox"===i?s(!this.properties.value):this.getPopover?this.toggle(this.getPopover(e),t):r.onClick&&r.onClick()}optionClick(t){let e=this.properties.onChange||(()=>{}),i=this.types.type,s=this.properties.value,{value:r,attrs:o={},onClick:n,close:a,text:l}=t;n?n(r,t):o.onClick?o.onClick(r,t):i&&-1!==["text","number","textarea","password"].indexOf(i)?e(l,t):this.isMultiple()?-1===s.indexOf(r)?e(s.concat(r),r,"add"):e(s.filter(t=>t!==r),r,"remove"):e(r,t),a&&this.toggle(!1)}toggleShowPassword(){this.setState({showPassword:!this.state.showPassword})}getOptions(){let t=this.types.type,e=e=>{if("multiselect"===t||"radio"===t){let i=this.properties.value;return this.isMultiple()?-1!==i.indexOf(e):i===e}},i=this.properties.options||[],s=[],r=0,o=this.properties.value,n=this.types.isDropdown&&this.types.hasOption&&this.props.onSwap;for(let a=0;a<i.length;a++){let l=i[a],h=this.properties.disabled||this.getOptionProp(l,"disabled");if(!1===this.getOptionProp(l,"show"))continue;let p=this.getOptionProp(l,"text");if(this.types.isInput&&o&&0!==p.toString().indexOf(o.toString()))continue;let u=this.getOptionProp(l,"value"),d=this.getOptionProp(l,"attrs",{}),c={attrs:d,text:p,value:u,disabled:h,draggable:n,checkIcon:this.getOptionProp(l,"checkIcon",[],!0),checked:this.getOptionProp(l,"checked",e(u)),before:this.getOptionProp(l,"before"),after:this.getOptionProp(l,"after"),justify:this.getOptionProp(l,"justify"),subtext:this.getOptionProp(l,"subtext"),onClick:this.getOptionProp(l,"onClick",void 0,!0),className:this.getOptionProp(l,"className"),style:this.getOptionProp(l,"style"),tagAttrs:this.getOptionProp(l,"tagAttrs"),tagBefore:this.getOptionProp(l,"tagBefore"),close:this.getOptionProp(l,"close","multiselect"!==t),tagAfter:this.getOptionProp(l,"tagAfter"),renderIndex:r,realIndex:a};u===o&&(c.attrs=this.addToAttrs(c.attrs,{className:"active"})),s.push(c),r++}return s}getContext(){return{...this.props,properties:this.properties,addToAttrs:this.addToAttrs.bind(this),isMultiple:this.isMultiple.bind(this),types:this.types,type:this.types.type,getOptions:this.getOptions.bind(this),open:this.state.open,toggleShowPassword:this.toggleShowPassword.bind(this),showPassword:this.state.showPassword,popup:this.popup,dragStart:this.dragStart.bind(this),dragOver:this.dragOver.bind(this),drop:this.drop.bind(this),click:this.click.bind(this),optionClick:this.optionClick.bind(this),datauniqid:this.datauniqid,getProp:this.getProp.bind(this),getOptionProp:this.getOptionProp.bind(this),parentDom:this.dom,touch:"ontouchstart"in document.documentElement}}D2S(t){return 1===(t=t.toString()).length?"0"+t:t}getTimeText(t){let e=[],i=[];void 0!==t.year&&i.push(this.D2S(t.year)),void 0!==t.month&&i.push(this.D2S(t.month)),void 0!==t.day&&i.push(this.D2S(t.day)),i.length&&e.push(i.join("/"));let s=[];return void 0!==t.hour&&s.push(this.D2S(t.hour)),void 0!==t.minute&&s.push(this.D2S(t.minute)),void 0!==t.second&&s.push(this.D2S(t.second)),s.length&&e.push(s.join(":")),e.join(" ")}render_button(){return _jsx(Layout,{})}render_list(){return _jsx(List,{properties:this.properties,getOptionProp:this.getOptionProp.bind(this)})}render_time(){let t=()=>{let t=this.properties.calendarType,e=AIODate().getToday({calendarType:t}),i={year:e[0],month:e[1],day:e[2],hour:e[3],minute:e[4],second:e[5]},s=this.properties.value||{};for(let r in s)!0===s[r]&&(s[r]=i[r]);let o=this.properties.popover||{},n=this.properties.onChange,a="aio-input-time";a+=this.properties.className?" "+this.properties.className:"";let l=this.properties.style;return{text:this.getTimeText(s),attrs:this.addToAttrs(this.properties.attrs,{style:{direction:"ltr"}}),popover:o,onChange:n,value:s,className:a,style:l}},{text:e,attrs:i,popover:s={},onChange:r,className:o,style:n}=t();return _jsx(AIOInput,{caret:!1,text:e,...this.props,attrs:i,type:"button",className:o,style:n,popover:r?{position:"center",...s,attrs:this.addToAttrs(s.attrs,{className:"aio-input-time-popover"}),render:({close:e})=>_jsx(TimePopover,{value:t().value,onChange:t=>r(t),onClose:()=>e()})}:void 0})}render_file(){return _jsx(File,{})}render_select(){return _jsx(Layout,{})}render_multiselect(){return _jsx(Multiselect,{})}render_radio(){return _jsx(Layout,{text:_jsx(Options,{})})}render_tabs(){return _jsx(Layout,{text:_jsx(Options,{})})}render_checkbox(){return _jsx(Layout,{})}render_datepicker(){return _jsx(Layout,{})}render_image(){return _jsx(Layout,{text:_jsx(Image,{})})}render_map(){return _jsx(Layout,{text:_jsx(Map,{properties:this.properties})})}render_table(){return _jsx(Table,{properties:this.properties})}render_text(){return _jsx(Layout,{text:_jsx(Input,{})})}render_password(){return _jsx(Layout,{text:_jsx(Input,{})})}render_textarea(){return _jsx(Layout,{text:_jsx(Input,{})})}render_number(){return _jsx(Layout,{text:_jsx(Input,{})})}render_color(){return _jsx(Layout,{text:_jsx(Input,{})})}render_slider(){return _jsx(Layout,{text:_jsx(InputSlider,{properties:this.properties})})}render_form(){return _jsx(Form,{properties:this.properties})}render(){let t=this.types.type;return(this.properties=getMainProperties(this.props,this.getProp.bind(this),this.types),t&&this["render_"+t])?_jsxs(AICTX.Provider,{value:this.getContext(),children:[this["render_"+t](),this.popup.render()]},this.datauniqid):null}};_defineProperty(AIOInput,"defaults",{validate:!1,popover:{}});class Popover{constructor(t,e,i,s,r){_defineProperty(this,"getRender",t=>"button"===this.type?({close:e})=>t.render({close:e}):"datepicker"===this.type?({close:t})=>_jsx(DatePicker,{onClose:t}):({close:e})=>{let i=this.getOptions()||[];return i.length?t.render?t.render({close:e,options:i}):_jsx(Options,{options:i}):null}),_defineProperty(this,"getIsActive",()=>{let t=this.getProp("options"),e=this.getProp("popover");if("button"===this.type)return!!e;if("datepicker"===this.type||"select"===this.type)return!0;if("multiselect"===this.type)return!0;if("text"===this.type)return!!t;if("number"===this.type)return!!t;else if("textarea"===this.type)return!!t;return!1}),_defineProperty(this,"getBackdrop",t=>{let{backdrop:e={}}=t;return{...e,attrs:this.addToAttrs(e.attrs,{className:"aio-input-backdrop "+this.id})}}),_defineProperty(this,"getBody",(t,e)=>{let{body:i={}}=t;return{...i,render:e}}),_defineProperty(this,"getPopover",(t,e)=>{let{fixStyle:i,fitHorizontal:s=-1!==["multiselect","text","number","textarea"].indexOf(this.type)}=t;return{fixStyle:i,fitHorizontal:s,pageSelector:".aio-input-backdrop."+this.id,getTarget:()=>$(e.current)}}),_defineProperty(this,"getFn",()=>{if(this.isActive)return t=>{let e={...AIOInput.defaults.popover,...this.getProp("popover",{})},i=this.getRender(e),s=this.getBody(e,i),r=this.getProp("rtl"),{position:o="popover",header:n}=e;return{onClose:()=>this.toggle(!1),rtl:r,header:n,position:o,backdrop:this.getBackdrop(e),body:s,popover:this.getPopover(e,t),attrs:this.addToAttrs(e.attrs,{className:`aio-input-popover aio-input-popover-${this.rtl?"rtl":"ltr"}`})}}}),this.getProp=t,this.getOptions=s,this.addToAttrs=r,this.toggle=i,this.type=t("type"),this.id=e,this.isActive=this.getIsActive(),this.isActive&&(this.rtl=t("rtl"))}}function TimePopover(t){let{lang:e="fa"}=t,[i]=useState(t.value.year?t.value.year-10:void 0),[s]=useState(t.value.year?t.value.year+10:void 0),[r,o]=useState({...t.value});function n(t){o({...r,...t})}function a(t){return"fa"===e?({year:"سال",month:"ماه",day:"روز",hour:"ساعت",minute:"دقیقه",second:"ثانیه",Submit:"ثبت"})[t]:t}function l(t){let{year:e,month:o,day:a}=r;if("year"===t)return Array(s-i+1).fill(0).map((t,e)=>({text:e+i,value:e+i}));if("day"===t){let l=e&&o?AIODate().getMonthDaysLength({date:[e,o]}):31;return a>l&&n({day:1}),Array(l).fill(0).map((t,e)=>({text:e+1,value:e+1}))}return"month"===t?Array(12).fill(0).map((t,e)=>({text:e+1,value:e+1})):Array("hour"===t?24:60).fill(0).map((t,e)=>({text:e,value:e}))}function h(t){return"number"==typeof r[t]&&{column:[{html:a(t),align:"vh",size:36},{html:_jsx(AIOInput,{type:"list",value:r[t],options:l(t),size:48,width:72,onChange:e=>n({[t]:e})})}]}}function p(){t.onChange(r),t.onClose()}return _jsx(RVD,{layout:{className:"dir-ltr",column:[{align:"h",className:"m-b-12",row:[h("year"),h("month"),h("day"),h("hour"),h("minute"),h("second")]},{html:_jsx("button",{className:"ai-style-3",style:{height:36,fontSize:12},onClick:p,children:a("Submit")})}]}})}function Image(){let{properties:t}=useContext(AICTX),[e]=useState(new AIOPopup),{value:i={},width:s,height:r,onChange:o,disabled:n,loading:a,placeholder:l,preview:h}=t,[p,u]=useState(),d=createRef();function c(t,e=()=>{}){try{let i=new FileReader;i.onload=function(){p!==i.result&&(u(i.result),e(i.result))},i.readAsDataURL(t)}catch{}}function g(){e.addModal({header:{title:"",onClose(t){t.stopPropagation(),t.preventDefault(),e.removeModal()}},body:{render(){let t=$(d.current).attr("src");return _jsx("div",{className:"aio-input-image-preview-popup",children:_jsx("img",{src:t,alt:l})})}}})}useEffect(()=>{i.file?c("object"==typeof i.file):"string"==typeof i.url?p!==i.url&&u(i.url):!1!==i.url&&u(!1)});let m=p?_jsxs(_Fragment,{children:[_jsx("img",{ref:d,src:p,alt:l,style:{objectFit:"cover"},width:s,height:r}),"function"==typeof o&&_jsx("div",{onClick(t){t.stopPropagation(),t.preventDefault(),o()},className:"aio-input-image-remove",children:_jsx(Icon,{path:mdiClose,size:1})}),h&&_jsx("div",{onClick(t){t.stopPropagation(),t.preventDefault(),g()},className:"aio-input-image-preview",children:_jsx(Icon,{path:mdiImage,size:1})}),e.render()]}):_jsx("span",{className:"aio-input-image-placeholder",children:l});return o?_jsx(AIOInput,{disabled:n||a,type:"file",justify:!0,text:m,attrs:{style:{width:"100%",height:"100%",padding:0}},onChange(t){c(t,e=>{o({file:t,url:e})})}}):m}function Multiselect(){let{properties:t}=useContext(AICTX),{style:e={}}=t.attrs;return _jsxs("div",{className:"aio-input-multiselect-container",style:{width:e.width},children:[_jsx(Layout,{}),_jsx(Tags,{})]})}function Tags(){let{properties:t,getOptionProp:e}=useContext(AICTX),i=t.value||[],s=t.rtl;if(!i.length||t.hideTags)return null;let r=t.options||[];return _jsx("div",{className:`aio-input-tags${s?" rtl":""}`,children:i.map((t,i)=>{let s=r.find(i=>t===e(i,"value"));return void 0===s?null:_jsx(Tag,{value:t,option:s},i)})})}function Tag({option:t,value:e}){let{properties:i,getOptionProp:s}=useContext(AICTX),r=i.onChange||(()=>{}),o=s(t,"text"),n=s(t,"tagAttrs",{}),a=s(t,"tagBefore",_jsx(Icon,{path:mdiCircleMedium,size:.7})),l=s(t,"tagAfter"),h=s(t,"disabled")||i.disabled,p=h?void 0:()=>{r(i.value.filter(t=>t!==e))};return _jsxs("div",{...n,className:"aio-input-tag"+(n.className?" "+n.className:"")+(h?" disabled":""),style:n.style,children:[_jsx("div",{className:"aio-input-tag-icon",children:a}),_jsx("div",{className:"aio-input-tag-text",children:o}),void 0!==l&&_jsx("div",{className:"aio-input-tag-icon",children:l}),_jsx("div",{className:"aio-input-tag-icon",children:_jsx(Icon,{path:mdiClose,size:.7,onClick:p})})]})}class Input extends Component{constructor(t){super(t),this.dom=createRef(),this.container=createRef(),this.datauniqid=`ac${Math.round(1e5*Math.random())}`,this.state={value:void 0,prevValue:void 0}}componentDidMount(){let{properties:t,type:e}=this.context,{min:i,max:s,swip:r,value:o,onChange:n}=t;this.setState({value:o,prevValue:o}),"number"===e&&r&&AIOSwip({speedY:.2,reverseY:!0,minY:i,maxY:s,dom:()=>$(this.dom.current),start:()=>[0,this.state.value||0],move:({y:t})=>{void 0!==i&&t<i&&(t=i),void 0!==s&&t>s&&(t=s),this.change(t,n)}})}componentDidUpdate(){let{properties:t}=this.context;clearTimeout(this.rrt);let e=t.value;this.state.prevValue!==e&&(this.rrt=setTimeout(()=>this.setState({value:e,prevValue:e}),0))}convertPersianDigits(t){try{t=t.toString();let e="";for(let i=0;i<t.length;i++){let s={"۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};e+=s[t[i]]||t[i]}t=e}catch{}return t}change(t,e){let{properties:i,types:s}=this.context,{blurChange:r,maxLength:o=1/0,justNumber:n,filter:a=[],delay:l=400}=i;if("number"===s.type)t&&(t=+t);else if(s.hasKeyboard&&t){if(t=this.convertPersianDigits(t),n){let h=(t=t.toString())[t.length-1];(" "===h||isNaN(+h))&&(Array.isArray(n)?-1===n.indexOf(h)&&(t=t.slice(0,t.length-1)):t=t.slice(0,t.length-1))}if(a.length){let p=(t=t.toString())[t.length-1];for(let u=0;u<a.length;u++){let d=a[u].toString();if("symbol"===d){if(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(p)){t=t.slice(0,t.length-1);break}}else if("number"===d){if(!isNaN(+p)){t=t.slice(0,t.length-1);break}}else if("string"===d){if(isNaN(+p)){t=t.slice(0,t.length-1);break}}else if(d===p){t=t.slice(0,t.length-1);break}}}t.toString().length>o&&(t=t.toString().slice(0,o))}this.setState({value:t}),r||(clearTimeout(this.timeout),this.timeout=setTimeout(()=>e(t),l))}blur(t){let{properties:e}=this.context,{blurChange:i}=e;i&&t(this.state.value)}getInputAttrs(){let{properties:t,showPassword:e,type:i,addToAttrs:s}=this.context,{value:r=""}=this.state,{disabled:o,placeholder:n,onChange:a,spin:l,justify:h,options:p,justNumber:u}=t,d={...s(t.inputAttrs,{className:l?void 0:"no-spin",style:h?{textAlign:"center"}:void 0}),value:r,type:i,ref:this.dom,disabled:o,placeholder:n,onChange:a?t=>this.change(t.target.value,a):void 0,onBlur:()=>this.blur(a)};return"color"===i&&p&&(d={...d,list:this.datauniqid}),"password"===i&&e&&(d={...d,type:"text",style:{...d.style,textAlign:"center"}}),!0===u&&(d.pattern="d*",d.inputMode="numeric"),d}render(){let{properties:t,type:e}=this.context,{value:i=""}=this.state,s=this.getInputAttrs();if(!s.onChange)return i;if("color"===e){let r=t.options;return _jsxs("label",{style:{width:"100%",height:"100%",background:i},children:[_jsx("input",{...s,style:{opacity:0}}),r&&_jsx("datalist",{id:this.datauniqid,children:r.map(t=>_jsx("option",{value:t}))})]})}return"textarea"===e?_jsx("textarea",{...s}):_jsx("input",{...s})}}_defineProperty(Input,"contextType",AICTX);class Form extends Component{constructor(t){super(t);let{properties:e}=t,{value:i={},onChange:s}=e;this.state={initialValue:JSON.stringify(i)},s||(this.state.value=i),this.errors={}}getValue(){let{properties:t}=this.props,{onChange:e,value:i={}}=t;return e?i:this.state.value}getErrors(){return[...Object.keys(this.errors).filter(t=>!!this.errors[t]).map(t=>this.errors[t])]}removeError(t){let e={};for(let i in this.errors)i!==t&&(e[i]=this.errors[i]);this.errors=e}setValue({itemValue:t,formItem:e,field:i}){let{properties:s}=this.props,{onChange:r}=s,o=i||e.field,n=this.getValue(),a=this.setValueByField(n,o,t);if(!i){let l=this.getError(e,t);l?this.errors[o]=l:this.removeError(o)}r?r(a,this.getErrors()):this.setState({value:a})}header_layout(){let{properties:t}=this.props,{header:e,title:i,subtitle:s,headerAttrs:r,onClose:o,onBack:n}=t;return(!!e||!!i)&&{className:"aio-input-form-header"+(r.className?" "+r.className:""),style:r.style,row:[{show:!!n,size:36,html:_jsx(Icon,{path:mdiChevronRight,size:.8}),align:"vh",onClick:()=>n()},{show:!!i,align:"v",column:[{html:i,className:"aio-input-form-title"},{show:!!s,html:s,className:"aio-input-form-subtitle"}]},{flex:1,show:!!i},{show:!!e,flex:i?void 0:1,html:()=>"function"==typeof e?e():e,align:"vh"},{show:!!o,html:_jsx(Icon,{path:mdiClose,size:.8}),onClick:()=>o(),className:"aio-input-form-close-icon"}]}}body_layout(){let{properties:t}=this.props,{inputs:e,bodyAttrs:i={}}=t;Array.isArray(e)&&(e={column:e.map(t=>this.input_layout(t))});let s="aio-input-form-body";i.className&&(s+=" "+i.className);let r=i.style;return{flex:1,className:s,style:r,...e}}reset(){let{properties:t}=this.props,{onChange:e}=t,{initialValue:i}=this.state;e?e(JSON.parse(i)):this.setState({value:JSON.parse(i)})}footer_layout(){let{properties:t}=this.props,{footer:e,onClose:i,onSubmit:s,footerAttrs:r,closeText:o,resetText:n,submitText:a,reset:l,initialDisabled:h}=t,{initialValue:p}=this.state;if(!1===e||!e&&!s&&!i&&!l)return!1;let u=!1;if(this.getErrors().length?u=!0:h&&p===JSON.stringify(this.getValue())&&(u=!0),e){let d="function"==typeof e?e({onReset:()=>this.reset(),disabled:u,errors:this.getErrors()}):e,c="aio-input-form-footer"+(r.className?" "+r.className:"");return{className:c,style:r.style,html:d}}return{className:"aio-input-form-footer"+(r.className?" "+r.className:""),style:r.style,html:_jsxs(_Fragment,{children:[!!i&&_jsx("button",{onClick:()=>i(),className:"aio-input-form-close-button aio-input-form-footer-button",children:o}),!!l&&_jsx("button",{onClick:()=>this.reset(),className:"aio-input-form-reset-button aio-input-form-footer-button",children:n}),!!s&&_jsx("button",{disabled:u,onClick:()=>s(),className:"aio-input-form-submit-button aio-input-form-footer-button",children:a})]})}}getDefault({type:t,multiple:e}){return({file:[],multiselect:[],radio:e?[]:void 0,slider:e?[]:void 0})[t]}getValueByField({field,def,functional,value=this.getValue()}){let{properties}=this.props,props=properties.props,a;if(functional&&"function"==typeof field)a=field(value);else if("string"==typeof field){if(-1!==field.indexOf("value."))try{eval(`a = ${field}`)}catch{}else a=field}else a=field;return void 0===a?def:a}setValueByField(t={},e,i){try{e=(e=e.replaceAll("[",".")).replaceAll("]","")}catch{}var s=e.split("."),r=t;for(let o=0;o<s.length-1;o++){let n=s[o];"value"!==n&&(void 0===r[n]&&(isNaN(parseFloat(s[o+1]))?r[n]={}:r[n]=[]),r=r[n])}return r[s[s.length-1]]=i,t}componentDidMount(){this.reportErrors()}componentDidUpdate(){this.reportErrors()}reportErrors(){let{properties:t}=this.props,{getErrors:e}=t;if(!e)return;let i=this.getErrors();JSON.stringify(i)!==this.reportedErrors&&(e(i),this.reportedErrors=JSON.stringify(i))}getAttrs(t={},e={}){let i={...t.style,...e.style};return{...t,...e,style:i}}getInputProps(t,e){let{addToAttrs:i}=this.context,{properties:s}=this.props,{rtl:r,disabled:o,updateInput:n=t=>t,inputStyle:a={},inputClassName:l}=s,h=this.getValueByField({field:e.field,def:this.getDefault(t)}),p={rtl:r,value:h,onChange:i=>{"map"===t.type&&e.addressField&&i.address&&this.setValue({itemValue:i.address,field:e.addressField}),this.setValue({itemValue:i,formItem:e})},attrs:{}};for(let u in t){let d=-1!==["options"].indexOf(u);p[u]=this.getValueByField({field:t[u],functional:d})}p.value=h,"slider"===t.type&&void 0===p.showValue&&(p.showValue="inline");let{attrs:c={}}=t;for(let g in c)p.attrs[g]=this.getValueByField({field:c[g]});if(p.attrs=i({...p.attrs},{style:a,stylePriority:!1,className:l}),o&&(p.disabled=!0),-1!==["text","number","password","textarea"].indexOf(p.type)){let{inputAttrs:m={}}=t;for(let f in p.inputAttrs={},m)p.inputAttrs[f]=this.getValueByField({field:m[f]})}return n(p)}get_layout(t,e,i){if(!e)return!1;let{addToAttrs:s}=this.context,r="aio-input-form",o={label:`${r}-label`,footer:`${r}-item-footer`,error:`${r}-error`}[t];return i=s(i,{className:o}),{html:e,align:"v",attrs:i}}input_layout(t){let{properties:e}=this.props,{label:i,footer:s,input:r,flex:o,size:n,field:a}=t,l=this.getValueByField({field:a,def:this.getDefault(r)}),h=this.getError(t,l);h?this.errors[a]=h:this.errors[a]=void 0;let p=this.getAttrs(e.labelAttrs,t.labelAttrs),u=this.getAttrs(e.errorAttrs,t.errorAttrs),d=this.getAttrs(e.footerAttrs,t.footerAttrs),c=this.getInputProps(r,t);return{flex:o,size:n,className:"aio-input-form-item",column:[{flex:1,className:"aio-input-form-item-input-container of-visible",column:[this.get_layout("label",i,p),{className:"aio-input-form-item-input-container of-visible",html:_jsx(AIOInput,{...c})}]},this.get_layout("footer",s,d),this.get_layout("error",h,u)]}}getError(t,e,i){let{properties:s}=this.props,{lang:r}=s,{validations:o=[],input:n}=t,{type:a}=n;return o.length&&"html"!==a?("map"===n.type&&(e=!!e.lat&&!!e.lng),AIOValidation({value:e,title:t.label,lang:r,validations:o.map(t=>{let e=t[2]||{},i="function"==typeof t[1]?t[1]:this.getValueByField({field:t[1],def:""});return[t[0],i,e]})})):""}render(){let{addToAttrs:t}=this.context,{properties:e}=this.props,{rtl:i,attrs:s}=e;return s=t(s,{className:"aio-input-form"+(i?" aio-input-form-rtl":"")}),_jsx(RVD,{getLayout:(t,e={})=>!1!==this.getValueByField({field:t.show,def:!0})&&(t.input?this.input_layout({...t,flex:!e.row||t.size||t.flex?void 0:1}):(e.input&&(t.className="of-visible"),{...t})),layout:{attrs:s,column:[this.header_layout(),this.body_layout(),this.footer_layout()]}})}}function Options(t){let{properties:e,getOptions:i,types:s}=useContext(AICTX),r=e.type,[o,n]=useState("");function a(t){let{search:i}=e;return"tabs"===r||s.isInput||!1===i||"radio"===r&&!i?null:("string"!=typeof i&&(i="Search"),""===o&&t.length<10)?null:_jsxs("div",{className:"aio-input-search",children:[_jsx("input",{type:"text",value:o,placeholder:i,onChange:t=>n(t.target.value)}),_jsx("div",{className:"aio-input-search-icon",onClick(){n("")},children:_jsx(Icon,{path:o?mdiClose:mdiMagnify,size:.8})})]})}function l(t){let e=0;return t.map((t,i)=>o&&(void 0===t.text||""===t.text||-1===t.text.indexOf(o))?null:_jsx(Layout,{key:i,option:t,renderIndex:e,realIndex:i,searchValue:o}))}let h=t.options||i();if(!h.length)return null;let p=l(h),u=`aio-input-options aio-input-${r}-options`;return s.isDropdown&&(u+=" aio-input-dropdown-options"),_jsxs(_Fragment,{children:[a(h),_jsx("div",{className:u,children:p})]})}_defineProperty(Form,"contextType",AICTX);let AITableContext=createContext();class Table extends Component{constructor(p){super(p);let{properties}=p;this.dom=createRef();let Sort=new SortClass({properties,getState:()=>this.state,setState:t=>this.setState(t)}),{columns}=properties,searchColumns=[],updatedColumns=columns.map(t=>{let{id:e="aitc"+Math.round(1e6*Math.random()),sort:i,search:s}=t;t._id=e,i=!0===i?{}:i;let r={...t,sort:i};return s&&searchColumns.push(r),r});this.state={searchValue:"",columns:updatedColumns,searchColumns,sorts:[],Sort,getDynamics:({value,row,column,def,rowIndex})=>{let{properties}=this.props;if(properties.paging){let{serverSide,number,size}=properties.paging;serverSide||(rowIndex+=(number-1)*size)}let type=typeof value;if("string"===type){let result=value,{properties}=this.props,{getValue}=properties;if(getValue[value])result=getValue[value]({row,column,rowIndex});else if(-1!==value.indexOf("row."))try{eval(`result = ${value}`)}catch{result=""}return void 0===result?def:result}return"undefined"===type?def:"function"===type?value({row,column,rowIndex}):void 0===value?def:value},setCell:(row,column,cellNewValue)=>{if(column.input&&column.input.onChange)column.input.onChange({value:cellNewValue,row,column});else{let{properties}=this.props,{value,onChange=()=>{}}=properties;row=JSON.parse(JSON.stringify(row)),eval(`${column.value} = cellNewValue`),onChange(value.map(t=>t._id!==row._id?t:row))}}}}componentDidMount(){let{columns:t,Sort:e}=this.state;this.setState({sorts:e.initiateSortsByColumns(t)})}add(){let{properties:t}=this.props,{onAdd:e,value:i,onChange:s=()=>{}}=t;"function"==typeof e?e():"object"==typeof e&&s([e,...i])}remove(t,e){let{properties:i}=this.props,{value:s,onRemove:r,onChange:o=()=>{}}=i,n=()=>o(s.filter((e,i)=>e._id!==t._id));"function"==typeof r?r({row:t,action:n,rowIndex:e}):!0===r&&n()}exportToExcel(){let{properties:t}=this.props,{excel:e,value:i}=t,s=[],{getDynamics:r,columns:o}=this.state;for(let n=0;n<i.length;n++){let a=i[n],l={};for(let h=0;h<o.length;h++){let p=o[h],{title:u,excel:d,value:c}=p;d&&(l["string"==typeof d?d:u]=r({value:c,row:a,column:p,rowIndex:n}))}s.push(l)}ExportToExcel(s,{promptText:"string"==typeof e?e:"Inter Excel File Name"})}dragStart(t,e){this.start=e}dragOver(t,e){t.preventDefault()}getIndexById(t,e){for(let i=0;i<t.length;i++)if(t[i]._id===e)return i}drop(t,e){if(void 0===this.start._id||this.start._id===e._id)return;let{properties:i}=this.props,{value:s,onSwap:r,onChange:o=()=>{}}=i,n=s.filter(t=>t._id!==this.start._id),a=this.getIndexById(s,e._id);n.splice(a,0,this.start),"function"==typeof r?r({newValue:n,from:{...this.start},to:e}):o(n)}getSearchedRows(t){let{properties:e}=this.props,{onSearch:i}=e;if(!0!==i)return t;let{searchColumns:s,searchValue:r,getDynamics:o}=this.state;return s.length&&r?AIOInputSearch(t,r,(t,e)=>{let i="";for(let r=0;r<s.length;r++){let n=s[r],a=o({value:n.value,row:t,def:"",column:n,rowIndex:e});a&&(i+=a+" ")}return i}):t}getRows(){let{properties:t}=this.props,{Sort:e}=this.state,{value:i=[],paging:s}=t,r=this.getSearchedRows(i),o=e.getSortedRows(r),n=s&&!s.serverSide?o.slice((s.number-1)*s.size,s.number*s.size):o;return{rows:i,searchedRows:r,sortedRows:o,pagedRows:n}}getCellStyle(t){let{getDynamics:e}=this.state,i=e({value:t.width}),s=e({value:t.minWidth});return{width:i||void 0,flex:i?void 0:1,minWidth:s}}getCellAttrs({row:t,rowIndex:e,column:i,type:s}){let{addToAttrs:r}=this.context,{getDynamics:o}=this.state,n=o({value:i[`${s}Attrs`],column:i,def:{},row:t,rowIndex:e}),a=o({value:i.justify,def:!1}),l=`aio-input-table-${s}`+(a?` aio-input-table-${s}-justify`:"");return n=r(n,{className:l,style:this.getCellStyle(i)}),"title"===s&&(n.title=o({value:i.title,def:""})),{...n}}getRowAttrs(t,e){let{properties:i}=this.props,{addToAttrs:s,rowAttrs:r=()=>({})}=this.context,{onSwap:o}=i,n=s(r({row:t,rowIndex:e}),{className:"aio-input-table-row"});return o&&(n={...n,draggable:!0,onDragStart:e=>this.dragStart(e,t),onDragOver:e=>this.dragOver(e,t),onDrop:e=>this.drop(e,t)}),n}getCellContent({row:t,rowIndex:e,column:i}){let{getDynamics:s,setCell:r}=this.state,o=s({value:i.template,row:t,rowIndex:e,column:i});if(void 0!==o)return o;let n=s({value:i.input,row:t,rowIndex:e,column:i});n||(n={type:"text"});let a={};for(let l in n)-1!==["onChange","onClick"].indexOf(l)?a[l]=n[l]:a[l]=s({value:n[l],row:t,rowIndex:e,column:i});let h=s({value:i.value,row:t,rowIndex:e,column:i});return _jsx(AIOInput,{...a,value:h,onChange:i.input?e=>r(t,i,e):void 0})}search(t){let{properties:e}=this.props,{onSearch:i}=e;!0===i?this.setState({searchValue:t}):i(t)}getContext(t){let{addToAttrs:e}=this.context,{properties:i}=this.props,{rowGap:s,columnGap:r}=i;return{ROWS:t,addToAttrs:e,properties:i,state:{...this.state},parentDom:this.dom,SetState:t=>this.setState(t),getCellAttrs:this.getCellAttrs.bind(this),getRowAttes:this.getRowAttrs.bind(this),getCellContent:this.getCellContent.bind(this),add:this.add.bind(this),remove:this.remove.bind(this),search:this.search.bind(this),exportToExcel:this.exportToExcel.bind(this),RowGap:_jsx("div",{className:"aio-input-table-border-h",style:{height:s}}),ColumnGap:_jsx("div",{className:"aio-input-table-border-v",style:{width:r}})}}render(){let{properties:t}=this.props,{paging:e,attrs:i}=t,s=this.getRows();return _jsx(AITableContext.Provider,{value:this.getContext(s),children:_jsxs("div",{...i,ref:this.dom,className:"aio-input-table"+(i.className?" "+i.className:""),children:[_jsx(TableToolbar,{}),_jsxs("div",{className:"aio-input-table-unit",children:[_jsx(TableHeader,{}),_jsx(TableRows,{})]}),e?_jsx(TablePaging,{}):""]})})}}function TablePaging(){function t(t){let{number:i,size:s=20,length:r=0,sizes:o=[1,5,10,15,20,30,50,70,100],serverSide:n}=t;n||(r=e.sortedRows.length),-1===o.indexOf(s)&&(s=o[0]);let a=Math.ceil(r/s),l=(i=(i=i>a?a:i)<1?1:i)-3,h=i+3;return{...t,length:r,pages:a,number:i,size:s,sizes:o,start:l,end:h}}let{ROWS:e,properties:i}=useContext(AITableContext),[s,r]=useState(t(i.paging)),[o,n]=useState();function a(e){let i=t({...s,...e});r(i),i.serverSide?(clearTimeout(o),n(setTimeout(()=>i.onChange(i),800))):i.onChange(i)}useEffect(()=>{r(t(i.paging))},[i.paging]);let{rtl:l,pages:h,number:p,size:u,sizes:d,start:c,end:g}=s,m=[],f=!0;for(let y=c;y<=g;y++)if(y<1||y>h)m.push(_jsx("button",{className:"aio-input-table-paging-button aio-input-table-paging-button-hidden",children:y},y));else{let v;f?(v=1,f=!1):v=y===Math.min(g,h)?h:y,m.push(_jsx("button",{className:"aio-input-table-paging-button"+(v===p?" active":""),onClick:()=>a({number:v}),children:v},v))}return _jsxs("div",{className:"aio-input-table-paging",style:{direction:l?"rtl":"ltr"},children:[m,d.length&&_jsx(AIOInput,{attrs:{className:"aio-input-table-paging-button aio-input-table-paging-size"},type:"select",value:u,options:d,optionText:"option",optionValue:"option",onChange:t=>a({size:t}),popover:{fitHorizontal:!0}})]})}function TableRows(){let{properties:t,ROWS:e}=useContext(AITableContext),{rowTemplate:i,rowAfter:s=()=>null,rowBefore:r=()=>null,rowsTemplate:o,placeholder:n="there is not any items"}=t;function a(){let t=e.pagedRows||[];return o?o(t):t.length?t.map((e,o)=>{let{id:n="ailr"+Math.round(1e7*Math.random())}=e;e._id=void 0===e._id?n:e._id;let a=o===t.length-1,l;return l=i?i({row:e,rowIndex:o,isLast:a}):_jsx(TableRow,{row:e,rowIndex:o,isLast:a},n),_jsxs(Fragment,{children:[r({row:e,rowIndex:o}),l,s({row:e,rowIndex:o})]},n)}):!!n&&_jsx("div",{style:{width:"100%",textAlign:"center",padding:12,boxSizing:"border-box"},children:n})}let l=a();return!1===l?null:_jsx("div",{className:"aio-input-table-rows",children:l})}function TableToolbar(){let{add:t,exportToExcel:e,RowGap:i,properties:s,state:r,search:o,addToAttrs:n}=useContext(AITableContext),{toolbarAttrs:a,toolbar:l,onAdd:h,excel:p,onSearch:u}=s;a=n(a,{className:"aio-input-table-toolbar"});let{sorts:d}=r;return h||p||l||u||d.length?_jsxs(_Fragment,{children:[_jsxs("div",{...a,children:[l&&_jsx("div",{className:"aio-input-table-toolbar-content",children:"function"==typeof l?l():l}),_jsx("div",{className:"aio-input-table-search",children:!!u&&_jsx(AIOInput,{type:"text",onChange:t=>o(t),after:_jsx(Icon,{path:mdiMagnify,size:.7})})}),r.Sort.getSortButton(),!!p&&_jsx("div",{className:"aio-input-table-toolbar-icon",onClick:()=>e(),children:_jsx(Icon,{path:mdiFileExcel,size:.8})}),!!h&&_jsx("div",{className:"aio-input-table-toolbar-icon",onClick:()=>t(),children:_jsx(Icon,{path:mdiPlusThick,size:.8})})]}),i]}):null}function TableHeader(){let{RowGap:t,ColumnGap:e,properties:i,state:s,addToAttrs:r}=useContext(AITableContext),{headerAttrs:o,onRemove:n}=i;o=r(o,{className:"aio-input-table-header"});let{columns:a}=s,l=a.map((t,e)=>_jsx(TableTitle,{column:t,isLast:e===a.length-1},t._id)),h=n?_jsxs(_Fragment,{children:[e,_jsx("div",{className:"aio-input-table-remove-title"})]}):null;return _jsxs("div",{...o,children:[l,h,t]})}function TableTitle({column:t,isLast:e}){let{ColumnGap:i,getCellAttrs:s}=useContext(AITableContext),r=s({column:t,type:"title"});return _jsxs(_Fragment,{children:[_jsx("div",{...r,children:r.title}),!e&&i]})}function TableRow({row:t,isLast:e,rowIndex:i}){let{remove:s,RowGap:r,ColumnGap:o,properties:n,state:a,getRowAttes:l}=useContext(AITableContext);function h(){return a.columns.map((e,s)=>{let r=t._id+" "+e._id;return _jsx(TableCell,{isLast:s===a.columns.length-1,row:t,rowIndex:i,column:e},r)})}let{onRemove:p}=n;return _jsxs(_Fragment,{children:[_jsxs("div",{...l(t,i),children:[h(t,i),p?_jsxs(_Fragment,{children:[o,_jsx("button",{className:"aio-input-table-remove",onClick:()=>s(t),children:_jsx(Icon,{path:mdiClose,size:.8})})]}):null]},t._id),r]})}_defineProperty(Table,"contextType",AICTX);let TableCell=({row:t,rowIndex:e,column:i,isLast:s})=>{let{ColumnGap:r,getCellAttrs:o,getCellContent:n}=useContext(AITableContext),a=n({row:t,rowIndex:e,column:i});return _jsxs(Fragment,{children:[_jsx("div",{...o({row:t,rowIndex:e,column:i,type:"cell"}),children:a}),!s&&r]},t._id+" "+i._id)};class SortClass{constructor({properties:t,getState:e,setState:i}){_defineProperty(this,"setSort",(t,e)=>{let{sorts:i}=this.getState(),s=i.map(i=>i.sortId===t?{...i,...e}:i);this.setSorts(s)}),_defineProperty(this,"setSorts",async t=>{let{onChangeSort:e}=this.properties;if(e)!1!==await e(t)&&this.setState({sorts:t});else{this.setState({sorts:t});let i=t.filter(t=>!1!==t.active);if(i.length){let{value:s,onChange:r=()=>{}}=this.properties;r(this.sort(s,i))}}}),_defineProperty(this,"getSortedRows",t=>{if(this.initialSort)return t;let{onChangeSort:e,onChange:i=()=>{}}=this.properties,{sorts:s}=this.getState();if(e)return t;let r=s.filter(t=>!1!==t.active);return r.length&&t.length?void(this.initialSort=!0,i(this.sort(t,r))):t}),_defineProperty(this,"sort",(t=[],e=[])=>e.length?t.sort((t,i)=>{for(let s=0;s<e.length;s++){let{dir:r,getValue:o}=e[s],n=o(t),a=o(i);if(n<a)return -1*("dec"===r?-1:1);if(n>a)return 1*("dec"===r?-1:1);if(s===e.length-1)break}return 0}):t),_defineProperty(this,"initiateSortsByColumns",t=>{let{getDynamics:e}=this.getState(),i=[];for(let s=0;s<t.length;s++){let r=t[s],{sort:o,_id:n,type:a}=r;if(!o)continue;let{active:l=!1,dir:h="dec"}=o,p=t=>{let i=e({value:r.value,row:t,column:r});return"datepicker"===a&&(i=AIODate().getTime(i)),i};i.push({dir:h,title:o.title||r.title,sortId:n,active:l,type:a,getValue:p})}return i}),_defineProperty(this,"getSortOption",t=>{let{active:e,dir:i="dec",title:s,sortId:r}=t;return{text:s,checked:!!e,close:!1,value:r,after:_jsx(Icon,{path:"dec"===i?mdiArrowDown:mdiArrowUp,size:.8,onClick:t=>{t.stopPropagation(),this.setSort(r,{dir:"dec"===i?"inc":"dec"})}})}}),this.properties=t,this.getState=e,this.setState=i}getSortButton(){let{sorts:t}=this.getState();return t.length?_jsx(AIOInput,{popover:{header:{attrs:{className:"aio-input-table-toolbar-popover-header"},title:"Sort",onClose:!1},pageSelector:".aio-input-table"},caret:!1,type:"select",options:t.map(t=>this.getSortOption(t)),attrs:{className:"aio-input-table-toolbar-icon"},text:_jsx(Icon,{path:mdiSort,size:.7}),onSwap:(e,i,s)=>this.setSorts(s(t,e,i)),onChange:(t,e)=>{this.setSort(t,{active:!e.checked})}},"sortbutton"):null}}class Layout extends Component{constructor(t){super(t),this.dom=createRef()}getClassName(t){let{properties:e,getOptionProp:i,datauniqid:s,types:r,isMultiple:o,touch:n}=this.context,{direction:a,disabled:l,rtl:h}=e,{option:p}=this.props,u;return void 0!==p?(u=`aio-input-option aio-input-${this.properties.type}-option`,o()&&(u+=` aio-input-${this.properties.type}-multiple-option`),r.isDropdown&&(u+=" aio-input-dropdown-option"),i(p,"disabled")&&(u+=" disabled")):(u=`aio-input aio-input-${this.properties.type}${n?" aio-input-touch":""}`,"slider"===this.properties.type&&("top"===a||"bottom"===a?u+=" aio-input-slider-vertical":u+=" aio-input-slider-horizontal"),l&&(u+=" disabled"),r.isInput&&(u+=" aio-input-input"),h&&(u+=" aio-input-rtl")),u+=" "+s,u+=t?" has-label":""}getProps(){let{dragStart:t,dragOver:e,drop:i,click:s,optionClick:r,open:o,addToAttrs:n}=this.context,{option:a,realIndex:l,renderIndex:h}=this.props,{label:p,justify:u,attrs:d={},disabled:c,draggable:g}=this.properties,m;o&&!a&&-1!==["text","number","textarea"].indexOf(this.properties.type)&&(m=1e5);let f;c||(f=void 0===a?t=>{t.stopPropagation(),s(t,this.dom)}:t=>{t.stopPropagation(),r(a)});let y={...d=n(d,{className:this.getClassName(p),style:{...this.properties.style,justifyContent:u?"center":void 0,zIndex:m}}),onClick:f,ref:this.dom,disabled:c,"data-label":p};return g&&(y.datarealindex=l,y.datarenderindex=h,y.onDragStart=t,y.onDragOver=e,y.onDrop=i,y.draggable=!0),y}getDefaultChecked(){if("checkbox"===this.properties.type)return!!this.properties.value}getItemClassName(t){let{option:e}=this.props,i=`aio-input-${t}`;return e?i+=` aio-input-${this.properties.type}-option-${t}`:i+=` aio-input-${this.properties.type}-${t}`,i}text_layout(){let{text:t,subtext:e,placeholder:i,justify:s}=this.properties,{types:r}=this.context;return(void 0===t&&void 0!==i&&(t=_jsx("div",{className:"aio-input-placeholder",children:i})),t)?e?_jsxs("div",{className:`aio-input-content aio-input-${this.properties.type}-content${s&&!r.isInput?" aio-input-content-justify":""}`,children:[_jsx("div",{style:{textAlign:s?"center":void 0},className:`${this.getItemClassName("value")}${s&&!r.isInput?" aio-input-value-justify":""}`,children:t}),_jsx("div",{style:{textAlign:s?"center":void 0},className:`${this.getItemClassName("subtext")}${s&&!r.isInput?" aio-input-value-justify":""}`,children:e})]}):_jsx("div",{style:{textAlign:s&&!r.isInput?"center":void 0},className:`${this.getItemClassName("value")}${s&&!r.isInput?" aio-input-value-justify":""}`,children:t}):_jsx("div",{className:"flex-1"})}getProperties(){let{properties:t,type:e}=this.context,{option:i,text:s}=this.props,r=i||t;return void 0!==s&&(r.text=s),{...r,type:e}}getDragIcon(){return _jsx("svg",{viewBox:"8 4 10 13",role:"presentation",style:{width:12,height:"1.8rem"},children:_jsx("path",{d:"M9,3H11V5H9V3M13,3H15V5H13V3M9,7H11V9H9V7M13,7H15V9H13V7M9,11H11V13H9V11M13,11H15V13H13V11M9,15H11V17H9V15M13,15H15V17H13V15M9,19H11V21H9V19M13,19H15V21H13V19Z",style:{fill:"currentcolor"}})})}render(){let{option:t}=this.props;this.properties=this.getProperties();let{checked:e,checkIcon:i=AIOInput.defaults.checkIcon,before:s,after:r,caret:o,loading:n,type:a,draggable:l}=this.properties,h=_jsxs(_Fragment,{children:[l&&this.getDragIcon(),_jsx(CheckIcon,{checked:e,checkIcon:i,type:a,option:t}),void 0!==s&&_jsx("div",{className:this.getItemClassName("before"),children:s}),this.text_layout(),void 0!==r&&_jsx("div",{className:this.getItemClassName("after"),children:r}),n&&_jsx("div",{className:this.getItemClassName("loading"),children:!0===n?_jsx(Icon,{path:mdiLoading,spin:.3,size:.8}):n}),o&&_jsx("div",{className:"aio-input-caret",children:!0===o?_jsx(Icon,{path:mdiChevronDown,size:.8}):o})]}),p=this.getProps();return"file"===a?_jsxs("label",{...p,children:[h,_jsx(InputFile,{})]}):_jsx("div",{...p,children:h})}}_defineProperty(Layout,"contextType",AICTX);class CheckIcon extends Component{render(){let{checked:t,checkIcon:e=[]}=this.props;return void 0===t?null:"function"==typeof e?e(t):_jsx("div",{className:"aio-input-check-out"+(t?" checked":""),style:{...e,background:"none"},children:t&&_jsx("div",{className:"aio-input-check-in",style:{background:e.background}})})}}function File(){return _jsxs("div",{className:"aio-input-file-container",children:[_jsx(Layout,{}),_jsx(FileItems,{})]})}_defineProperty(CheckIcon,"contextType",AICTX);class InputFile extends Component{change(t){let{properties:e,isMultiple:i}=this.context,{value:s=[],onChange:r=()=>{}}=e,o=t.target.files,n;if(i()){let a=(n=[...s]).map(({name:t})=>t);for(let l=0;l<o.length;l++){let h=o[l];-1===a.indexOf(h.name)&&n.push({name:h.name,size:h.size,file:h})}}else n=o.length?o[0]:void 0;r(n)}render(){let{properties:t,isMultiple:e}=this.context,{disabled:i}=t,s=e();return _jsx("input",{disabled:i,type:"file",style:{display:"none"},multiple:s,onChange:t=>this.change(t)})}}_defineProperty(InputFile,"contextType",AICTX);class FileItems extends Component{render(){let{properties:t}=this.context,{value:e,rtl:i}=t,s=[];if(Array.isArray(e))s=e;else{if(!e)return null;s=[e]}return s.length?_jsx("div",{className:"aio-input-files",style:{direction:i?"rtl":"ltr"},children:s.map((t,e)=>_jsx(FileItem,{file:t,index:e},e))}):null}}_defineProperty(FileItems,"contextType",AICTX);class FileItem extends Component{getFile(t){let e=t.name||"untitle",i=t.size||0,s=20;try{let r,o,n=e.lastIndexOf("."),a=e.slice(0,n),l=e.slice(n+1,e.length);r=a.length>s?a.slice(0,parseInt(s/2))+"..."+a.slice(a.length-parseInt(s/2),a.length)+"."+l:e;let h=i;if(!h)return{minName:r,sizeString:!1};let p=h/1073741824,u=h/1048576,d=h/1024;return o=p>=1?p.toFixed(2)+" GB":u>=1?u.toFixed(2)+" MB":d>=1?d.toFixed(2)+" KB":h+" byte",{minName:r,sizeString:o}}catch{return{minName:"untitle",sizeString:!1}}}remove(t){let{properties:e}=this.context,{onChange:i=()=>{},value:s=[]}=e,r=[];for(let o=0;o<s.length;o++)o!==t&&r.push(s[o]);i(r)}renderString(t,e){let i;return`${t}${i=!1===e?"":` ( ${e})`}`}render(){let{file:t,index:e}=this.props,{minName:i,sizeString:s}=this.getFile(t),{url:r,name:o}=t;return _jsxs("div",{className:"aio-input-file",style:{cursor:r?"pointer":"default"},children:[_jsx("div",{className:"aio-input-file-icon",children:_jsx(Icon,{path:r?mdiDownloadOutline:mdiAttachment,size:.8})}),_jsx("div",{className:"aio-input-file-name",onClick(){r&&DownloadUrl(r,o)},children:this.renderString(i,s)}),_jsx("div",{className:"aio-input-file-icon",onClick:()=>this.remove(e),children:_jsx(Icon,{path:mdiClose,size:.7})})]})}}_defineProperty(FileItem,"contextType",AICTX);let DPContext=createContext();class DatePicker extends Component{render(){let{properties:t}=this.context,{onClose:e}=this.props;return _jsx(Calendar,{properties:t,onClose:e})}}_defineProperty(DatePicker,"contextType",AICTX);class Calendar extends Component{constructor(t){super(t);let{properties:e}=t,{calendarType:i,value:s}=e,{getToday:r,convertToArray:o,getMonths:n,getWeekDay:a}=AIODate(),l=r({calendarType:i});s||(s=l);let[h,p,u]=o({date:s}),d=n({calendarType:i});this.state={activeDate:{year:h,month:p,day:u},years:this.getYears(),today:l,todayWeekDay:a({date:l}).weekDay,months:d,thisMonthString:d[l[1]-1]}}translate(t){let{properties:e,translate:i=t=>t}=this.props,{calendarType:s,unit:r}=e;"Today"===t&&("month"===r?t="This Month":"hour"===r&&(t="This Hour"));let o={Clear:"حذف","This Hour":"ساعت کنونی",Today:"امروز","This Month":"ماه جاری"},n=t;return"jalali"===s&&o[t]&&(n=o[t]),i(n)}changeActiveDate(t){let e;if("today"===t){let{today:i}=this.state,{properties:s}=this.props,{unit:r}=s,[o,n,a]=i;e={year:o,month:n,day:"month"===r?1:a}}else e={...this.state.activeDate,...t};this.setState({activeDate:e})}getYears(){let t,e,{properties:i}=this.props,{calendarType:s,startYear:r,endYear:o}=i,n=AIODate().getToday({calendarType:s});t="string"==typeof r&&0===r.indexOf("-")?n[0]-parseInt(r.slice(1,r.length)):parseInt(r),e="string"==typeof o&&0===o.indexOf("+")?n[0]+parseInt(o.slice(1,o.length)):parseInt(o);let a=[];for(var l=t;l<=e;l++)a.push(l);return a}getPopupStyle(){let{properties:t}=this.props,{disabled:e,size:i,theme:s}=t;return{width:i,fontSize:i/17,background:s[1],color:s[0],stroke:s[0],cursor:!0===e?"not-allowed":void 0}}getContext(){let{properties:t}=this.props;return{...this.state,properties:t,changeActiveDate:this.changeActiveDate.bind(this),translate:this.translate.bind(this),SetState:t=>this.setState(t),onChange:({year:t,month:e,day:i,hour:s})=>{let{properties:r,onClose:o}=this.props,{calendarType:n,unit:a,onChange:l=()=>{},close:h,value:p}=r,{months:u}=this.state,d=[t,e,i,s],c="gregorian"===n?AIODate().toJalali({date:d}):d,g="jalali"===n?AIODate().toGregorian({date:d}):d,{weekDay:m,index:f}="month"===a?{weekDay:null,index:null}:AIODate().getWeekDay({date:d}),y=t=>{if(void 0!==t)return 1===(t=t.toString()).length?`0${t}`:t},v,x="string"==typeof p?AIODate().getSplitter(p):"/";"month"===a?v=`${t}${x}${y(e)}`:"day"===a?v=`${t}${x}${y(e)}${x}${y(i)}`:"hour"===a&&(v=`${t}${x}${y(e)}${x}${y(i)}${x}${y(s)}`);let $=u[e-1],b="gregorian"===n?AIODate().getMonths({calendarType:"jalali"})[e-1]:$,_="jalali"===n?AIODate().getMonths({calendarType:"gregorian"})[e-1]:$,S={months:u,jalaliDateArray:c,gregorianDateArray:g,dateArray:d,weekDay:m,weekDayIndex:f,dateString:v,year:t,month:e,day:i,hour:s,monthString:$,jalaliMonthString:b,gregorianMonthString:_};l(v,S),h&&o()}}}render(){return _jsx(DPContext.Provider,{value:this.getContext(),children:_jsxs("div",{className:"aio-input-datepicker-container",style:{display:"flex"},children:[_jsxs("div",{className:"aio-input-datepicker-calendar",style:this.getPopupStyle(),children:[_jsx(DPHeader,{}),_jsx(DPBody,{}),_jsx(DPFooter,{})]}),_jsx(DPToday,{})]})})}}class DPToday extends Component{render(){let{properties:t,translate:e,today:i,todayWeekDay:s,thisMonthString:r}=this.context,{theme:o,calendarType:n,unit:a,size:l}=t;return _jsxs("div",{className:"aio-input-datepicker-today",style:{width:l/2,color:o[1],background:o[0]},children:[_jsx("div",{style:{fontSize:l/13},children:e("Today")}),("day"===a||"hour"===a)&&_jsxs(_Fragment,{children:[_jsx("div",{style:{fontSize:l/11},children:"gregorian"===n?s.slice(0,3):s}),_jsx("div",{style:{fontSize:l/12*4,height:l/12*4},children:i[2]}),_jsx("div",{style:{fontSize:l/11},children:"gregorian"===n?r.slice(0,3):r})]}),"month"===a&&_jsx("div",{style:{fontSize:l/8},children:"gregorian"===n?r.slice(0,3):r}),_jsx("div",{style:{fontSize:l/11},children:i[0]}),"hour"===a&&_jsx("div",{style:{fontSize:l/10},children:i[3]+":00"})]})}}_defineProperty(DPToday,"contextType",DPContext);class DPFooter extends Component{render(){let{properties:t,changeActiveDate:e,translate:i}=this.context,{remove:s,disabled:r,onChange:o=()=>{},size:n}=t;if(r)return null;let a={padding:`${n/20}px 0`};return _jsxs("div",{className:"aio-input-datepicker-footer",style:{fontSize:n/13},children:[s&&_jsx("button",{style:a,onClick:()=>o(!1),children:i("Clear")}),_jsx("button",{style:a,onClick:()=>e("today"),children:i("Today")})]})}}_defineProperty(DPFooter,"contextType",DPContext);class DPBody extends Component{getStyle(){let{properties:t}=this.context,{size:e,calendarType:i,unit:s}=t;var r={hour:4,day:7,month:3}[s],o={hour:6,day:7,month:4}[s],n=e/18,a=e/15,l=(e-2*n)/r,h={hour:e/7,day:l,month:e/6,year:e/7}[s],p="",u="";for(let d=1;d<=r;d++)p+=l+"px"+(d!==r?" ":"");for(let c=1;c<=o;c++)u+=h+"px"+(c!==o?" ":"");let g="gregorian"===i?"ltr":"rtl";return{gridTemplateColumns:p,gridTemplateRows:u,direction:g,padding:n,fontSize:a}}render(){let{properties:t,activeDate:e}=this.context,{unit:i}=t;return _jsxs("div",{className:"aio-input-datepicker-body",style:this.getStyle(),children:["hour"===i&&Array(24).fill(0).map((t,i)=>_jsx(DPCell,{dateArray:[e.year,e.month,e.day,i]},"cell"+i)),"day"===i&&_jsx(DPBodyDay,{}),"month"===i&&Array(12).fill(0).map((t,i)=>_jsx(DPCell,{dateArray:[e.year,i+1]},"cell"+i))]})}}_defineProperty(DPBody,"contextType",DPContext);class DPBodyDay extends Component{render(){let{properties:t,activeDate:e}=this.context,{theme:i,calendarType:s}=t,r=AIODate().getWeekDay({date:[e.year,e.month,1]}).index;var o=AIODate().getMonthDaysLength({date:[e.year,e.month]});let n=AIODate().getWeekDays({calendarType:s});return _jsxs(_Fragment,{children:[n.map((t,e)=>_jsx(DPCellWeekday,{weekDay:t},"weekday"+e)),Array(r).fill(0).map((t,e)=>_jsx("div",{className:"aio-input-datepicker-space aio-input-datepicker-cell",style:{background:i[1]}},"space"+e)),Array(o).fill(0).map((t,i)=>_jsx(DPCell,{dateArray:[e.year,e.month,i+1]},"cell"+i)),Array(42-(r+o)).fill(0).map((t,e)=>_jsx("div",{className:"aio-input-datepicker-space aio-input-datepicker-cell",style:{background:i[1]}},"endspace"+e))]})}}_defineProperty(DPBodyDay,"contextType",DPContext);class DPCellWeekday extends Component{render(){let{properties:t,translate:e}=this.context,{theme:i,calendarType:s}=t,{weekDay:r}=this.props;return _jsx("div",{className:"aio-input-datepicker-weekday aio-input-datepicker-cell",style:{background:i[1],color:i[0]},children:_jsx("span",{children:e(r.slice(0,"gregorian"===s?2:1))})})}}_defineProperty(DPCellWeekday,"contextType",DPContext);class DPCell extends Component{getClassName(t,e,i,s){var r="aio-input-datepicker-cell";return i&&(r+=" aio-input-datepicker-disabled"),t&&(r+=" aio-input-datepicker-active"),e&&(r+=" today"),s&&(r+=" className"),r}render(){let{properties:t,translate:e,onChange:i}=this.context,{disabled:s,dateAttrs:r,theme:o,value:n,calendarType:a,unit:l,dateDisabled:h}=t,{dateArray:p}=this.props,{isEqual:u,isMatch:d,getMonths:c,getToday:g}=AIODate(),m=!!n&&AIODate().isEqual(p,n),f=u(p,g({calendarType:a})),y=!!h&&d({date:p,matchers:h}),v=s||y,x={};r&&(x=r({dateArray:p,isToday:f,isDisabled:v,isActive:m,isMatch:t=>d({date:p,matchers:t})})||{});let $=this.getClassName(m,f,v,x.className),b=v?void 0:()=>{i({year:p[0],month:p[1],day:p[2],hour:p[3]},!0)},_={};v||(_.background=o[1]),-1!==$.indexOf("aio-input-datepicker-active")&&(_.background=o[0],_.color=o[1]),-1!==$.indexOf("today")&&(_.border=`1px solid ${o[0]}`),_={..._,...x.style};let S;if("hour"===l)S=p[3]+":00";else if("day"===l)S=p[2];else if("month"===l){let w=c({calendarType:a});S=e("gregorian"===a?w[p[1]-1].slice(0,3):w[p[1]-1])}return _jsx("div",{style:_,onClick:b,className:$,children:v?_jsx("del",{children:S}):S})}}_defineProperty(DPCell,"contextType",DPContext);class DPHeader extends Component{getYears(){let{activeDate:t,years:e,changeActiveDate:i}=this.context;return _jsx(DPHeaderDropdown,{value:t.year,options:e.map(t=>({text:t.toString(),value:t})),onChange(t){i({year:t})}})}getMonths(){let{properties:t,activeDate:e,changeActiveDate:i,months:s,translate:r}=this.context,{calendarType:o}=t;return _jsx(DPHeaderDropdown,{value:e.month,onChange(t){i({month:t})},options:s.map((t,e)=>({value:e+1,text:r("gregorian"===o?t.slice(0,3):t)}))})}getDays(){let{activeDate:t,changeActiveDate:e}=this.context,i=AIODate().getMonthDaysLength({date:[t.year,t.month]}),s=Array(i).fill(0).map((t,e)=>({text:(e+1).toString(),value:e+1})),r={value:t.day,options:s,onChange:t=>e({day:t})};return _jsx(DPHeaderDropdown,{...r})}render(){let{properties:t}=this.context,{size:e,unit:i}=t;return _jsxs("div",{className:"aio-input-datepicker-header",style:{height:e/4},children:[_jsx(DPArrow,{type:"minus"}),_jsxs("div",{className:"aio-input-datepicker-select",style:{fontSize:Math.floor(e/12)},children:[this.getYears(),"month"!==i?this.getMonths():null,"hour"===i?this.getDays():null]}),_jsx(DPArrow,{type:"plus"})]})}}_defineProperty(DPHeader,"contextType",DPContext);class DPHeaderDropdown extends Component{render(){let{value:t,options:e,onChange:i}=this.props;if(1===this.props.options.length)return this.props.options[0];let{properties:s}=this.context,{size:r,theme:o}=s;return _jsx(AIOInput,{value:t,options:e,onChange:i,search:!1,caret:!1,type:"select",attrs:{className:"aio-input-datepicker-dropdown"},optionAttrs:{style:{height:r/6,background:o[1],color:o[0]}}})}}_defineProperty(DPHeaderDropdown,"contextType",DPContext);class DPArrow extends Component{change(){let{properties:t,years:e,changeActiveDate:i,activeDate:s}=this.context,{calendarType:r,unit:o}=t,{type:n}=this.props,a=("gregorian"===r?1:-1)*("minus"===n?-1:1),l=[s.year,s.month,s.day],h=AIODate().getByOffset({date:l,offset:a,unit:{hour:"day",day:"month",month:"year"}[o]});!(h[0]>e[e.length-1])&&!(h[0]<e[0])&&("month"===o&&i({year:h[0]}),"day"===o&&i({year:h[0],month:h[1]}),"hour"===o&&i({year:h[0],month:h[1],day:h[2]}))}getIcon(){let{properties:t}=this.context,{type:e}=this.props,{theme:i}=t;return _jsx(Icon,{path:"minus"===e?mdiChevronLeft:mdiChevronRight,size:1,style:{color:i[0]}})}render(){let{size:t}=this.context;return _jsx("div",{className:"aio-input-datepicker-arrow",style:{width:t/6,height:t/6},onClick:()=>this.change(),children:this.getIcon()})}}function InputSlider(){let{properties:t,isMultiple:e}=useContext(AICTX),{onChange:i,value:s}=t;function r(t){e()?i([...t]):i(t[0])}let o;return _jsx(Slider,{...{...t,value:s,onChange:i?r:void 0}})}_defineProperty(DPArrow,"contextType",DPContext);let SliderContext=createContext();class Slider extends Component{constructor(t){super(t);var{direction:e}=this.props;this.touch="ontouchstart"in document.documentElement,"left"===e?(this.getDiff=function(t,e,i){return t-i.x},this.oriention="horizontal"):"right"===e?(this.getDiff=function(t,e,i){return i.x-t},this.oriention="horizontal"):"top"===e?(this.getDiff=function(t,e,i){return e-i.y},this.oriention="vertical",this.flexDirection="column-reverse"):(this.getDiff=function(t,e,i){return i.y-e},this.oriention="vertical",this.flexDirection="column"),this.dom=createRef(),this.state={isDown:!1}}getClient(t){return this.touch?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY}}getPercentByValue(t,e,i){return 100*(t-e)/(i-e)}fix(t){let e=this.props.step.toString().indexOf("."),i=-1===e?0:this.props.step.toString().length-e-1;return parseFloat(t.toFixed(i))}getStartByStep(t,e){for(var i=Math.round((t-e)/e)*e;i<t;)i+=e;return i}eventHandler(t,e,i,s="bind"){var r={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"};e=this.touch?r[e]:e;var o="string"==typeof t?"window"===t?$(window):$(t):t;o.unbind(e,i),"bind"===s&&o.bind(e,i)}getValidValue(){let{value:t=[],start:e,end:i,min:s=e,max:r=i,step:o}=this.props;Array.isArray(t)&&t.length||(t=[0]);for(var n=0;n<t.length;n++){var a=t[n];(a=Math.round((a-e)/o)*o+e)<s&&(a=s),a>r&&(a=r),t[n]=a}return t}getOffset(t,e,i,s){var{start:r,end:o,step:n}=this.props,a=this.getClient(s);return Math.round((o-r)*this.getDiff(t,e,a)/i/n)*n}getValue(t,e=this.props){return"function"==typeof t?t(e):t}getPercents(){var{start:t,end:e}=this.props,i=this.value.map((i,s)=>[this.getPercentByValue(s?this.value[s-1]:t,t,e),this.getPercentByValue(i,t,e)]);return i.push([i[i.length-1][1],100]),i}decreaseAll(t=this.props.step){for(var e=this.props.start,{min:i=e}=this.props,s=Math.min(t,this.value[0]-this.getValue(i)),r=0;r<this.value.length;r++)this.value[r]-=s,this.value[r]=this.fix(this.value[r]);this.moved=!0}increaseAll(t=this.props.step){let e=this.props.end,{max:i=e}=this.props,s=Math.min(t,this.getValue(i)-this.value[this.value.length-1]);for(var r=0;r<this.value.length;r++)this.value[r]+=s,this.value[r]=this.fix(this.value[r]);this.moved=!0}mouseDown(t,e,i){t.preventDefault();let{start:s,end:r,min:o=s,max:n=r,onChange:a,disabled:l}=this.props;if(!a||l)return;let{x:h,y:p}=this.getClient(t),u=$(this.dom.current),d=u.find(".aio-slider-point-container"),c=u.find(".aio-slider-line")["horizontal"===this.oriention?"width":"height"](),g=this.value.length;if(this.eventHandler("window","mousemove",$.proxy(this.mouseMove,this)),this.eventHandler("window","mouseup",$.proxy(this.mouseUp,this)),this.moved=!1,this.setState({isDown:!0}),d.css({zIndex:10}),"point"===i){let m=d.eq(e);m.css({zIndex:100}),m.find(".aio-slider-point").addClass("active");let f=this.value[e],y=0===e?o:this.value[e-1],v=e===this.value.length-1?n:this.value[e+1];this.startOffset={x:h,y:p,size:c,index:[e],value:[f],startLimit:y-f,endLimit:v-f}}else{let x=d.eq(e-1),b=d.eq(e);x.css({zIndex:100}),b.css({zIndex:100});let _=x.find(".aio-slider-point"),S=b.find(".aio-slider-point");if(_.addClass("active"),S.addClass("active"),0===e?this.decreaseAll():e===g&&this.increaseAll(),0===e||e===g)this.startOffset={x:h,y:p,size:c,index:this.value.map((t,e)=>e),value:this.value.map(t=>t),startLimit:o-this.value[0],endLimit:n-this.value[g-1]};else{let w=this.value[e-1],C=this.value[e],P=1===e?o:this.value[e-2],T=e===g-1?n:this.value[e+1];this.startOffset={x:h,y:p,size:c,index:[e-1,e],value:[w,C],startLimit:P-w,endLimit:T-C}}}}mouseMove(t){let{onChange:e}=this.props;var{x:i,y:s,size:r,value:o,startLimit:n,endLimit:a,index:l}=this.startOffset,h=this.getOffset(i,s,r,t);h<n?h=n:h>a&&(h=a);for(var p=0;p<o.length;p++){let u=l[p],d=parseFloat(o[p])+h;if(this.value[u]===d)return;this.value[u]=this.fix(d)}this.moved=!0,e(this.value,!0)}mouseUp(){this.eventHandler("window","mousemove",this.mouseMove,"unbind"),this.eventHandler("window","mouseup",this.mouseUp,"unbind");let{onChange:t}=this.props;$(this.dom.current).find(".aio-slider-point").removeClass("active"),this.setState({isDown:!1}),this.moved&&t(this.value,!1)}getContext(){return{...this.props,touch:this.touch,fix:this.fix.bind(this),oriention:this.oriention,getValue:this.getValue.bind(this),isDown:this.state.isDown,mouseDown:this.mouseDown.bind(this),getStartByStep:this.getStartByStep.bind(this),getPercentByValue:this.getPercentByValue.bind(this),value:this.value}}getStyle(){return{direction:"ltr",flexDirection:this.flexDirection}}getClassName(){let{attrs:t,disabled:e}=this.props,{className:i}=t;return`aio-slider ${this.context.oriention}${i?" "+i:""}${e?" disabled":""}`}render(){this.value=this.getValidValue(),this.context=this.getContext();var{labelStep:t,scaleStep:e}=this.props,i=this.getPercents();return _jsx(SliderContext.Provider,{value:this.context,children:_jsx("div",{ref:this.dom,style:this.getStyle(),className:this.getClassName(),children:_jsxs("div",{style:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center",position:"relative"},children:[_jsx(SliderLine,{}),t&&_jsx(SliderLabels,{}),e&&_jsx(SliderScales,{}),this.value.map((t,e)=>_jsx(SliderFill,{index:e,percent:i[e]},e)),_jsx(SliderFill,{index:this.value.length,percent:i[this.value.length]},this.value.length),this.value.map((t,e)=>_jsx(SliderPoint,{index:e,percent:i[e]},e))]})})})}}Slider.defaultProps={direction:"right",editLabel:t=>t,labelStyle:{},labelRotate:0,value:[0],scaleStyle:{},style(){},start:0,end:100,step:1,activegetPointStyle:{},getText:()=>"",attrs:{},pointStyle:{},lineStyle:{},fillStyle:{},valueStyle:{},editValue:(t,e)=>t,textStyle(){}};class SliderLine extends Component{render(){var{lineStyle:t}=this.context;return _jsx("div",{className:"aio-slider-line",style:"function"==typeof t?t(this.context):t})}}_defineProperty(SliderLine,"contextType",SliderContext);class SliderFill extends Component{getContainerStyle(){var{oriention:t,direction:e}=this.context,{percent:i}=this.props,s={};return s[({right:"left",left:"right",top:"bottom",bottom:"top"})[e]]=i[0]+"%","horizontal"===t?s.width=i[1]-i[0]+"%":s.height=i[1]-i[0]+"%",s}render(){var{mouseDown:t,rangeEvents:e={},fillStyle:i,getText:s,textStyle:r,touch:o,value:n}=this.context,{index:a}=this.props,l={"data-index":a,className:"aio-slider-fill-container",style:this.getContainerStyle(),[o?"onTouchStart":"onMouseDown"]:e=>t(e,a,"fill")};for(let h in e)l[h]=()=>e[h](a);let p=s(a,this.context),u,d;return"function"==typeof i?u=i(a,this.context):(1===n.length&&0===a&&(u=i,d=!0),n.length>1&&0!==a&&a!==n.length&&(u=i,d=!0)),_jsxs("div",{...l,children:[_jsx("div",{className:"aio-slider-fill"+(d?" aio-slider-fill-active":""),style:u,"data-index":a}),void 0!==p&&_jsx("div",{className:"aio-slider-text",style:r(a),children:p})]})}}_defineProperty(SliderFill,"contextType",SliderContext);class SliderPoint extends Component{getContainerStyle(){var{direction:t}=this.context,{percent:e}=this.props;return{[({right:"left",left:"right",top:"bottom",bottom:"top"})[t]]:e[1]+"%"}}getValueStyle(){var{showValue:t,isDown:e,valueStyle:i}=this.context,{index:s}=this.props;return!1===t?{display:"none"}:!0===t||"inline"===t||e?"function"==typeof i?i(s,this.context):i:{display:"none"}}render(){var{value:t,mouseDown:e,editValue:i,pointEvents:s,getPointHTML:r,pointStyle:o,touch:n,fix:a,showValue:l}=this.context,{index:h}=this.props,p=t[h],u={style:this.getContainerStyle(),"data-index":h,className:"aio-slider-point-container",[n?"onTouchStart":"onMouseDown"]:t=>e(t,h,"point")};for(let d in s)u[d]=()=>s[d](h);var c={className:"aio-slider-point",style:"function"==typeof o?o(h,this.context):o,"data-index":h},g={style:this.getValueStyle(),className:`aio-slider-value ${"aio-slider-value-"+h}`+("inline"===l?" aio-slider-value-inline":"")};let m=r?r(h,this.context):"";return _jsxs("div",{...u,children:["inline"!==l&&_jsx("div",{...c,children:m}),_jsx("div",{...g,children:i(a(p),h)})]})}}_defineProperty(SliderPoint,"contextType",SliderContext);class SliderLabels extends Component{constructor(t){super(t),this.dom=createRef(),$(window).on("resize",this.update.bind(this))}getLabelsByStep(t){for(var{start:e,end:i,getStartByStep:s}=this.context,r=[],o=s(e,t),n=0;o<=i;)r.push(_jsx(SliderLabel,{value:o},n)),o+=t,o=parseFloat(o.toFixed(6)),n++;return r}getLabels(t){return t.map(t=>_jsx(SliderLabel,{value:t},t))}update(){let t=$(this.dom.current).find(".aio-slider-label div");if(!t.length)return;let{direction:e}=this.context,i=t.eq(0),s="yes"===i.attr("datarotated")?"height":"width";if("right"===e){let r=i.offset().left+i[s]();for(let o=1;o<t.length;o++){let n=t.eq(o),a="yes"===n.attr("datarotated")?"height":"width";n.css({display:"block"});let l=n.offset().left,h=n[a]();l<r+5?n.css({display:"none"}):r=l+h}}else if("left"===e){var p=i.offset().left;for(let u=1;u<t.length;u++){let d=t.eq(u),c="yes"===d.attr("datarotated")?"height":"width";d.css({display:"block"});let g=d.offset().left;g+d[c]()>p-5?d.css({display:"none"}):p=g}}}componentDidMount(){this.update()}componentDidUpdate(){this.update()}render(){let{labelStep:t}=this.context;return _jsx("div",{className:"aio-slider-labels",ref:this.dom,children:Array.isArray(t)?this.getLabels(t):this.getLabelsByStep(t)})}}_defineProperty(SliderLabels,"contextType",SliderContext);class SliderLabel extends Component{getStyle(t){var{start:e,end:i,getPercentByValue:s,direction:r,labelStyle:o}=this.context,{value:n}=this.props,a="function"==typeof o?o(n,this.context):o;return a=a?{...a}:{},a[({right:"left",left:"right",top:"bottom",bottom:"top"})[r]]=s(n,e,i)+"%",t&&(a.transform=`rotate(${t+"deg"})`,a.justifyContent=t>0?"flex-start":"flex-end"),a}click(t){var{onLabelClick:e}=this.context;if(t.stopPropagation(),e){var{value:i}=this.props;e(i)}}render(){let{editLabel:t,labelRotate:e}=this.context,{value:i}=this.props,s="function"==typeof e?e(i):e,r;try{r=t(i)}catch{r=""}return _jsx("div",{onClick:this.click.bind(this),style:this.getStyle(s),className:"aio-slider-label",children:_jsx("div",{datarotated:s?"yes":"no",className:"aio-slider-label-text",children:r})})}}_defineProperty(SliderLabel,"contextType",SliderContext);class SliderScales extends Component{getScalesByStep(t){for(var{start:e,end:i,getStartByStep:s}=this.context,r=s(e,t),o=0,n=[];r<=i;)n.push(_jsx(SliderScale,{value:r},o)),r+=t,o++;return n}getScales(t){return t.map(t=>_jsx(SliderScale,{value:t},t))}render(){let{scaleStep:t}=this.context;return _jsx("div",{className:"aio-slider-scales",children:Array.isArray(t)?this.getScales(t):this.getScalesByStep(t)})}}function SliderScale(t){let e=useContext(SliderContext);function i(){var{scaleStyle:i}=e,{start:s,end:r,direction:o,getPercentByValue:n}=e,{value:a}=t,l="function"==typeof i?i(a,e):i;return(l=l?{...l}:{})||(l={}),l[({right:"left",left:"right",top:"bottom",bottom:"top"})[o]]=n(a,s,r)+"%",l}let{getScaleHTML:s}=e,{value:r}=t;return _jsx("div",{className:"aio-slider-scale",style:i(),children:s&&s(r)})}_defineProperty(SliderScales,"contextType",SliderContext);class List extends Component{constructor(t){super(t);let{properties:e,getOptionProp:i}=t;this.getOptionProp=i,this.touch="ontouchstart"in document.documentElement,this.dom=createRef();let{count:s,move:r}=e;r&&r(this.move.bind(this)),this.state={count:s}}eventHandler(t,e,i,s="bind"){var r={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"};e=this.touch?r[e]:e;var o="string"==typeof t?"window"===t?$(window):$(t):t;o.unbind(e,i),"bind"===s&&o.bind(e,i)}getClient(t){try{return this.touch&&t.changedTouches?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[t.clientX,t.clientY]}catch{return this.touch&&t.changedTouches?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[t.clientX,t.clientY]}}getStyle(){let{properties:t}=this.props,{size:e,width:i}=t;var{count:s}=this.state,r=s*e;return{width:i,height:r}}getOptions(){let{properties:t}=this.props,{size:e,options:i=[],value:s}=t;return this.activeIndex=0,i.map((t,i)=>{let r=this.getOptionProp(t,"value"),o=this.getOptionProp(t,"text",""),n=this.getOptionProp(t,"style",{});return r===s&&(this.activeIndex=i),_jsx("div",{dataindex:i,className:"aio-input-list-option",style:{height:e,...n},children:o},i)})}getIndexByTop(t){let{properties:e}=this.props,{size:i}=e,{count:s}=this.state;return Math.round((s*i-i-2*t)/(2*i))}getTopByIndex(t){let{properties:e}=this.props,{size:i}=e,{count:s}=this.state;return(s-2*t-1)*i/2}getContainerStyle(){return{top:this.getTopByIndex(this.activeIndex)}}moveDown(){let{properties:t}=this.props,{options:e=[]}=t;if(!(this.activeIndex>=e.length-1)){this.activeIndex++;var i=this.getTopByIndex(this.activeIndex);this.setStyle({top:i}),this.setBoldStyle(this.activeIndex)}}setBoldStyle(t){$(this.dom.current).find(".aio-input-list-option").removeClass("active"),$(this.dom.current).find(".aio-input-list-option[dataindex="+t+"]").addClass("active")}moveUp(){if(!(this.activeIndex<=0)){this.activeIndex--;var t=this.getTopByIndex(this.activeIndex);this.setStyle({top:t}),this.setBoldStyle(this.activeIndex)}}keyDown(t){let{properties:e}=this.props,{editable:i}=e;i&&(38===t.keyCode?this.moveUp():40===t.keyCode&&this.moveDown())}getLimit(){let{properties:t}=this.props,{options:e=[]}=t;return{top:this.getTopByIndex(-1),bottom:this.getTopByIndex(e.length)}}getTrueTop(t){let{properties:e}=this.props,{options:i=[]}=e,s=this.getIndexByTop(t);return s<0&&(s=0),s>i.length-1&&(s=i.length-1),this.getTopByIndex(s)}mouseDown(t){let{properties:e}=this.props,{options:i=[],onChange:s=()=>{},editable:r}=e;if(!r)return;this.eventHandler("window","mousemove",$.proxy(this.mouseMove,this)),this.eventHandler("window","mouseup",$.proxy(this.mouseUp,this)),clearInterval(this.interval),this.moved=!1,this.isDown=!0;let o=this.getClient(t)[1];this.setStyle({transition:"unset"});let n=this.getTop();var a=this.getIndexByTop(n);this.setBoldStyle(a),this.setStyle({top:n,transition:"unset"}),s(i[a].value,a),this.so={y:o,top:n,limit:this.getLimit()}}getTop(){var t=parseInt($(this.dom.current).find(".aio-input-list-options").css("top"));return this.getTrueTop(t)}fixTop(t){let{top:e,bottom:i}=this.so.limit;return t>e?e:t<i?i:t}mouseMove(t){this.moved=!0;let e=this.getClient(t)[1];var i=e-this.so.y;void 0===this.lastY&&(this.lastY=e),this.deltaY=e-this.lastY,this.lastY=e,20>Math.abs(i)&&(this.deltaY=3);var s=this.fixTop(this.so.top+i);let r=this.getIndexByTop(s);this.so.newTop=s,this.setBoldStyle(r),this.setStyle({top:s})}setStyle(t){$(this.dom.current).find(".aio-input-list-options").css(t)}mouseUp(t){this.eventHandler("window","mousemove",this.mouseMove,"unbind"),this.eventHandler("window","mouseup",this.mouseUp,"unbind"),this.isDown=!1,this.moved&&(this.moved=!1,this.move(this.deltaY,this.so.newTop))}move(t,e=this.getTop()){let{properties:i}=this.props,{options:s=[],onChange:r=()=>{},stop:o,decay:n}=i;n<0&&(n=0),n>99&&(n=99),n=parseFloat(1+n/1e3),this.interval=setInterval(()=>{e+=t;let i=this.getIndexByTop(e);if(Math.abs(t)<o||i<0||i>s.length-1){clearInterval(this.interval),i<0&&(i=0),i>s.length-1&&(i=s.length-1);let a=this.getTopByIndex(i);this.setBoldStyle(i),this.setStyle({top:a,transition:"0.3s"}),r(s[i].value,i);return}t/=n,this.setStyle({top:e})},20)}componentDidUpdate(){this.setBoldStyle(this.activeIndex)}componentDidMount(){this.setBoldStyle(this.activeIndex)}render(){let{properties:t}=this.props,{attrs:e}=t,i=this.getOptions();return _jsx("div",{...e,ref:this.dom,tabIndex:0,onKeyDown:t=>this.keyDown(t),className:"aio-input-list"+(e.className?" "+e.className:""),style:{...e.style,...this.getStyle()},children:_jsx("div",{className:"aio-input-list-options",style:this.getContainerStyle(),onMouseDown:t=>this.mouseDown(t),onTouchStart:t=>this.mouseDown(t),children:i})})}}let MapContext=createContext();function Map(t){let e=AIOStorage("aio-input-storage").load({name:"mapApiKeys",def:{map:"",service:""}}),{properties:i}=t,{popup:s,mapConfig:r,onChange:o,disabled:n,attrs:a,onChangeAddress:l,value:h}=i;h||(h={lat:35.699739,lng:51.338097}),h.lat||(h.lat=35.699739),h.lng||(h.lng=51.338097);let p=!1,u=!1;return _jsx(MapUnit,{popup:s,isPopup:p,onClose:u,onChange:o,attrs:a,onChangeAddress:l,value:h,mapApiKeys:e,mapConfig:r,disabled:n})}class MapUnit extends Component{constructor(t){super(t),this.datauniqid="mp"+Math.round(1e7*Math.random()),this.markers=[],this.dom=createRef();let{mapConfig:e={}}=t,{zoom:i=14}=e;this.state={address:"",value:t.value,prevValue:t.value,zoom:i,prevZoom:i}}handleArea(){this.area&&this.area.remove();let{mapConfig:t={}}=this.props,{area:e}=t;if(e&&this.L&&this.map){let{color:i="dodgerblue",opacity:s=.1,radius:r=1e3,lat:o,lng:n}=e;this.area=this.L.circle([o,n],{color:i,fillColor:i,fillOpacity:s,radius:r}).addTo(this.map)}}ipLookUp(){$.ajax("http://ip-api.com/json").then(t=>{let{lat:e,lon:i}=t;this.flyTo(e,i,void 0,"ipLookUp")},(t,e)=>console.log("Request failed.  Returned status of",e))}handlePermission(){navigator.permissions.query({name:"geolocation"}).then(t=>{"granted"===t.state?console.log(t.state):"prompt"===t.state?console.log(t.state):"denied"===t.state&&console.log(t.state)})}async getAddress({lat:t,lng:e}){let{mapApiKeys:i}=this.props;try{let s=await Axios.get(`https://api.neshan.org/v5/reverse?lat=${t}&lng=${e}`,{headers:{"Api-Key":i.service,Authorization:!1}});return 200!==s.status?"":s.data.formatted_address}catch(r){return""}}goToCurrent(){"geolocation"in navigator?(this.handlePermission(),navigator.geolocation.getCurrentPosition(t=>{let{latitude:e,longitude:i}=t.coords;this.apis.flyTo(e,i,void 0,"goToCurrent")},t=>{this.ipLookUp()})):this.ipLookUp()}async route(t=[35.699739,51.338097],e=[35.699939,51.338497]){let{mapApiKeys:i}=this.context;try{let s;await Axios.get(`https://api.neshan.org/v4/direction?type=car&origin=${t[0]},${t[1]}&destination=${e[0]},${e[1]}`,{headers:{"Api-Key":i.service}})}catch(r){return""}}async showPath(t){let{mapApiKeys:e}=this.props;try{await Axios.post(`https://api.neshan.org/v3/map-matching?path=${t}`,{headers:{"Api-Key":e.service}})}catch(i){return""}}flyTo(t,e){let i=GetDistance(this.state.value,{lat:t,lng:e})>.3;t&&e&&this.map.flyTo([t,e],void 0,{animate:i,duration:1})}panTo(t,e){this.map.panTo({lat:t,lng:e})}async updateAddress({lat:t,lng:e}){clearTimeout(this.atimeout),this.setState({addressLoading:!0}),this.atimeout=setTimeout(async()=>{let{onChange:i=()=>{}}=this.props,s=await this.getAddress({lat:t,lng:e});this.setState({address:s,addressLoading:!1}),i({lat:t,lng:e,address:s})},500)}change({lat:t,lng:e}){let{onChange:i=()=>{}}=this.props,{address:s}=this.state;i({lat:t,lng:e,address:s}),this.updateAddress({lat:t,lng:e})}move({lat:t,lng:e}){let{mapConfig:i={}}=this.props,{marker:s=!0}=i;s&&this.marker.setLatLng({lat:t,lng:e}),clearTimeout(this.atimeout),clearTimeout(this.btimeout),this.btimeout=setTimeout(async()=>this.setState({value:{lat:t,lng:e}},()=>this.change({lat:t,lng:e})),500)}init(){let{mapApiKeys:t,onChange:e,mapConfig:i={},disabled:s,attrs:r={}}=this.props,{marker:o=!0,traffic:n=!1,zoomControl:a=!1,maptype:l="dreamy-gold",poi:h=!0}=i,{value:p,zoom:u}=this.state,d={key:t.map,maptype:l,poi:h,traffic:n,center:[p.lat,p.lng],zoom:u,dragging:!s,scrollWheelZoom:"center",zoomControl:a},c=new window.L.Map(this.dom.current,d),g=window.L,m=c;this.map=m,this.L=g,o&&m&&(this.marker=g.marker([p.lat,p.lng]).addTo(m)),m.on("click",t=>{if(!r.onClick&&e){let{lat:i,lng:s}=t.latlng;this.map.panTo({lat:i,lng:s})}}),s||m.on("move",t=>{let{lat:e,lng:i}=t.target.getCenter();this.move({lat:e,lng:i})}),this.updateAddress(p),this.handleMarkers(),this.handleArea()}componentDidMount(){if(null===document.getElementById("aio-input-map-neshan"))try{let t=document.createElement("script");t.src="https://static.neshan.org/sdk/leaflet/1.4.0/leaflet.js",t.id="aio-input-map-neshan",t.onload=()=>this.init(),document.body.appendChild(t)}catch(e){console.log(e)}else this.init()}componentDidUpdate(){let{prevValue:t,prevZoom:e}=this.state,{value:i}=this.props;JSON.stringify(t)!==JSON.stringify(i)&&setTimeout(()=>{this.flyTo(i.lat,i.lng,e,"componentDidUpdate"),this.setState({prevValue:i})},0),this.handleArea(),this.handleMarkers()}getMarkerDefaultOptions(t){let{mapConfig:e={}}=this.props,{markerOptions:i={}}=e,{size:s=20,color:r="orange",html:o,text:n=""}=i,{size:a=s,color:l=r,html:h=o,text:p=n}=t;return{size:a,color:l,html:h,text:p}}getMarker(t){let{size:e,color:i,html:s,text:r}=this.getMarkerDefaultOptions(t),o=.4*e,n,a=Math.round(e/25),l=`transform:translateY(-${e/2+o}px);flex-shrink:0;color:${i};width:${e}px;height:${e}px;border:${Math.ceil(e/10)}px solid;position:relative;border-radius:100%;display:flex;align-items:center;justify-content:center;`,h=`position:absolute;left:calc(50% - ${o}px);top:calc(100% - ${a}px);border-top:${o}px solid ${i};border-left:${o}px solid transparent;border-right:${o}px solid transparent;`,p="",u="";return s&&(p=JSXToHTML(s)),r&&(u=JSXToHTML(r)),`<div class='aio-input-map-marker' data-parent='${this.datauniqid}' style="${l}">${p}<div class='aio-input-map-marker-text'>${u}</div><div style="${h}"></div></div>`}handleMarkers(){let{mapConfig:t={}}=this.props,{markers:e=[]}=t;if(e&&this.map&&this.L||(e=[]),this.markers.length){for(let i=0;i<this.markers.length;i++)this.markers[i].remove();this.markers=[]}for(let s=0;s<e.length;s++){let r=e[s],{lat:o,lng:n,popup:a=()=>""}=r,l=a(r);if("string"!=typeof l)try{l=l.toString()}catch{}this.markers.push(this.L.marker([o,n],{icon:this.L.divIcon({html:this.getMarker(r)})}).addTo(this.map).bindPopup(l))}}getContext(){let{mapApiKeys:t}=this.props;return{mapApiKeys:t,rootProps:{...this.props},rootState:{...this.state},flyTo:this.flyTo.bind(this),goToCurrent:this.goToCurrent.bind(this)}}renderPopup(){let{showPopup:t}=this.state;if(t){let{popup:e}=this.props,{attrs:i={}}=e,{value:s}=this.state;!0===e&&(e={});let r;return _jsx(MapUnit,{...{...this.props,...e,value:s,mapConfig:{...e.mapConfig},isPopup:!0,popup:!1,onClose:()=>this.setState({showPopup:!1}),attrs:{...i,style:{width:"100%",height:"100%",top:0,position:"fixed",left:0,zIndex:1e6,...i.style},onClick:void 0},onChange:t=>{this.move(t)}}})}return null}render(){let{attrs:t={},mapConfig:e={},popup:i,isPopup:s}=this.props;return _jsxs(_Fragment,{children:[_jsx(MapContext.Provider,{value:this.getContext(),children:_jsx(RVD,{layout:{className:"aio-input-map-container"+(!1===e.draggable?" not-draggable":""),style:t.style,onClick:()=>{i&&!s&&this.setState({showPopup:!0})},column:[{html:_jsx(MapHeader,{})},{flex:1,attrs:{ref:this.dom},html:""},{html:_jsx(MapFooter,{})}]}})}),this.renderPopup()]})}}function MapHeader(){let{rootProps:t,rootState:e,flyTo:i,goToCurrent:s,mapApiKeys:r}=useContext(MapContext),{mapConfig:o={},onClose:n}=t,{title:a,search:l}=o,[h,p]=useState(""),[u,d]=useState([]),[c,g]=useState(!1),[m,f]=useState(!1),y=_jsx(Icon,{path:mdiLoading,size:1,spin:.4}),v=_jsx(Icon,{path:mdiClose,size:.8,onClick:()=>f(!1)}),x=_jsx(Icon,{path:mdiMagnify,size:.8}),$=createRef(),b;async function _(t){let{value:i}=e,{lat:s,lng:o}=i,n=t.target.value;p(n),clearTimeout(b),b=setTimeout(async()=>{try{let t={headers:{"Api-Key":r.service,Authorization:!1}},e=`https://api.neshan.org/v1/search?term=${decodeURI(n)}&lat=${s}&lng=${o}`;g(!0);let i=await Axios.get(e,t);if(g(!1),200!==i.status)return;d(i.data.items)}catch(a){}},1e3)}function S(){return _jsx("input",{ref:$,value:h,className:"aio-input-map-serach-input",type:"text",placeholder:"جستجو",onChange:_,onClick:()=>f(!0)})}function w(){let t=!!m&&!!u.length;return{flex:1,row:[{align:"h",flex:1,html:S()},{show:!!c,align:"vh",className:"aio-input-map-serach-icon",html:y},{show:t,align:"vh",className:"aio-input-map-serach-icon",html:v},{show:!t&&!c,align:"vh",className:"aio-input-map-serach-icon",html:x}]}}function C(){return!!l&&{className:"aio-input-map-search",row:[N(),w()]}}function P(){return!!u&&!!u.length&&!!m&&{className:"aio-input-map-serach-results",column:u.map(({title:t,address:e,location:s})=>({onClick(){f(!1),i(s.y,s.x,void 0,"result_layout")},className:"aio-input-map-search-result",column:[{html:t,className:"aio-input-map-serach-result-text",align:"v"},{html:e,className:"aio-input-map-serach-result-subtext",align:"v",style:{opacity:.5}}]}))}}function T(){return("string"==typeof a||!!n)&&{row:[{show:!!n,align:"vh",html:_jsx(Icon,{path:mdiChevronRight,size:1}),className:"aio-input-map-close",onClick:()=>n()},{show:"string"==typeof a,html:a,className:"aio-input-map-title",align:"v"}]}}function N(){return{className:"aio-input-map-current-point",html:_jsx(Icon,{path:mdiCrosshairsGps,size:.8,onClick:()=>s()}),align:"vh"}}return l||a||n?_jsx(RVD,{layout:{className:"aio-input-map-header of-visible"+(u&&u.length&&m?" aio-input-map-header-open":""),column:[T(),C(),P()]}}):null}function MapFooter(){let{rootProps:t,rootState:e}=useContext(MapContext),{value:i}=e,{lat:s,lng:r}=i,{onClose:o,onChange:n}=t;function a(){return!!t.isPopup&&{html:_jsx("button",{className:"aio-input-map-submit",async onClick(){n(e.value),o()},children:"تایید موقعیت"})}}function l(){let{mapConfig:i={}}=t;return!1!==i.showAddress&&(e.addressLoading?{flex:1,html:_jsx(Icon,{path:mdiLoading,size:1,spin:.4}),align:"v"}:{flex:1,column:[{html:e.address,className:"aio-input-map-address"},{show:!!s&&!!r,html:()=>`${s} - ${r}`,className:"aio-input-map-coords"}]})}let h=a(),p=l();return h||p?_jsx(RVD,{layout:{className:"aio-input-map-footer",row:[p,h]}}):null}function AIOSwip({dom:t,start:e=()=>{},move:i=()=>{},end:s=()=>{},speedX:r=1,speedY:o=1,stepX:n=1,stepY:a=1,id:l,reverseY:h,reverseX:p,minY:u,maxY:d,minX:c,maxX:g}){let m={timeout:void 0,count:0,getDom:()=>t(),getClient:t=>"ontouchstart"in document.documentElement?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY},eventHandler(t,e,i,s="bind"){var r={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"};e="ontouchstart"in document.documentElement?r[e]:e;var o="string"==typeof t?"window"===t?$(window):$(t):t;o.unbind(e,i),"bind"===s&&o.bind(e,i)},init(){if(m.count++,m.count>10){clearTimeout(m.timeout);return}t().length?(clearTimeout(m.timeout),this.eventHandler(m.getDom(),"mousedown",$.proxy(this.mouseDown,this))):m.timeout=setTimeout(()=>m.init(),400)},getPercentByValue:(t,e,i)=>100*(t-e)/(i-e),getMousePosition(t){let e=this.getClient(t),i=e.x-this.left,s=e.y-this.top,r=this.getPercentByValue(i,0,this.width),o=this.getPercentByValue(s,0,this.height);return{xp:r,yp:o,clientX:e.x,clientY:e.y,x:i,y:s}},mouseDown(t){let i=m.getDom(),s=i.offset();this.width=i.width(),this.height=i.height(),this.left=s.left,this.top=s.top;let r=this.getMousePosition(t);this.so={client:{x:r.clientX,y:r.clientY}};let o=e({mousePosition:{...r},id:l});if(!Array.isArray(o))return;let n=o[0],a=o[1];this.so.x=n,this.so.y=a,this.eventHandler("window","mousemove",$.proxy(this.mouseMove,this)),this.eventHandler("window","mouseup",$.proxy(this.mouseUp,this))},mouseMove(t){let e=this.getClient(t),s=e.x-this.so.client.x,m=e.y-this.so.client.y;if(s=Math.round(s*r)*(p?-1:1),m=Math.round(m*o)*(h?-1:1),s=Math.floor(s/n)*n,m=Math.floor(m/a)*a,s===this.dx&&m===this.dy)return;this.dx=s,this.dy=m;let f=Math.round(Math.sqrt(Math.pow(s,2)+Math.pow(m,2)));this.dist=f;let y,v;void 0!==this.so.x&&void 0!==this.so.y&&(y=this.so.x+s,v=this.so.y+m,void 0!==c&&y<c&&(y=c),void 0!==g&&y>g&&(y=g),void 0!==u&&v<u&&(v=u),void 0!==d&&v>d&&(v=d)),i({dx:s,dy:m,dist:f,x:y,y:v,id:l,mousePosition:{...this.getMousePosition(t)},e:t})},mouseUp(t){this.eventHandler("window","mousemove",this.mouseMove,"unbind"),this.eventHandler("window","mouseup",this.mouseUp,"unbind"),s({dx:this.dx,dy:this.dy,dist:this.dist,id:l,e:t})}};m.init()}function AIOInputSearch(t,e,i=t=>t){if(!e)return t;function s(t,e){for(let i=0;i<t.length;i++)if(-1===e.indexOf(t[i]))return!1;return!0}let r=e.split(" ");return t.filter((t,e)=>s(r,i(t,e)))}function ExportToExcel(t,e={}){let{promptText:i="Inter Excel File Name"}=e;return({fixPersianAndArabicNumbers(t){if("string"!=typeof t)return t;let e=[/۰/g,/۱/g,/۲/g,/۳/g,/۴/g,/۵/g,/۶/g,/۷/g,/۸/g,/۹/g],i=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];for(var s=0;s<10;s++)t=t.replace(e[s],s).replace(i[s],s);return t},getJSON(t){let e=[];for(let i=0;i<t.length;i++){let s=t[i],r={};for(let o in s)r[o]=this.fixPersianAndArabicNumbers(s[o]);e.push(r)}return e},export(){let e=window.prompt(i);if(e&&null!==e&&e.length){var s=this.getJSON(t),r="object"!=typeof s?JSON.parse(s):s,o="";o+="\r\n\n";{let n="";for(let a in r[0])n+=a+",";o+=(n=n.slice(0,-1))+"\r\n"}for(var l=0;l<r.length;l++){let h="";for(let p in r[l])h+='"'+r[l][p]+'",';h.slice(0,h.length-1),o+=h+"\r\n"}if(""===o){alert("Invalid data");return}var u,d=e.replace(/ /g,"_"),c="data:text/csv;charset=utf-8,"+encodeURIComponent("\uFEFF"+o),g=document.createElement("a");g.href=c,g.style="visibility:hidden",g.download=d+".csv",document.body.appendChild(g),g.click(),document.body.removeChild(g)}}}).export()}async function DownloadUrl(t,e){fetch(t,{mode:"no-cors"}).then(t=>t.blob()).then(t=>{let i=window.URL.createObjectURL(t),s=document.createElement("a");s.style.display="none",s.href=i,s.download=e,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(i)}).catch(()=>alert("oh no!"))}function JSXToHTML(t){return ReactDOMServer.renderToStaticMarkup(t)}function GetDistance(t,e){let{lat:i,lng:s}=t,{lat:r,lng:o}=e,n=Math.PI/180;return 6371*Math.acos(Math.sin(r*n)*Math.sin(i*n)+Math.cos(r*n)*Math.cos(i*n)*Math.cos(o*n-s*n))}_defineProperty(MapUnit,"contextType",AICTX);export function Acardion(t={}){let{items:e,singleOpen:i}=t,[s,r]=useState({});function o(t){let e=!!s[t];i?r(e?{}:{[t]:!0}):r({...s,[t]:!s[t]})}function n(t){let{id:e}=t,i=!!s[e];return{className:"aio-input-acardion-item",column:[a(t,i),l(t,i)]}}function a(t,e){let{name:i,after:s,id:r,headerAttrs:n={}}=t,a="aio-input-acardion-header";return e&&(a+=" open"),n.className&&(a+=" "+n.className),{className:"aio-input-acardion-header"+(e?" open":""),align:"v",row:[{html:_jsx(Icon,{path:e?mdiChevronDown:mdiChevronLeft,size:.8}),className:"aio-input-acardion-toggle",align:"vh",onClick:()=>o(r)},{html:i,flex:1,className:"aio-input-acardion-name"},{show:!!s,html:()=>"function"==typeof s?s(e):s,align:"vh",className:"aio-input-acardion-after"}]}}function l(t,e){let{content:i,contentAttrs:s={}}=t;return!!e&&{style:s.style,className:"aio-input-acardion-content"+(s.className?" "+s.className:""),html:i()}}return _jsx(RVD,{layout:{className:"aio-input-acardion",column:e.map(t=>n(t))}})}export function Tree(t={}){let{getText:e,getBefore:i,getOptions:s,getSubtext:r,onAdd:o,onRemove:n,data:a,indent:l=12,getOptionBefore:h,onChange:p}=t,[u,d]=useState({});function c(){return g([...a],0,void 0)}function g(t,e,i){return t.map((t,s)=>{let r=t.childs||[];return{style:{paddingRight:e*l},column:[v(t,i),{show:!!r.length&&!1!==u[t.id],column:g(r,e+1,t)}]}})}async function m(t){let e=await o(t);e&&(t?(t.childs=t.childs||[],t.childs.push(e)):a.push(e),p(a))}async function f(t,e){await n(t,e)&&(e?e.childs=e.childs.filter(e=>e.id!==t.id):a=a.filter(e=>e.id!==t.id),p(a))}function y(t,e){let i=[];o&&i.push({text:"افزودن",value:"add",before:h?h("add"):void 0,onClick:()=>m(t)});let r=s?s(t):[];for(let a=0;a<r.length;a++){let{text:l,value:p,onClick:u}=r[a];i.push({text:l,value:p,before:h?h(p):void 0,onClick:u})}return n&&i.push({text:"حذف",value:"remove",before:h?h("remove"):void 0,onClick:()=>f(t,e)}),i}function v(t,s){let o=t.childs.length?_jsx(Icon,{path:!1===u[t.id]?mdiChevronLeft:mdiChevronDown,size:1}):"",n=()=>{let e=y(t,s);return!!e.length&&_jsx(AIOInput,{type:"select",caret:!1,style:{background:"none"},options:e,text:_jsx(Icon,{path:mdiDotsHorizontal,size:.8})},t.id)},a=i?i(t,s):void 0,l=r?r(t,s):void 0,h=e?e(t,s):void 0,p=n();return{className:"aio-input-tree-row",row:[{className:"aio-input-tree-toggle",align:"vh",html:o,onClick:()=>d({...u,[t.id]:void 0!==u[t.id]&&!u[t.id]})},{className:"aio-input-tree-before",show:!!a,align:"vh",html:a},{flex:1,className:"aio-input-tree-texts",align:"v",column:[{align:"v",html:h,className:"aio-input-tree-text"},{show:!!l,align:"v",html:l,className:"aio-input-tree-subtext"}]},{show:!!p,html:()=>p,align:"vh",className:"aio-input-tree-options"}]}}function x(){return!!o&&{className:"aio-input-tree-header",align:"v",html:()=>_jsxs("button",{onClick:()=>m(),children:[_jsx(Icon,{path:mdiPlusThick,size:.8}),"افزودن"]})}}function $(){return{className:"aio-input-tree-body",column:c()}}return _jsx(RVD,{layout:{className:"aio-input-tree",column:[x(),$()]}})}export function AIOValidation(t){let e={translate(e){if(!e)return e;let{lang:i}=t,s={"should be contain":"باید شامل","should be before":"باید قبل از","cannot be after":"نمی تواند بعد از","should be after":"باید بعد از","cannot be before":"نمی تواند قبل از","should not be contain":"نمی تواند شامل","should be less than":"باید کمتر از","should be more than":"باید بیشتر از","could not be more than":"نباید بزرگ تر از","could not be less than":"نباید کوچک تر از","character(s)":"کاراکتر","item(s)":"مورد","should be equal":"باید برابر","cannot be equal":"نمی تواند برابر"};return"fa"===i?s[e]:e},getMessage(e,{be:i,validation:s,unit:r=""}){let{title:o=t.title,target:n=e,message:a}=s[2]||{};return a||`${o} ${this.translate(i)} ${JSON.stringify(n)} ${r}`+("fa"===t.lang?" باشد":"")},contain(t,e,i){let s={be:"should be contain",validation:e};if("number"===t){if(!/\d/.test(i))return this.getMessage("number",s)}else if("letter"===t){if(!/[a-zA-Z]/.test(i))return this.getMessage("letter",s)}else if("uppercase"===t){if(!/[A-Z]/.test(i))return this.getMessage("uppercase",s)}else if("lowercase"===t){if(!/[a-z]/.test(i))return this.getMessage("lowercase",s)}else if("symbol"===t){if(!/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(i))return this.getMessage("symbol",s)}else if("function"==typeof t.test){if(!t.test(i))return this.getMessage(t.toString(),s)}else if(-1===i.indexOf(t)&&void 0!==t)return this.getMessage(t,s)},notContain(t,e,i){let s={be:"should not be contain",validation:e};if("number"===t){if(/\d/.test(i))return this.getMessage("number",s)}else if("letter"===t){if(/[a-zA-Z]/.test(i))return this.getMessage("letter",s)}else if("uppercase"===t){if(/[A-Z]/.test(i))return this.getMessage("uppercase",s)}else if("lowercase"===t){if(/[a-z]/.test(i))return this.getMessage("lowercase",s)}else if("symbol"===t){if(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(i))return this.getMessage("symbol",s)}else if("function"==typeof t.test){if(t.test(i))return this.getMessage(t.toString(),s)}else if(-1!==i.indexOf(t))return this.getMessage(t,s)},length(t,e,i,s,r){if(r||i&&i.length!==t)return this.getMessage(t,{validation:e,be:"should be contain",unit:s})},notLength(t,e,i,s,r){if(r||i&&i.length===t)return this.getMessage(t,{validation:e,be:"should not be contain",unit:s})},lengthLess(t,e,i,s,r){if(r||i&&i.length>=t)return this.getMessage(t,{validation:e,be:"should be less than",unit:s})},lengthLessEqual(t,e,i,s,r){if(r||i&&i.length>t)return this.getMessage(t,{validation:e,be:"could not be more than",unit:s})},lengthMore(t,e,i,s,r){if(r||i&&i.length<=t)return this.getMessage(t,{validation:e,be:"should be more than",unit:s})},lengthMoreEqual(t,e,i,s,r){if(r||i&&i.length<t)return this.getMessage(t,{validation:e,be:"could not be less than",unit:s})},equal(t,e,i,s,r){if(r&&this.getMessage(t,{validation:e,be:"should be equal"}),JSON.stringify(i)!==JSON.stringify(t))return this.getMessage(t,{validation:e,be:"should be equal"})},not(t,e,i,s,r){if(r||JSON.stringify(i)===JSON.stringify(t))return this.getMessage(t,{validation:e,be:"cannot be equal"})},dateLess(t,e,i,s,r){if(r||AIODate().isGreater(i,t)||AIODate().isEqual(i,t))return this.getMessage(t,{validation:e,be:"should be before"})},dateLessEqual(t,e,i,s,r){if(r||AIODate().isGreater(i,t))return this.getMessage(t,{validation:e,be:"cannot be after"})},dateMore(t,e,i,s,r){if(r||AIODate().isLess(i,t)||AIODate().isEqual(i,t))return this.getMessage(t,{validation:e,be:"should be after"})},dateMoreEqual(t,e,i,s,r){if(r&&this.getMessage(t,{validation:e,be:"cannot be before"}),AIODate().isLess(i,t))return this.getMessage(t,{validation:e,be:"cannot be before"})},less(t,e,i,s,r){if(r||"number"==typeof i&&"number"==typeof t&&i>=t)return this.getMessage(t,{validation:e,be:"should be less than"})},lessEqual(t,e,i,s,r){if(r||"number"==typeof i&&"number"==typeof t&&i>t)return this.getMessage(t,{validation:e,be:"could not be more than"})},more(t,e,i,s,r){if(r||"number"==typeof i&&"number"==typeof t&&i<=t)return this.getMessage(t,{validation:e,be:"should be more than"})},moreEqual(t,e,i,s,r){if(r||"number"==typeof i&&"number"==typeof t&&i<t)return this.getMessage(t,{validation:e,be:"could not be less than"})},getResult(t,e,i,s,r){if(Array.isArray(e=Array.isArray(e)?e:[e])){let o=[],n=[];for(let a=0;a<e.length;a++)this[t](e[a],i,s,r)?n.push(e[a]):o.push(e[a]);if(o.length)return;return this[t](n.join(" or "),i,s,r,!0)}{let l=this[t](e,i,s,r);if(l)return l}},getValidation(){let{lang:e="en",value:i,validations:s=[]}=t,r="";Array.isArray(i)?r=this.translate("item(s)"):"string"==typeof i&&(r=this.translate("character(s)"));for(let o=0;o<s.length;o++){let[n,a,l={}]=s[o],h;if("function"===n)h=a(i);else if("required"===n){if(null==i||""===i||!1===i||0===i.length){let{title:p=t.title}=l;if("en"===e)return`${p} is required`;if("fa"===e)return`وارد کردن ${p} ضروری است`}}else"contain"===n?h=this.getResult("contain",a,s[o],i):"!contain"===n?h=this.getResult("notContain",a,s[o],i):"length"===n?h=this.getResult("length",a,s[o],i,r):"!length"===n?h=this.getResult("notLength",a,s[o],i,r):"length<"===n?h=this.getResult("lengthLess",a,s[o],i,r):"length<="===n?h=this.getResult("lengthLessEqual",a,s[o],i,r):"length>"===n?h=this.getResult("lengthMore",a,s[o],i,r):"length>="===n?h=this.getResult("lengthMoreEqual",a,s[o],i,r):"="===n?h=this.getResult("equal",a,s[o],i):"!="===n?h=this.getResult("not",a,s[o],i):"<"===n?h=this.getResult("less",a,s[o],i):"<="===n?h=this.getResult("lessEqual",a,s[o],i):">"===n?h=this.getResult("more",a,s[o],i):">="===n?h=this.getResult("moreEqual",a,s[o],i):"date<"===n?h=this.getResult("dateLess",a,s[o],i):"date<="===n?h=this.getResult("dateLessEqual",a,s[o],i):"date>"===n?h=this.getResult("dateMore",a,s[o],i):"date>="===n&&(h=this.getResult("dateMoreEqual",a,s[o],i));if(h)return h}return""}};t.translate=t.translate||function(t){return t},t.lang=t.lang||"en";let i;try{i=e.getValidation()}catch{i=""}return i}export function AIOInputSetStorage(t,e){AIOStorage("aio-input-storage").save({name:t,value:e})}export function getFormInputs(t,e){function i(t){return"string"==typeof t?getFormInput(t,e):t}return t.map(t=>Array.isArray(t)?{row:t.map(t=>i(t))}:i(t))}export function getFormInput(Field,path){function getOptions(field,path){return({militaryservice:()=>["مشمول","معاف","پایان خدمت"],gender:()=>["مرد","زن"],married:()=>["مجرد","متاهل"],state:()=>Object.keys(getCities()),city:()=>value=>{let state;try{eval(`state = value${path?"."+path:""}.state`)}catch{}return state?getCities()[state]:[]}})[field]()}function getField(t){return`value${path?`.${path}`:""}.${t}`}function getBase(t){let e=t.split("_");if(e.length>=3){let i={};if(e[3])try{i=JSON.parse(e[3])}catch{}return{field:e[0],input:{type:e[1],...i},label:e[2],extra:{}}}let{input:s,label:r,extra:o={}}={fullname:{input:{type:"text"},label:"نام و نام خانوادگی"},firstname:{input:{type:"text"},label:"نام"},lastname:{input:{type:"text"},label:"نام خانوادگی"},username:{input:{type:"text"},label:"نام کاربری"},address:{input:{type:"textarea"},label:"آدرس"},email:{input:{type:"text"},label:"ایمیل"},father:{input:{type:"text"},label:"نام پدر"},phone:{input:{type:"text",maxLength:11,justNumber:!0},label:"شماره تلفن"},mobile:{input:{type:"text",maxLength:11,justNumber:!0},label:"شماره همراه"},postal:{input:{type:"text",justNumber:!0},label:"کد پستی"},nationalcode:{input:{type:"text",maxLength:10,justNumber:!0},label:"کد ملی"},idnumber:{input:{type:"text"},label:"شماره شناسنامه"},cardbank:{input:{type:"text",justNumber:!0,maxLength:16},label:"شماره کارت"},state:{input:{type:"select"},label:"استان"},city:{input:{type:"select"},label:"شهر"},gender:{input:{type:"radio"},label:"جنسیت"},married:{input:{type:"radio"},label:"وضعیت تاهل"},password:{input:{type:"password"},label:"رمز عبور"},repassword:{input:{type:"password"},label:"تکرار رمز عبور",extra:{validations:[["=",getField("password"),{message:"تکرار رمز صحیح نیست"}]]}},militaryservice:{input:{type:"radio"},label:"وضعیت خدمت"},location:{input:{type:"map",mapConfig:{draggable:!1,zoomable:!1,showAddress:!1},popup:{mapConfig:{search:!0,title:"ثبت موقعیت جغرافیایی",zoomable:!0,draggable:!0}},style:{height:90,minHeight:90}},label:"موقعیت جغرافیایی",extra:{addressField:getField("address")}}}[t];return{input:s,label:r,extra:o,field:t}}let required=!1;0===Field.indexOf("*")&&(Field=Field.slice(1,Field.length),required=!0);let{input,label,extra,field}=getBase(Field),inputProps={...input};return -1!==["select","radio"].indexOf(input.type)&&(inputProps={...inputProps,optionText:"option",optionValue:"option",options:getOptions(field,path)}),-1!==["select"].indexOf(input.type)&&(inputProps={...inputProps,popover:{fitHorizontal:!0}}),{field:`value${path?`.${path}`:""}.${field}`,validations:required?[["required"]]:void 0,label,input:inputProps,...extra}}function getCities(){return{"آذربایجان شرقی":["اسکو","اهر","ایلخچی","آبش احمد","آذرشهر","آقکند","باسمنج","بخشایش","بستان آباد","بناب","بناب جدید","تبریز","ترک","ترکمانچای","تسوج","تیکمه داش","جلفا","خاروانا","خامنه","خراجو","خسروشهر","خضرلو","خمارلو","خواجه","دوزدوزان","زرنق","زنوز","سراب","سردرود","سهند","سیس","سیه رود","شبستر","شربیان","شرفخانه","شندآباد","صوفیان","عجب شیر","قره آغاج","کشکسرای","کلوانق","کلیبر","کوزه کنان","گوگان","لیلان","مراغه","مرند","ملکان","ملک کیان","ممقان","مهربان","میانه","نظرکهریزی","هادی شهر","هرگلان","هریس","هشترود","هوراند","وایقان","ورزقان","یامچی"],"آذربایجان غربی":["ارومیه","اشنویه","ایواوغلی","آواجیق","باروق","بازرگان","بوکان","پلدشت","پیرانشهر","تازه شهر","تکاب","چهاربرج","خوی","دیزج دیز","ربط","سردشت","سرو","سلماس","سیلوانه","سیمینه","سیه چشمه","شاهین دژ","شوط","فیرورق","قره ضیاءالدین","قطور","قوشچی","کشاورز","گردکشانه","ماکو","محمدیار","محمودآباد","مهاباد","میاندوآب","میرآباد","نالوس","نقده","نوشین"],اردبیل:["اردبیل","اصلاندوز","آبی بیگلو","بیله سوار","پارس آباد","تازه کند","تازه کندانگوت","جعفرآباد","خلخال","رضی","سرعین","عنبران","فخرآباد","کلور","کوراییم","گرمی","گیوی","لاهرود","مشگین شهر","نمین","نیر","هشتجین","هیر"],اصفهان:["ابریشم","ابوزیدآباد","اردستان","اژیه","اصفهان","افوس","انارک","ایمانشهر","آران وبیدگل","بادرود","باغ بهادران","بافران","برزک","برف انبار","بهاران شهر","بهارستان","بوئین و میاندشت","پیربکران","تودشک","تیران","جندق","جوزدان","جوشقان و کامو","چادگان","چرمهین","چمگردان","حبیب آباد","حسن آباد","حنا","خالدآباد","خمینی شهر","خوانسار","خور","خورزوق","داران","دامنه","درچه","دستگرد","دهاقان","دهق","دولت آباد","دیزیچه","رزوه","رضوانشهر","زاینده رود","زرین شهر","زواره","زیباشهر","سده لنجان","سفیدشهر","سگزی","سمیرم","شاهین شهر","شهرضا","طالخونچه","عسگران","علویجه","فرخی","فریدونشهر","فلاورجان","فولادشهر","قمصر","قهجاورستان","قهدریجان","کاشان","کرکوند","کلیشاد و سودرجان","کمشچه","کمه","کهریزسنگ","کوشک","کوهپایه","گرگاب","گزبرخوار","گلپایگان","گلدشت","گلشهر","گوگد","لای بید","مبارکه","مجلسی","محمدآباد","مشکات","منظریه","مهاباد","میمه","نائین","نجف آباد","نصرآباد","نطنز","نوش آباد","نیاسر","نیک آباد","هرند","ورزنه","ورنامخواست","وزوان","ونک"],البرز:["اسارا","اشتهارد","تنکمان","تهران دشت","چهارباغ","ساوجبلاغ","سعید آباد","شهر جدید هشتگرد","طالقان","فردیس","کرج","کردان","کمال شهر","کوهسار","گرمدره","گلبهار","ماهدشت","محمدشهر","مشکین دشت","نظرآباد","هشتگرد"],ایلام:["ارکواز","ایلام","ایوان","آبدانان","آسمان آباد","بدره","پهله","توحید","چوار","دره شهر","دلگشا","دهلران","زرنه","سراب باغ","سرابله","صالح آباد","لومار","مهران","مورموری","موسیان","میمه"],بوشهر:["امام حسن","انارستان","اهرم","آب پخش","آبدان","برازجان","بردخون","بندردیر","بندردیلم","بندرریگ","بندرکنگان","بندرگناوه","بنک","بوشهر","تنگ ارم","جم","چغادک","خارک","خورموج","دالکی","دلوار","ریز","سعدآباد","سیراف","شبانکاره","شنبه","عسلویه","کاکی","کلمه","نخل تقی","وحدتیه"],تهران:["ارجمند","اسلامشهر","اندیشه","آبسرد","آبعلی","باغستان","باقرشهر","بومهن","پاکدشت","پردیس","پرند","پیشوا","تهران","جوادآباد","چهاردانگه","حسن آباد","دماوند","دیزین","شهر ری","رباط کریم","رودهن","شاهدشهر","شریف آباد","شمشک","شهریار","صالح آباد","صباشهر","صفادشت","فردوسیه","فشم","فیروزکوه","قدس","قرچک","قیامدشت","کهریزک","کیلان","گلستان","لواسان","مارلیک","ملارد","میگون","نسیم شهر","نصیرآباد","وحیدیه","ورامین"],"چهارمحال و بختیاری":["اردل","آلونی","باباحیدر","بروجن","بلداجی","بن","جونقان","چلگرد","سامان","سفیددشت","سودجان","سورشجان","شلمزار","شهرکرد","طاقانک","فارسان","فرادنبه","فرخ شهر","کیان","گندمان","گهرو","لردگان","مال خلیفه","ناغان","نافچ","نقنه","هفشجان"],"خراسان جنوبی":["ارسک","اسدیه","اسفدن","اسلامیه","آرین شهر","آیسک","بشرویه","بیرجند","حاجی آباد","خضری دشت بیاض","خوسف","زهان","سرایان","سربیشه","سه قلعه","شوسف","طبس ","فردوس","قاین","قهستان","محمدشهر","مود","نهبندان","نیمبلوک"],"خراسان رضوی":["احمدآباد صولت","انابد","باجگیران","باخرز","بار","بایگ","بجستان","بردسکن","بیدخت","بینالود","تایباد","تربت جام","تربت حیدریه","جغتای","جنگل","چاپشلو","چکنه","چناران","خرو","خلیل آباد","خواف","داورزن","درگز","در رود","دولت آباد","رباط سنگ","رشتخوار","رضویه","روداب","ریوش","سبزوار","سرخس","سفیدسنگ","سلامی","سلطان آباد","سنگان","شادمهر","شاندیز","ششتمد","شهرآباد","شهرزو","صالح آباد","طرقبه","عشق آباد","فرهادگرد","فریمان","فیروزه","فیض آباد","قاسم آباد","قدمگاه","قلندرآباد","قوچان","کاخک","کاریز","کاشمر","کدکن","کلات","کندر","گلمکان","گناباد","لطف آباد","مزدآوند","مشهد","ملک آباد","نشتیفان","نصرآباد","نقاب","نوخندان","نیشابور","نیل شهر","همت آباد","یونسی"],"خراسان شمالی":["اسفراین","ایور","آشخانه","بجنورد","پیش قلعه","تیتکانلو","جاجرم","حصارگرمخان","درق","راز","سنخواست","شوقان","شیروان","صفی آباد","فاروج","قاضی","گرمه","لوجلی"],خوزستان:["اروندکنار","الوان","امیدیه","اندیمشک","اهواز","ایذه","آبادان","آغاجاری","باغ ملک","بستان","بندرامام خمینی","بندرماهشهر","بهبهان","ترکالکی","جایزان","چمران","چویبده","حر","حسینیه","حمزه","حمیدیه","خرمشهر","دارخوین","دزآب","دزفول","دهدز","رامشیر","رامهرمز","رفیع","زهره","سالند","سردشت","سوسنگرد","شادگان","شاوور","شرافت","شوش","شوشتر","شیبان","صالح شهر","صفی آباد","صیدون","قلعه تل","قلعه خواجه","گتوند","لالی","مسجدسلیمان","ملاثانی","میانرود","مینوشهر","هفتگل","هندیجان","هویزه","ویس"],زنجان:["ابهر","ارمغان خانه","آب بر","چورزق","حلب","خرمدره","دندی","زرین آباد","زرین رود","زنجان","سجاس","سلطانیه","سهرورد","صائین قلعه","قیدار","گرماب","ماه نشان","هیدج"],سمنان:["امیریه","ایوانکی","آرادان","بسطام","بیارجمند","دامغان","درجزین","دیباج","سرخه","سمنان","شاهرود","شهمیرزاد","کلاته خیج","گرمسار","مجن","مهدی شهر","میامی"],"سیستان و بلوچستان":["ادیمی","اسپکه","ایرانشهر","بزمان","بمپور","بنت","بنجار","پیشین","جالق","چابهار","خاش","دوست محمد","راسک","زابل","زابلی","زاهدان","زهک","سراوان","سرباز","سوران","سیرکان","علی اکبر","فنوج","قصرقند","کنارک","گشت","گلمورتی","محمدان","محمدآباد","محمدی","میرجاوه","نصرت آباد","نگور","نوک آباد","نیک شهر","هیدوچ"],فارس:["اردکان","ارسنجان","استهبان","اشکنان","افزر","اقلید","امام شهر","اهل","اوز","ایج","ایزدخواست","آباده","آباده طشک","باب انار","بالاده","بنارویه","بهمن","بوانات","بیرم","بیضا","جنت شهر","جهرم","جویم","زرین دشت","حسن آباد","خان زنیان","خاوران","خرامه","خشت","خنج","خور","داراب","داریان","دبیران","دژکرد","دهرم","دوبرجی","رامجرد","رونیز","زاهدشهر","زرقان","سده","سروستان","سعادت شهر","سورمق","سیدان","ششده","شهرپیر","شهرصدرا","شیراز","صغاد","صفاشهر","علامرودشت","فدامی","فراشبند","فسا","فیروزآباد","قائمیه","قادرآباد","قطب آباد","قطرویه","قیر","کارزین (فتح آباد)","کازرون","کامفیروز","کره ای","کنارتخته","کوار","گراش","گله دار","لار","لامرد","لپویی","لطیفی","مبارک آباددیز","مرودشت","مشکان","مصیری","مهر","میمند","نوبندگان","نوجین","نودان","نورآباد","نی ریز","وراوی"],قزوین:["ارداق","اسفرورین","اقبالیه","الوند","آبگرم","آبیک","آوج","بوئین زهرا","بیدستان","تاکستان","خاکعلی","خرمدشت","دانسفهان","رازمیان","سگزآباد","سیردان","شال","شریفیه","ضیاآباد","قزوین","کوهین","محمدیه","محمودآباد نمونه","معلم کلایه","نرجه"],قم:["جعفریه","دستجرد","سلفچگان","قم","قنوات","کهک"],کردستان:["آرمرده","بابارشانی","بانه","بلبان آباد","بوئین سفلی","بیجار","چناره","دزج","دلبران","دهگلان","دیواندره","زرینه","سروآباد","سریش آباد","سقز","سنندج","شویشه","صاحب","قروه","کامیاران","کانی دینار","کانی سور","مریوان","موچش","یاسوکند"],کرمان:["اختیارآباد","ارزوئیه","امین شهر","انار","اندوهجرد","باغین","بافت","بردسیر","بروات","بزنجان","بم","بهرمان","پاریز","جبالبارز","جوپار","جوزم","جیرفت","چترود","خاتون آباد","خانوک","خورسند","درب بهشت","دهج","رابر","راور","راین","رفسنجان","رودبار","ریحان شهر","زرند","زنگی آباد","زیدآباد","سیرجان","شهداد","شهربابک","صفائیه","عنبرآباد","فاریاب","فهرج","قلعه گنج","کاظم آباد","کرمان","کشکوئیه","کهنوج","کوهبنان","کیانشهر","گلباف","گلزار","لاله زار","ماهان","محمدآباد","محی آباد","مردهک","مس سرچشمه","منوجان","نجف شهر","نرماشیر","نظام شهر","نگار","نودژ","هجدک","یزدان شهر"],کرمانشاه:["ازگله","اسلام آباد غرب","باینگان","بیستون","پاوه","تازه آباد","جوان رود","حمیل","ماهیدشت","روانسر","سرپل ذهاب","سرمست","سطر","سنقر","سومار","شاهو","صحنه","قصرشیرین","کرمانشاه","کرندغرب","کنگاور","کوزران","گهواره","گیلانغرب","میان راهان","نودشه","نوسود","هرسین","هلشی"],"کهگیلویه و بویراحمد":["باشت","پاتاوه","چرام","چیتاب","دهدشت","دوگنبدان","دیشموک","سوق","سی سخت","قلعه رئیسی","گراب سفلی","لنده","لیکک","مادوان","مارگون","یاسوج"],گلستان:["انبارآلوم","اینچه برون","آزادشهر","آق قلا","بندرترکمن","بندرگز","جلین","خان ببین","دلند","رامیان","سرخنکلاته","سیمین شهر","علی آباد کتول","فاضل آباد","کردکوی","کلاله","گالیکش","گرگان","گمیش تپه","گنبدکاووس","مراوه","مینودشت","نگین شهر","نوده خاندوز","نوکنده"],لرستان:["ازنا","اشترینان","الشتر","الیگودرز","بروجرد","پلدختر","چالانچولان","چغلوندی","چقابل","خرم آباد","درب گنبد","دورود","زاغه","سپیددشت","سراب دوره","فیروزآباد","کونانی","کوهدشت","گراب","معمولان","مومن آباد","نورآباد","ویسیان"],گیلان:["احمدسرگوراب","اسالم","اطاقور","املش","آستارا","آستانه اشرفیه","بازار جمعه","بره سر","بندرانزلی","پره سر","پیربازار","تالش","توتکابن","جیرنده","چابکسر","چاف و چمخاله","چوبر","حویق","خشکبیجار","خمام","دیلمان","زیباکنار","رانکوه","رحیم آباد","رستم آباد","رشت","رضوانشهر","رودبار","رودبنه","رودسر","سنگر","سیاهکل","شفت","شلمان","صومعه سرا","فومن","کلاچای","کوچصفهان","کومله","کیاشهر","گوراب زرمیخ","لاهیجان","لشت نشا","لنگرود","لوشان","لولمان","لوندویل","لیسار","ماسال","ماسوله","مرجقل","منجیل","واجارگاه"],مازندران:["امیرکلا","ایزدشهر","آلاشت","آمل","بابل","بابلسر","بلده","بهشهر","بهنمیر","پل سفید","تنکابن","جویبار","چالوس","چمستان","خرم آباد","خلیل شهر","خوش رودپی","دابودشت","رامسر","رستمکلا","رویان","رینه","زرگرمحله","زیرآب","سادات شهر","ساری","سرخرود","سلمان شهر","سورک","شیرگاه","شیرود","عباس آباد","فریدونکنار","فریم","قائم شهر","کتالم","کلارآباد","کلاردشت","کله بست","کوهی خیل","کیاسر","کیاکلا","گتاب","گزنک","گلوگاه","محمودآباد","مرزن آباد","مرزیکلا","نشتارود","نکا","نور","نوشهر"],مرکزی:["اراک","آستانه","آشتیان","پرندک","تفرش","توره","جاورسیان","خشکرود","خمین","خنداب","داودآباد","دلیجان","رازقان","زاویه","ساروق","ساوه","سنجان","شازند","غرق آباد","فرمهین","قورچی باشی","کرهرود","کمیجان","مامونیه","محلات","مهاجران","میلاجرد","نراق","نوبران","نیمور","هندودر"],هرمزگان:["ابوموسی","بستک","بندرجاسک","بندرچارک","بندرخمیر","بندرعباس","بندرلنگه","بیکا","پارسیان","تخت","جناح","حاجی آباد","درگهان","دهبارز","رویدر","زیارتعلی","سردشت","سندرک","سوزا","سیریک","فارغان","فین","قشم","قلعه قاضی","کنگ","کوشکنار","کیش","گوهران","میناب","هرمز","هشتبندی"],همدان:["ازندریان","اسدآباد","برزول","بهار","تویسرکان","جورقان","جوکار","دمق","رزن","زنگنه","سامن","سرکان","شیرین سو","صالح آباد","فامنین","فرسفج","فیروزان","قروه درجزین","قهاوند","کبودر آهنگ","گل تپه","گیان","لالجین","مریانج","ملایر","نهاوند","همدان"],یزد:["ابرکوه","احمدآباد","اردکان","اشکذر","بافق","بفروئیه","بهاباد","تفت","حمیدیا","خضرآباد","دیهوک","رضوانشهر","زارچ","شاهدیه","طبس","عقدا","مروست","مهردشت","مهریز","میبد","ندوشن","نیر","هرات","یزد"]}}function getMainProperties(t,e,i){let s=e,{type:r,rtl:o}=t,n=s("value"),a=s("loading"),l=s("disabled"),h=s("className"),p=s("style"),u=s("onClick",void 0,!0),d={...s("attrs",{})},c=s("justify");h&&(d.className=h),p&&(d.style=p),u&&(d.onClick=u);let g={props:{...t},value:n,type:r,rtl:o,loading:a,disabled:a||l,attrs:d,justify:c,onChange:s("onChange",void 0,!0),text:s("text"),before:s("before"),after:s("after"),subtext:s("subtext"),label:s("label"),className:s("className"),style:s("style")};return i.hasOption&&(g={...g,options:s("options"),optionText:s("optionText"),optionValue:s("optionValue"),optionAttrs:s("optionAttrs"),optionDisabled:s("optionDisabled"),optionClassName:s("optionClassName"),optionStyle:s("optionStyle"),optionShow:s("optionShow"),optionSubtext:s("optionSubtext"),optionCheckIcon:s("optionCheckIcon"),optionBefore:s("optionBefore"),optionAfter:s("optionAfter")}),i.isDropdown&&(g={...g,caret:s("caret"),popover:s("popover")},i.hasOption&&(g={...g,optionClose:s("optionClose"),onSwap:s("onSwap")})),i.isInput&&(g={...g,inputAttrs:s("inputAttrs"),blurChange:s("blurChange"),delay:s("delay")}),i.hasPlaceholder&&(g={...g,placeholder:s("placeholder")}),i.hasMultiple&&(g={...g,multiple:s("multiple")}),i.hasSearch&&(g={...g,search:s("search")}),i.hasKeyboard&&(g={...g,maxLength:s("maxLength"),filter:s("filter"),justNumber:s("justNumber")}),"number"===r?g={...g,swip:s("swip"),spin:s("spin",!0),min:s("min"),max:s("max")}:"password"===r?g={...g,visible:s("visible")}:"checkbox"===r?g={...g,checkIcon:s("checkIcon"),checked:!!n}:"image"===r?g={...g,preview:s("preview"),width:s("width"),height:s("height")}:"map"===r?g={...g,onChangeAddress:s("onChangeAddress"),popup:s("popup"),mapConfig:s("mapConfig",{})}:"multiselect"===r?g={...g,optionTagAttrs:s("optionTagAttrs"),optionTagBefore:s("optionTagBefore"),optionTagAfter:s("optionTagAfter"),hideTags:s("hideTags")}:"datepicker"===r?g={...g,calendarType:s("calendarType","gregorian"),unit:s("unit","day"),theme:s("theme",[]),size:s("size",180),startYear:s("startYear","-10"),endYear:s("endYear","+10"),pattern:s("pattern"),dateDisabled:s("dateDisabled"),dateAttrs:s("dateAttrs"),remove:s("remove"),close:s("close")}:"time"===r?g={...g,calendarType:s("calendarType","gregorian")}:"list"===r?g={...g,size:s("size",48),width:s("width",200),decay:s("decay",8),stop:s("stop",3),count:s("count",3),move:s("move"),editable:s("editable",!0)}:"slider"===r?g={...g,showValue:s("showValue"),lineStyle:s("lineStyle"),fillStyle:s("fillStyle"),pointStyle:s("pointStyle"),valueStyle:s("valueStyle"),labelStyle:s("labelStyle"),scaleStyle:s("scaleStyle"),getPointHTML:s("getPointHTML"),getScaleHTML:s("getScaleHTML"),direction:s("direction",o?"left":"right"),scaleStep:s("scaleStep"),labelStep:s("labelStep"),editLabel:s("editLabel"),start:s("start"),step:s("step"),end:s("end"),min:s("min"),max:s("max"),labelRotate:s("labelRotate")}:"form"===r?g={...g,onClose:s("onClose"),onBack:s("onBack"),headerAttrs:s("headerAttrs",{}),subtitle:s("subtitle"),header:s("header"),footer:s("footer"),getErrors:s("getErrors"),onSubmit:s("onSubmit"),footerAttrs:s("footerAttrs",{}),closeText:s("closeText","Close"),resetText:s("resetText","Reset"),submitText:s("submitText","Submit"),reset:s("reset"),inputs:s("inputs"),inputClassName:s("inputClassName"),inputStyle:s("inputStyle",{}),labelAttrs:s("labelAttrs"),bodyAttrs:s("bodyAttrs",{}),lang:s("lang","en"),updateInput:s("updateInput",t=>t),initialDisabled:s("initialDisabled",!0)}:"table"===r&&(g={...g,columns:s("columns",[]),getValue:s("getValue",{}),rowAttrs:s("rowAttrs"),toolbar:s("toolbar"),excel:s("excel"),toolbarAttrs:s("toolbarAttrs"),paging:s("paging"),rowGap:s("rowGap"),columnGap:s("columnGap"),onAdd:s("onAdd"),onRemove:s("onRemove"),onSearch:s("onSearch"),onSwap:s("onSwap"),onChangeSort:s("onChangeSort"),headerAttrs:s("headerAttrs"),rowTemplate:s("rowTemplate"),rowsTemplate:s("rowsTemplate"),rowAfter:s("rowAfter"),rowBefore:s("rowBefore")}),{...g}}