"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AINumber=exports.AIMap=exports.AILogin=exports.AIList=exports.AIImage=exports.AIFile=exports.AIDate=exports.AIColor=exports.AICheckbox=exports.AICard=exports.AIButtons=exports.AIApp=exports.AIAcardion=void 0,exports.AIOInput_defaultProps=AIOInput_defaultProps,exports.AIOLogin_updateCatchedUser=AIOLogin_updateCatchedUser,exports.Acardion=exports.AITree=exports.AITime=exports.AITextarea=exports.AIText=exports.AITags=exports.AITabs=exports.AITable=exports.AISwitch=exports.AISpinner=exports.AISlider=exports.AISelect=exports.AIRadio=exports.AIPassword=exports.AIPanel=void 0,exports.Calendar=Calendar,exports.Code=Code,exports.default=exports.SideMenu=exports.MonthCells=exports.MonthCalendar=exports.Mask=void 0;var _react=require("react"),_jquery=_interopRequireDefault(require("jquery")),_aioPopup=_interopRequireDefault(require("aio-popup")),_prismjs=_interopRequireDefault(require("prismjs")),_aioUtils=require("aio-utils"),_leaflet=require("leaflet"),_reactLeaflet=require("react-leaflet");require("leaflet/dist/leaflet.css");var _axios=_interopRequireDefault(require("axios"));require("./index.css");var _jsxRuntime=require("react/jsx-runtime");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const AICTX=(0,_react.createContext)({}),AIOInput=e=>{let t=e.type,n=e.round,i=e.value;if("text"===t?"string"!=typeof i&&(i=""):"number"===t&&"number"!=typeof i&&(i=void 0),"spinner"===t)t="range",n&&"number"==typeof n||(n=1);else if("slider"===t)t="range",n=0;else if("range"===t)return null;let r=new _aioUtils.Storage("aio-input-storage").getModel()||{},a={...e,type:t,round:n,value:i,...r};return"text"===t&&a.fetchOptions?(0,_jsxRuntime.jsx)(SuggestionInput,{...a}):(0,_jsxRuntime.jsx)(AIOINPUT,{...a})};var _default=exports.default=AIOInput;const SuggestionInput=e=>{let[t,n]=(0,_react.useState)([]),[i,r]=(0,_react.useState)("");async function a(t){if(r(t),!t){n([]);return}let i=e.fetchOptions?await e.fetchOptions(t):[];n(i)}return(0,_jsxRuntime.jsx)(AIOInput,{...e,value:i,options:t,option:{...e.option,onClick(t){let n=GetOptionProps({rootProps:e,key:"text",optionDetails:t});a(n),e.onChange&&e.onChange(n,t.option)}},fetchOptions:void 0,onChange(t){a(t),e.onChange&&e.onChange(t)}})};function AIOINPUT(e){let[t]=(0,_react.useState)(getTypes(e)),[n]=(0,_react.useState)(new _aioUtils.AIODate),{type:i,value:r,onChange:a,attrs:s={},rtl:o}=e=getDefaultProps(e,t),[l]=(0,_react.useState)((0,_react.createRef)()),[u]=(0,_react.useState)("aiobutton"+Math.round(1e7*Math.random())),[c]=(0,_react.useState)(x),[d,$]=(0,_react.useState)();function p(){let{validations:t,lang:n="en",label:i,reportError:a=()=>{}}=e;if(!t)return;let s;a(s="function"==typeof t?t(r):new _aioUtils.Validation({value:r,title:(i||"").replace(/\*/g,""),lang:n,validations:t}).validate()),$(s)}function x(){if(!t.isDropdown)return!1;let n="aio-input-popover";return n+=` aio-input-popover-${o?"rtl":"ltr"}`,t.hasOption&&(n+=" aio-input-dropdown"),"time"===i&&(n+=" aio-input-time-popover"),t=>{let i={...e.popover||{}},{type:r,multiple:a}=e,{body:s,limitTo:o,header:l,setAttrs:c=()=>({}),position:d="popover"}=i,$=(0,_jquery.default)(t.current),p=-1!==["text","number","textarea"].indexOf(r)||"select"===r&&!!a||!!i.fitHorizontal;return{position:d,fitHorizontal:p,limitTo:o,header:l,onClose:()=>b(!1),body:e=>s?s(e):"date"===r?(0,_jsxRuntime.jsx)(Calendar,{onClose:e.close}):"time"===r?(0,_jsxRuntime.jsx)(TimePopover,{onClose:e.close}):(0,_jsxRuntime.jsx)(Options,{}),pageSelector:".aio-input-backdrop."+u,getTarget:()=>$,setAttrs(e){let t=c(e);return"modal"===e?(0,_aioUtils.AddToAttrs)(t,{className:n}):"backdrop"===e?(0,_aioUtils.AddToAttrs)(t,{className:"aio-input-backdrop "+u}):void 0}}}}(0,_react.useEffect)(()=>{p()},[e.value]);let[m]=(0,_react.useState)(f(_aioPopup.default));function f(t){return new t({rtl:e.rtl})}let[j,h]=(0,_react.useState)(!!e.open),[g,v]=(0,_react.useState)(!1);function y(e){v(void 0===e?!g:e)}let[R]=(0,_react.useState)(new _aioUtils.DragClass({callback(t,n){if("function"==typeof e.onSwap){let{fromIndex:i}=t,{options:r,toIndex:a}=n,s=R.reOrder(r,i,a);e.onSwap(s,r[i],r[a])}}}));function b(e){!!e!=!!m.getModals().length&&(h(!!e),e?m.addModal(e):(m.removeModal(),setTimeout(()=>(0,_jquery.default)(l.current).focus(),0)))}function _(t,n){"checkbox"===i?a&&a(!r,t):!1!==c?b(c(n)):"function"==typeof e.onClick?e.onClick(t):s.onClick&&s.onClick()}function C(n){let{attrs:s={},onClick:o,close:l}=n;if(o)o(n.details);else if(s.onClick)s.onClick(n);else if(a){if(t.isInput);else if("tree"===i);else if("file"===i);else if(t.isMultiple){let{multiple:u}=e,c;for(c=-1===r.indexOf(n.value)?r.concat(n.value):r.filter(e=>e!==n.value);"number"==typeof u&&c.length>u;)c=c.slice(1,c.length);a(c,n.details)}else n.value!==e.value?a(n.value,n.details):!0===e.deSelect?a(void 0,n.details):"function"==typeof e.deSelect&&e.deSelect()}l&&b(!1)}function A(){let n=[];if("date"===i){if(!e.multiple)return{optionsList:[],optionsDic:{}};n=[...e.value]}else n="function"==typeof e.options?e.options():e.options?e.options:[];return GetOptions({rootProps:e,types:t,options:n})}function k(){return{error:d,options:A(),rootProps:{...e,value:r},datauniqid:u,touch:"ontouchstart"in document.documentElement,DragOptions:R,open:j,click:_,optionClick:C,types:t,showPassword:g,setShowPassword:y,DATE:n}}function N(){let{round:t,vertical:n}=e;return t?"aio-input-range-round":n?"aio-input-range-vertical":"aio-input-range-horizontal"}let w={spinner:()=>null,slider:()=>null,acardion:()=>(0,_jsxRuntime.jsx)(Acardion,{}),tree:()=>(0,_jsxRuntime.jsx)(Tree,{}),tags:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Tags,{})}}),list:()=>(0,_jsxRuntime.jsx)(List,{}),file:()=>(0,_jsxRuntime.jsx)(File,{}),select:()=>(0,_jsxRuntime.jsx)(Select,{}),table:()=>(0,_jsxRuntime.jsx)(Table,{}),checkbox:()=>(0,_jsxRuntime.jsx)(Layout,{}),button:()=>(0,_jsxRuntime.jsx)(Layout,{}),range:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Range,{}),className:N()}}),radio:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Options,{})}}),tabs:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Options,{})}}),buttons:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Options,{})}}),date:()=>(0,_jsxRuntime.jsx)(DateInput,{}),time:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:getTimeText(e)}}),image:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Image,{})}}),text:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Input,{})}}),password:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Input,{})}}),textarea:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Input,{})}}),number:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Input,{})}}),color:()=>(0,_jsxRuntime.jsx)(Layout,{properties:{text:(0,_jsxRuntime.jsx)(Input,{})}})};return i&&w[i]?(0,_jsxRuntime.jsxs)(AICTX.Provider,{value:k(),children:[w[i](),m.render()]},u):null}function TimePopover(e){let{DATE:t,rootProps:n}=(0,_react.useContext)(AICTX),{jalali:i,onChange:r,size:a=12}=n,{onClose:s}=e,[o,l]=(0,_react.useState)(getTimeByUnit(n)),[u]=(0,_react.useState)(o.year?o.year-10:void 0),[c]=(0,_react.useState)(o.year?o.year+10:void 0);function d(e){l({...o,...e})}function $(e){return i?({year:"سال",month:"ماه",day:"روز",hour:"ساعت",minute:"دقیقه",second:"ثانیه",Submit:"ثبت",Now:"اکنون"})[e]:e}function p(e){let{year:n,month:i,day:r}=o;if("year"===e&&u&&c)return(0,_aioUtils.GetArray)(c-u+1,e=>({text:e+u,value:e+u}));if("day"===e&&r){let a=n&&i?t.getMonthDaysLength([n,i]):31;return r>a&&d({day:1}),(0,_aioUtils.GetArray)(a,e=>({text:e+1,value:e+1}))}return"month"===e?(0,_aioUtils.GetArray)(12,e=>({text:e+1,value:e+1})):(0,_aioUtils.GetArray)("hour"===e?24:60,e=>({text:e,value:e}))}function x(e){if("number"!=typeof o[e])return null;let t=p(e),n={type:"list",value:o[e],options:t,size:2.5*a,onChange:t=>d({[e]:t})};return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-time-popover-item",children:[(0,_jsxRuntime.jsx)("div",{className:"aio-input-time-popover-item-title",children:$(e)}),(0,_jsxRuntime.jsx)(AIOInput,{...n}),(0,_jsxRuntime.jsx)("div",{className:"aio-input-time-popover-highlight"})]})}function m(){r&&r(o),s()}function f(){l(getTimeByUnit(n,!0))}return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-time-popover-content aio-input-theme-bg1 aio-input-theme-color0",style:{fontSize:a},children:[(0,_jsxRuntime.jsxs)("div",{className:"aio-input-time-popover-body",children:[x("year")," ",x("month")," ",x("day")," ",x("hour")," ",x("minute")," ",x("second")]}),(0,_jsxRuntime.jsxs)("div",{className:"aio-input-time-popover-footer",children:[(0,_jsxRuntime.jsx)("button",{onClick:m,children:$("Submit")}),!1!==n.now&&(0,_jsxRuntime.jsx)("button",{onClick:()=>f(),children:$("Now")})]})]})}function Image(){let{rootProps:e}=(0,_react.useContext)(AICTX),[t]=(0,_react.useState)(new _aioPopup.default),{value:n,attrs:i,onChange:r,disabled:a,placeholder:s,preview:o,deSelect:l,imageAttrs:u={}}=e,[c,d]=(0,_react.useState)(),$=(0,_react.createRef)();function p(e,t){try{let n=new FileReader;n.onload=function(){c!==n.result&&(d(n.result),t&&t(n.result))},n.readAsDataURL(e)}catch{}}function x(e){e.stopPropagation(),e.preventDefault(),m()}function m(){t.addModal({position:"center",header:{title:"",onClose:()=>t.removeModal()},body:()=>(0,_jsxRuntime.jsx)("div",{className:"aio-input-image-preview-popup",children:(0,_jsxRuntime.jsx)("img",{src:(0,_jquery.default)($.current).attr("src"),alt:s})})})}(0,_react.useEffect)(()=>{n&&null!==n?"object"==typeof n?p(n):"string"==typeof n&&c!==n&&d(n):c!==n&&d("")});let f=c?(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)("img",{ref:$,src:c,alt:s,style:{objectFit:"contain",cursor:r?void 0:"default"},onClick:r?void 0:x,height:"100%",...u}),!!l&&(0,_jsxRuntime.jsx)("div",{onClick(e){e.stopPropagation(),e.preventDefault(),"function"==typeof l?l():r&&r("")},className:"aio-input-image-remove",children:I("mdiClose",1)}),o&&!!r&&(0,_jsxRuntime.jsx)("div",{onClick:e=>x(e),className:"aio-input-image-preview",children:I("mdiImage",1)}),t.render()]}):(0,_jsxRuntime.jsx)("span",{...i,className:"aio-input-image-placeholder",children:s||"placeholder"});if(!r)return f;let j={disabled:a,justify:!0,text:f,attrs:{style:{width:"100%",height:"100%",padding:0}},onChange:e=>p(e,e=>{r&&r(e)})};return(0,_jsxRuntime.jsx)(AIFile,{...j})}function File(){return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-file-container",children:[(0,_jsxRuntime.jsx)(Layout,{}),(0,_jsxRuntime.jsx)(FileItems,{})]})}function InputFile(){let{rootProps:e,types:t}=(0,_react.useContext)(AICTX),{value:n=[],onChange:i=()=>{},disabled:r,multiple:a,inputAttrs:s}=e;function o(e){let r=e.target.files,s;if(t.isMultiple){let o=(s=[...n]).map(({name:e})=>e);for(let l=0;l<r.length;l++){let u=r[l];-1===o.indexOf(u.name)&&s.push({name:u.name,size:u.size,file:u})}if("number"==typeof a)for(;s.length>a;)s=s.slice(1,s.length)}else s=r.length?r[0]:void 0;i(s)}let l={disabled:!0===r,type:"file",style:{display:"none"},multiple:t.isMultiple,onChange:e=>o(e),...s};return(0,_jsxRuntime.jsx)("input",{...l})}function FileItems(){let{rootProps:e}=(0,_react.useContext)(AICTX),{value:t,rtl:n}=e,i=[];if(Array.isArray(t))i=t;else{if(!t)return null;i=[t]}if(!i.length)return null;let r=i.map((e,t)=>(0,_jsxRuntime.jsx)(FileItem,{file:e,index:t},t));return(0,_jsxRuntime.jsx)("div",{className:"aio-input-files",style:{direction:n?"rtl":"ltr"},children:r})}const FileItem=e=>{let{rootProps:t,types:n}=(0,_react.useContext)(AICTX),{onChange:i=()=>{},value:r=[]}=t,{file:a,index:s}=e;function o(e){let t=e.name||"untitle",n=e.size||0,i=20;try{let r,a,s=t.lastIndexOf("."),o=t.slice(0,s),l=t.slice(s+1,t.length);r=o.length>i?o.slice(0,Math.floor(i/2))+"..."+o.slice(o.length-Math.floor(i/2),o.length)+"."+l:t;let u=n;if(!u)return{minName:r,sizeString:!1};let c=u/1073741824,d=u/1048576,$=u/1024;return a=c>=1?c.toFixed(2)+" GB":d>=1?d.toFixed(2)+" MB":$>=1?$.toFixed(2)+" KB":u+" byte",{minName:r,sizeString:a}}catch{return{minName:"untitle",sizeString:!1}}}async function l(e,n){if(e.stopPropagation(),e.preventDefault(),"function"==typeof t.onRemove){let a=await t.onRemove({row:r[n],rowIndex:n});if(!1===a)return}let s=[];for(let o=0;o<r.length;o++)o!==n&&s.push(r[o]);i(s)}function u(){(0,_aioUtils.DownloadFile)(a)}function c(){let e;return(t.preview&&(e=(0,_aioUtils.FilePreview)(a,{onClick:()=>u()})),e&&null!==e)?e:(0,_jsxRuntime.jsx)("div",{className:"aio-input-file-item-icon",onClick:()=>u(),children:I("mdiAttachment",.8)})}let{minName:d,sizeString:$}=o(a),{optionsList:p}=GetOptions({rootProps:t,types:n,options:[{minName:d,sizeString:$,index:s}],defaultOptionProps:{subtext:()=>$,text:()=>d,before:()=>c(),after:()=>(0,_jsxRuntime.jsx)("div",{className:"aio-input-file-item-icon",onClick:e=>l(e,s),children:I("mdiClose",.7)})}}),x=p[0];return(0,_jsxRuntime.jsx)(Layout,{option:x})};function Select(){let{rootProps:e,types:t,options:n}=(0,_react.useContext)(AICTX),{value:i,hideTags:r}=e,a=Array.isArray(i)?[...i]:void 0!==i?[i]:[];function s(){if(!a.length)return;let e=n.optionsDic["a"+a[0]];if(e)return e.text}return t.isMultiple?(0,_jsxRuntime.jsxs)("div",{className:"aio-input-multiselect-container",children:[(0,_jsxRuntime.jsx)(Layout,{}),!r&&!!a.length&&(0,_jsxRuntime.jsx)(Tags,{})]}):(0,_jsxRuntime.jsx)(Layout,{properties:{text:e.text||s()}})}function DateInput(){let{rootProps:e,types:t}=(0,_react.useContext)(AICTX),{value:n,hideTags:i}=e,r=Array.isArray(n)?[...n]:void 0!==n?[n]:[];function a(){let{value:t,unit:n=Def("date-unit"),text:i,pattern:r,jalali:a,placeholder:s}=e;if(t){i=void 0!==r?r:i;let o=new _aioUtils.AIODate,l=o.convertToArray(t),[u,c=1,d=1,$=0]=l;l=[u,c,d,$];let p=o.getSplitter(t),x="";if(i&&null!==i)x=i;else{let m="{}";"month"===n?m=`{year}${p}{month}`:"day"===n?m=`{year}${p}{month}${p}{day}`:"hour"===n&&(m=`{year}${p}{month}${p}{day} - {hour} : 00`),x=o.getDateByPattern(l,m)}return(0,_jsxRuntime.jsx)("div",{style:{direction:"ltr",width:"100%"},children:x})}return s||(a?"انتخاب تاریخ":"Select Date")}return t.isMultiple?(0,_jsxRuntime.jsxs)("div",{className:"aio-input-multiselect-container",children:[(0,_jsxRuntime.jsx)(Layout,{properties:{text:e.text||"Select Dates"}}),!i&&!!r.length&&(0,_jsxRuntime.jsx)(Tags,{})]}):(0,_jsxRuntime.jsx)(Layout,{properties:{text:a()}})}const Tags=()=>{let{rootProps:e,options:t}=(0,_react.useContext)(AICTX),{value:n=[],rtl:i,disabled:r,onChange:a=()=>{}}=e,s=n.map((n,i)=>{let r=t.optionsDic["a"+n];return void 0===r?null:(0,_jsxRuntime.jsx)(Tag,{onClose:()=>a(e.value.filter(e=>e!==n)),attrs:r.tagAttrs,before:r.tagBefore,after:r.tagAfter,text:r.text,disabled:r.disabled},i)});return s.length?(0,_jsxRuntime.jsx)("div",{className:`aio-input-tags-container aio-input-scroll${i?" rtl":""}${r?" disabled":""}`,children:s}):null},Tag=e=>{let{attrs:t,before:n=I("mdiCircleMedium",.7),after:i,text:r,disabled:a,onClose:s=()=>{}}=e,o=a?void 0:s,l="aio-input-tag",u=(0,_aioUtils.AddToAttrs)(t,{className:[l+" aio-input-main-bg",a?"disabled":void 0]});return(0,_jsxRuntime.jsxs)("div",{...u,children:[(0,_jsxRuntime.jsx)("div",{className:`${l}-icon`,children:n}),(0,_jsxRuntime.jsx)("div",{className:`${l}-text`,children:r}),void 0!==i&&(0,_jsxRuntime.jsx)("div",{className:`${l}-icon`,children:i}),(0,_jsxRuntime.jsx)("div",{className:`${l}-icon`,onClick:o,children:I("mdiClose",.7)})]})};function Input(){let{rootProps:e,types:t,showPassword:n,options:i}=(0,_react.useContext)(AICTX),{type:r,delay:a=500}=e,{min:s,max:o,swip:l,onChange:u,blurChange:c,maxLength:d=1/0,justNumber:$,filter:p=[],disabled:x,placeholder:m,inputAttrs:f,spin:j=!0,justify:h}=e,[g]=(0,_react.useState)((0,_react.createRef)()),[v]=(0,_react.useState)({atimeout:void 0,btimeout:void 0,clicked:!1}),[y]=(0,_react.useState)(`ac${Math.round(1e5*Math.random())}`),[R,b]=(0,_react.useState)(e.value||""),_=(0,_react.useRef)(R);function C(){"number"===r&&l&&new _aioUtils.Swip({speedY:l,reverseY:!0,minY:s,maxY:o,dom:()=>(0,_jquery.default)(g.current),start(){let e=+_.current;return[0,e=isNaN(e)?0:e]},move(e){let{y:t}=e.change||{y:0};void 0!==s&&t<s&&(t=s),void 0!==o&&t>o&&(t=o),w(t,u)}})}function A(){let t=e.value;if("number"===r){if(""===t)return;!isNaN(+t)&&(t=+t,"number"==typeof s&&t<s?t=s:"number"==typeof o&&t>o&&(t=o))}return t}function k(){clearTimeout(v.atimeout),v.atimeout=setTimeout(()=>{let e=A();e!==R&&b(e)},a)}function N(e){try{e=e.toString();let t="";for(let n=0;n<e.length;n++){let i={"۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};t+=i[e[n]]||e[n]}e=t}catch{}return e}function w(n,i){if(t.hasKeyboard&&n){if(n=N(n),("text"===r||"textarea"===r||"password"===r)&&$){let s=(n=n.toString())[n.length-1];(" "===s||isNaN(+s))&&(Array.isArray($)?-1===$.indexOf(s)&&(n=n.slice(0,n.length-1)):n=n.slice(0,n.length-1))}if(("text"===r||"textarea"===r||"password"===r)&&p.length){let o=(n=n.toString())[n.length-1];for(let l=0;l<p.length;l++){let u=p[l].toString();if("symbol"===u){if(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(o)){n=n.slice(0,n.length-1);break}}else if("number"===u){if(!isNaN(+o)){n=n.slice(0,n.length-1);break}}else if("string"===u){if(isNaN(+o)){n=n.slice(0,n.length-1);break}}else if(u===o){n=n.slice(0,n.length-1);break}}}("text"===r||"textarea"===r||"password"===r)&&n.toString().length>d&&(n=n.toString().slice(0,d));try{"number"===r&&n.toString().length>d&&(n=+n.toString().slice(0,d))}catch{}}"number"===e.type&&(n=""!==n?+n:void 0),b(n),!c&&i&&(clearTimeout(v.btimeout),v.btimeout=setTimeout(()=>i(n),a))}function T(){!1!==e.autoHighlight&&!v.clicked&&(v.clicked=!0,(0,_jquery.default)(g.current).focus().select())}function S(e){v.clicked=!1,c&&e&&e(R)}function D(){let t={...(0,_aioUtils.AddToAttrs)(f,{className:j?void 0:"no-spin",style:h?{textAlign:"center"}:void 0}),value:R,type:r,ref:g,disabled:x,placeholder:m,list:e.options?y:void 0,onClick:e=>T(),onChange:u?e=>w(e.target.value,u):void 0,onBlur:()=>S(u)};return"password"===r&&n&&(t={...t,type:"text",style:{...t.style,textAlign:"center"}}),!0===$&&(t.pattern="d*",t.inputMode="numeric"),t}_.current=R,(0,_react.useEffect)(()=>{C()},[]),(0,_react.useEffect)(()=>{k()},[e.value]);let P=D();return P.onChange?"color"===r?(0,_jsxRuntime.jsxs)("label",{style:{width:"100%",height:"100%",background:R},children:[(0,_jsxRuntime.jsx)("input",{...P,style:{opacity:0},opacity:!0,rgba:!0,cmyk:!0,hsla:!0}),!!i.optionsList.length&&(0,_jsxRuntime.jsx)("datalist",{id:y,children:i.optionsList.map(e=>(0,_jsxRuntime.jsx)("option",{value:e.value}))})]}):"textarea"===r?(0,_jsxRuntime.jsx)("textarea",{...P}):(0,_jsxRuntime.jsx)("input",{...P}):R}function Options(){let{rootProps:e,types:t,options:n}=(0,_react.useContext)(AICTX),[i,r]=(0,_react.useState)(""),[a]=(0,_react.useState)((0,_react.createRef)()),[s]=(0,_react.useState)();function o(n){return"tabs"===e.type||"buttons"===e.type||t.isInput||!e.search||""===i&&n.length<10?null:(0,_jsxRuntime.jsxs)("div",{className:"aio-input-search",children:[(0,_jsxRuntime.jsx)("input",{type:"text",value:i,placeholder:e.search,onChange:e=>r(e.target.value)}),(0,_jsxRuntime.jsx)("div",{className:"aio-input-search-icon",onClick(){r("")},children:I(i?"mdiClose":"mdiMagnify",.8)})]})}function l(e){return e.map((e,t)=>{if(i&&(void 0===e.text||""===e.text||null===e.text||-1===e.text.indexOf(i)))return null;let n={option:e,index:t,searchValue:i};return(0,_react.createElement)(Layout,{...n,key:t})})}function u(e){e.keyCode}if((0,_react.useEffect)(()=>{try{setTimeout(()=>(0,_jquery.default)(a.current).focus(),30)}catch{}},[]),!n.optionsList.length)return null;let c=l(n.optionsList),d=`aio-input-options aio-input-scroll aio-input-${e.type}-options`;return t.isDropdown&&(d+=" aio-input-dropdown-options"),(0,_jsxRuntime.jsxs)("div",{className:"aio-input-options-container",ref:a,tabIndex:0,onKeyDown:e=>u(e),children:[o(n.optionsList),(0,_jsxRuntime.jsx)("div",{className:d,children:c})]})}const Layout=e=>{let{rootProps:t,datauniqid:n,types:i,touch:r,DragOptions:a,click:s,optionClick:o,open:l,showPassword:u,setShowPassword:c,error:d}=(0,_react.useContext)(AICTX),{option:$,index:p,toggle:x,indent:m}=e,{type:f,rtl:j}=t,[h]=(0,_react.useState)((0,_react.createRef)()),[g,v]=(0,_react.useState)();function y(){let e;if(void 0!==$?(e=`aio-input-option aio-input-${f}-option`,i.isMultiple&&(e+=` aio-input-${f}-multiple-option`),i.isDropdown&&(e+=" aio-input-dropdown-option"),!0===$.details.active&&(e+=" active","tabs"===f&&(e+=" aio-input-main-color"),"buttons"===f&&(e+=" aio-input-main-bg"))):(e=`aio-input aio-input-${f}${r?" aio-input-touch":""}`,i.isInput&&(e+=" aio-input-input"),t.justify&&(e+=" aio-input-justify"),d&&(e+=" has-error"),e+=j?" aio-input-rtl":" aio-input-ltr"),m&&(e+=` aio-input-indent-${m.size}`),"tree"===f){let a=t.size||Def("tree-size");(a=12*Math.round(a/12))<24&&(a=24),a>120&&(a=120),e+=` aio-input-size-${a}`}return!0===z.disabled&&(e+=" disabled"),z.className&&(e+=" "+z.className),e+=" "+n}function R(e){let t=`aio-input-${e}`;return $?t+=` aio-input-${f}-option-${e}`:t+=` aio-input-${f}-${e}`,t}function b(){let{text:e,placeholder:t,subtext:n,justify:r}=z;if(void 0===e&&void 0!==t&&(e=(0,_jsxRuntime.jsx)("div",{className:"aio-input-placeholder",children:t})),void 0===e)return(0,_jsxRuntime.jsx)("div",{style:{flex:1}});{let a=e=>({className:`${R(e)}${r&&!i.isInput?" aio-input-value-justify":""}`});return n?(0,_jsxRuntime.jsxs)("div",{className:`aio-input-content aio-input-${f}-content${r&&!i.isInput?" aio-input-content-justify":""}`,children:[(0,_jsxRuntime.jsx)("div",{...a("value"),children:e}),(0,_jsxRuntime.jsx)("div",{...a("subtext"),children:n})]}):(0,_jsxRuntime.jsx)("div",{...a("value"),children:e})}}function _(e){let t=e.keyCode;console.log(t),13===t&&s(e,h)}function C(){return z.draggable?(0,_jsxRuntime.jsx)("svg",{viewBox:"8 4 10 13",role:"presentation",style:{width:12,height:"1.8rem"},children:(0,_jsxRuntime.jsx)("path",{d:"M9,3H11V5H9V3M13,3H15V5H13V3M9,7H11V9H9V7M13,7H15V9H13V7M9,11H11V13H9V11M13,11H15V13H13V11M9,15H11V17H9V15M13,15H15V17H13V15M9,19H11V21H9V19M13,19H15V21H13V19Z",style:{fill:"currentcolor"}})}):null}function A(){if(!i.isDropdown||$||i.isInput&&!t.options)return null;let{caret:e}=t;return!1===e?null:(0,_jsxRuntime.jsx)("div",{className:"aio-input-caret",children:void 0===e?I("mdiChevronDown",.8):e})}function k(){let{checkIcon:e,checked:n}=z;if(void 0===n)return null;let{multiple:i}=t;return Array.isArray(e)?e[n?1:0]:i||"radio"!==f?(0,_jsxRuntime.jsx)("div",{className:"aio-input-check-0 aio-input-main-color"+(n?" checked":""),style:{...e,background:"none"},children:n&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-main-bg"})}):(0,_jsxRuntime.jsx)("div",{className:"aio-input-check-out aio-input-main-color"+(n?" checked":""),style:{...e,background:"none"},children:n&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-check-in aio-input-main-bg",style:{background:e.background}})})}function N(e){let n;if("after"===e&&"password"===f&&t.preview)n=(0,_jsxRuntime.jsx)("div",{className:"aio-input-password-preview",onClick:()=>c(),children:I(u?"mdiEyeOff":"mdiEye",.8)});else{let i=z[e];n="function"==typeof i?i():i}return void 0===n?null:(0,_jsxRuntime.jsx)("div",{className:R(e),children:n})}function w(){let{loading:e}=z,t;return e?(t=!0===e?I("mdiLoading",.8,{spin:.8}):e,(0,_jsxRuntime.jsx)("div",{className:R("loading"),children:t})):null}function T(){let{attrs:n,disabled:i,draggable:r,style:u}=z,c;l&&!$&&-1!==["text","number","textarea"].indexOf(f)&&(c=1e5);let d;i||(d=void 0===$?e=>{e.stopPropagation(),s(e,h)}:t=>{t.stopPropagation(),t.preventDefault(),(e.properties||{}).onClick?e.properties.onClick():o($)}),n=(0,_aioUtils.AddToAttrs)(n,{className:y(),style:{...u,zIndex:c}});let x={tabIndex:$?void 0:1,onKeyDown:_,...n,onClick:d,ref:h,disabled:i},m="function"==typeof t.options?t.options():t.options||[];return r&&(x={...x,...a.getDragAttrs({fromIndex:p||0}),...a.getDropAttrs({options:m,toIndex:p||0})}),p&&(x["data-index"]=p),x}function S(){let n=e.properties||{},i=$||t,{draggable:r=!!$&&$.draggable}=n,{placeholder:a=$?void 0:t.placeholder}=n,{checked:s=$?$.checked:"checkbox"===f?!!t.value:void 0}=n,{disabled:o=i.disabled}=n,{text:l=i.text}=n,{subtext:u=i.subtext}=n,{justify:c=i.justify}=n,{checkIcon:d=void 0===i.checkIcon?{}:i.checkIcon}=n,{loading:p=i.loading}=n,{attrs:x=i.attrs||{}}=n,m={...i.style||{},...n.style},{before:j=i.before}=n,{after:h=i.after}=n,{footer:g=i.footer}=n,v=[i.className,n.className].filter(e=>!!e),y=v.length?v.join(" "):void 0;return{disabled:o,draggable:r,text:l,subtext:u,placeholder:a,justify:c,checked:s,checkIcon:d,loading:p,attrs:x,style:m,before:j,after:h,className:y,footer:g}}function D(e){if(void 0===x)return null;if($&&Array.isArray($.toggleIcon)){if(!1===e&&$.toggleIcon[0])return $.toggleIcon[0];if(!0===e&&$.toggleIcon[1])return $.toggleIcon[1];if(void 0===e&&$.toggleIcon[2])return $.toggleIcon[2]}let n;return n=void 0===e?"mdiCircleSmall":!0===e?"mdiChevronDown":"mdiChevronRight",(0,_jsxRuntime.jsx)("div",{style:{transform:t.rtl?"scaleX(-1)":void 0},children:I(n,1)})}function P(e){return $&&!1!==$.toggleIcon&&void 0!==x?(0,_jsxRuntime.jsxs)("div",{className:"aio-input-toggle",onClick(e){e.stopPropagation(),null==x||x.action()},children:[(0,_jsxRuntime.jsx)("div",{className:"aio-input-toggle-icon",children:D(x.state)}),!0===x.state&&(0,_jsxRuntime.jsx)("svg",{className:"aio-input-toggle-line aio-input-indent-line",children:(0,_jsxRuntime.jsx)("path",{d:`M${e.size/2} 0 L${e.size/2} ${e.height/2-12} Z`})})]}):null}function O(e,n){let{parentIndent:i,size:r,level:a,isLastChild:s,height:o}=e;if(!a)return!1;let l=r/2,u=r,c=0,d=o/2,$=o,p=[];return n===a-1?(p.push((0,_jsxRuntime.jsx)("path",{d:`M${l} ${d} L${u*(t.rtl?-1:1)} ${d} Z`},"hl"+n)),p.push((0,_jsxRuntime.jsx)("path",{d:`M${l} ${c} L${l} ${s?d:$} Z`},"vdl"+n))):i&&i.isLastChild||p.push((0,_jsxRuntime.jsx)("path",{d:`M${l} ${c} L${l} ${$} Z`},"vl"+n)),(0,_jsxRuntime.jsx)("svg",{className:"aio-input-indent-line",children:p})}function M(){if(!m)return null;let{level:e}=m;return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-indents",children:[(0,_aioUtils.GetArray)(e,e=>(0,_jsxRuntime.jsx)("div",{className:"aio-input-indent",children:O(m,e)},e)),!!x&&P(m)]})}function L(){if($)return null;let{label:e}=t;if(!e)return null;let n="aio-input-label",i="*"===e[0];i&&(n+=" aio-input-label-required");let r=i?e.slice(1,e.length):e;return(0,_jsxRuntime.jsx)("div",{className:n,children:r})}function U(){if($)return null;let e="";if(void 0!==z.footer?e=z.footer:d&&!1!==t.showErrors&&(e=d),void 0!==e)return(0,_jsxRuntime.jsx)("div",{className:"aio-input-footer",children:e})}function E(){g.start()}function G(){return g?(0,_jsxRuntime.jsx)("div",{className:"aio-input-voice",onClick:()=>E(),children:I("mdiMicrophoneOutline",.8)}):null}(0,_react.useEffect)(()=>{if(!("webkitSpeechRecognition"in window))return;let{lang:e="en",onChange:n,voice:r}=t;if(!r||!n||!i.hasKeyboard)return;let a=window.SpeechRecognition||window.webkitSpeechRecognition;if(!a)return;let s=new a;return s.lang=({en:"en-US",fa:"fa-IR"})[e],s.continuous=!0,s.interimResults=!1,s.onresult=e=>{let t=e.results[0][0].transcript;n&&n(t)},s.onerror=e=>{console.error("خطا در تشخیص گفتار: ",e.error)},s.onend=()=>{console.log("تشخیص گفتار پایان یافت.")},v(s),()=>{s.stop()}},[]);let z=S(),F=(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[M(),C(),k(),L(),N("before"),b(),N("after"),w(),G(),A()]}),H=T();return"file"===f?(0,_jsxRuntime.jsxs)("label",{...H,children:[F,(0,_jsxRuntime.jsx)(InputFile,{})]}):(0,_jsxRuntime.jsxs)("div",{...H,children:[F,!!$&&"tabs"===f&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-tabs-option-bar"}),U()]})};function List(){let{rootProps:e,options:t}=(0,_react.useContext)(AICTX),{attrs:n={},size:i=36,listOptions:r={count:3,editable:!0,stop:3,decay:8},onChange:a=()=>{}}=e,{count:s=3,editable:o=!0,stop:l=3,decay:u=8}=r,c=t.optionsList.length,[d]=(0,_react.useState)({dom:(0,_react.createRef)(),activeIndex:0,interval:void 0,moved:!1,lastY:0,deltaY:0,so:{y:0,top:0,limit:{top:0,bottom:0}}});function $(){var e=s*i;return{height:e}}function p(e){return Math.round((s*i-i-2*e)/(2*i))}function x(e){return(s-2*e-1)*i/2}function m(){return{top:x(d.activeIndex)}}function f(e){if(e.preventDefault(),!(d.activeIndex>=c-1)){d.activeIndex++;A({top:x(d.activeIndex)}),j(d.activeIndex)}}function j(e){(0,_jquery.default)(d.dom.current).find(".aio-input-list-option").removeClass("active"),(0,_jquery.default)(d.dom.current).find(".aio-input-list-option[data-index="+e+"]").addClass("active")}function h(){if(!(d.activeIndex<=0)){d.activeIndex--;A({top:x(d.activeIndex)}),j(d.activeIndex)}}function g(e){o&&(38===e.keyCode?h():40===e.keyCode&&f(e))}function v(){return{top:x(-1),bottom:x(c)}}function y(e){let t=p(e);return t<0&&(t=0),t>c-1&&(t=c-1),x(t)}function R(e){if(!o)return;(0,_aioUtils.EventHandler)("window","mousemove",C,"bind"),(0,_aioUtils.EventHandler)("window","mouseup",k,"bind"),clearInterval(d.interval),d.moved=!1;let n=(0,_aioUtils.GetClient)(e).y;A({transition:"unset"});let i=b();var r=p(i);j(r),A({top:i,transition:"unset"}),a(t.optionsList[r].value,r),d.so={y:n,top:i,limit:v()}}function b(){return y(parseInt((0,_jquery.default)(d.dom.current).find(".aio-input-list-options").css("top")))}function _(e){let{top:t,bottom:n}=d.so.limit;return e>t?t:e<n?n:e}function C(e){e.preventDefault(),e.stopPropagation(),console.log("move"),d.moved=!0;let t=(0,_aioUtils.GetClient)(e).y;var n=t-d.so.y;void 0===d.lastY&&(d.lastY=t),d.deltaY=t-d.lastY,d.lastY=t,20>Math.abs(n)&&(d.deltaY=3);var i=_(d.so.top+n);let r=p(i);d.so.newTop=i,j(r),A({top:i})}function A(e){(0,_jquery.default)(d.dom.current).find(".aio-input-list-options").css(e)}function k(){(0,_aioUtils.EventHandler)("window","mousemove",C,"unbind"),(0,_aioUtils.EventHandler)("window","mouseup",k,"unbind"),d.moved&&(d.moved=!1,N(d.deltaY,d.so.newTop))}function N(e,n=b()){u<0&&(u=0),u>99&&(u=99),u=1+u/1e3,d.interval=setInterval(()=>{let i=p(n+=e);if(j(i),Math.abs(e)<l||i<0||i>c-1){clearInterval(d.interval),i<0&&(i=0),i>c-1&&(i=c-1);let r=x(i);A({top:r,transition:"0.3s"});let s=t.optionsList[i];a(s.value,s.details);return}e/=u,A({top:n})},20)}(0,_react.useEffect)(()=>{var t;null!==(t=e.listOptions)&&void 0!==t&&t.move&&e.listOptions.move(N)},[]),(0,_react.useEffect)(()=>{j(d.activeIndex)});let w=t.optionsList.map((t,n)=>(t.value===e.value&&(d.activeIndex=n),(0,_jsxRuntime.jsx)(Layout,{option:t,index:n,properties:{style:{height:i},justify:!0}},n)));return(0,_jsxRuntime.jsx)("div",{...n,ref:d.dom,tabIndex:0,onKeyDown:e=>g(e),className:"aio-input-list"+(n.className?" "+n.className:""),style:{...n.style,...$()},children:(0,_jsxRuntime.jsx)("div",{className:"aio-input-list-options",style:m(),onMouseDown:e=>R(e),onTouchStart:e=>R(e),children:w})})}const AcardionContext=(0,_react.createContext)({}),Acardion=()=>{let{rootProps:e,options:t}=(0,_react.useContext)(AICTX),{multiple:n,vertical:i=!0,value:r}=e;function a(e){return n?-1!==(r||[]).indexOf(e):e===r}function s(){return{rootProps:e,isOpen:a}}return(0,_jsxRuntime.jsx)(AcardionContext.Provider,{value:s(),children:(0,_jsxRuntime.jsx)("div",{className:`aio-input-acardion aio-input-scroll${i?" aio-input-acardion-vertical":" aio-input-acardion-horizontal"}`,children:t.optionsList.map((e,t)=>(0,_jsxRuntime.jsx)(AcardionItem,{option:e},t))})})};exports.Acardion=Acardion;const AcardionItem=({option:e})=>{let t=!!e.details.active,[n]=(0,_react.useState)(),i=(0,_aioUtils.AddToAttrs)(e.attrs,{className:"aio-input-acardion-item"});return(0,_jsxRuntime.jsxs)("div",{...i,children:[(0,_jsxRuntime.jsx)(Layout,{option:e}),!!t&&(0,_jsxRuntime.jsx)(AcardionBody,{option:e})]})},AcardionBody=({option:e})=>{let{rootProps:t}=(0,_react.useContext)(AcardionContext),{body:n=()=>{}}=t,{html:i,attrs:r}=n(e.details)||{html:""},a=(0,_aioUtils.AddToAttrs)(r,{className:["aio-input-acardion-body"]});return(0,_jsxRuntime.jsx)("div",{...a,children:i})},TreeContext=(0,_react.createContext)({}),Tree=()=>{let{rootProps:e,types:t}=(0,_react.useContext)(AICTX),{onAdd:n,onRemove:i,value:r=[],onChange:a,size:s=Def("tree-size"),attrs:o}=e,[l,u]=(0,_react.useState)({}),[c,d]=(0,_react.useState)({}),[$]=(0,_react.useState)(m);function p(e){d({...c,[e]:!c[e]})}function x(e){u({...l,[e]:!l[e]})}function m(){let{indent:t=24}=e;return"number"!=typeof t&&(t=12),(t=6*Math.round(t/6))<0&&(t=0),t>60&&(t=60),t}function f(e){let t=!!l[e],n=300;t?(p(e),setTimeout(()=>x(e),n)):(x(e),setTimeout(()=>p(e),0))}function j(t,n){for(let i in n)t[i]=n[i];e.onChange&&e.onChange(e.value)}function h(t){let{row:n,details:i}=t,r=[];try{r=e.getChilds?e.getChilds({row:n,details:i}):n.childs||[]}catch{r=[]}return r||[]}function g(t){let{row:n,childs:i}=t;try{e.setChilds?e.setChilds(t):n.childs=i}catch{}}async function v(e){let t;if(t="function"==typeof n?await n(e):n){if(e){let i=h({row:e.parent,details:e.parentDetails});g({row:e.parent,childs:i.concat(t),details:e.parentDetails})}else r.push(t);a&&a(r)}}async function y(t){let{index:n}=t,s;if(!(s="function"!=typeof i||await i(t)))return;let o={index:n,active:!1,toggle(){}};if(t.parent){let l=h({row:t.parent,details:t.parentDetails}).filter(n=>{let i=GetOptionProps({key:"value",rootProps:e,optionDetails:{...o,option:t.row,rootProps:e}}),r=GetOptionProps({key:"value",rootProps:e,optionDetails:{...o,option:n,rootProps:e}});return i!==r});g({row:t.parent,details:t.parentDetails,childs:l})}else r=r.filter(n=>{let i=GetOptionProps({key:"value",rootProps:e,optionDetails:{...o,option:t.row,rootProps:e}}),r=GetOptionProps({key:"value",rootProps:e,optionDetails:{...o,option:n,rootProps:e}});return i!==r});a&&a(r)}function R(){return{toggle:f,rootProps:e,mountedDic:c,openDic:l,add:v,remove:y,types:t,indent:$,size:s,change:j,getChilds:h}}(0,_react.useEffect)(()=>{e.toggleRef&&(e.toggleRef.current=e=>f(e))},[f]),(0,_react.useEffect)(()=>{e.onToggle&&e.onToggle(l)},[l]);let b=(0,_aioUtils.AddToAttrs)(o,{className:["aio-input-tree",e.className],style:e.style});return(0,_jsxRuntime.jsx)(TreeContext.Provider,{value:R(),children:(0,_jsxRuntime.jsxs)("div",{...b,children:[(0,_jsxRuntime.jsx)(TreeHeader,{}),(0,_jsxRuntime.jsx)(TreeBody,{rows:r,level:0})]})})},TreeHeader=()=>{let{rootProps:e,add:t}=(0,_react.useContext)(TreeContext),{addText:n="add",onAdd:i}=e;return i?(n=("function"==typeof n?n("header"):n)||"add",(0,_jsxRuntime.jsx)("div",{className:"aio-input-tree-header",children:(0,_jsxRuntime.jsxs)("button",{onClick:()=>t(),children:[I("mdiPlusThick",.8),n]})})):null},TreeActions=e=>{let{row:t,index:n,parent:i,rowDetails:r,parentDetails:a}=e,{rootProps:s,add:o,remove:l}=(0,_react.useContext)(TreeContext),{onAdd:u,onRemove:c,removeText:d="Remove"}=s,$=("function"==typeof s.addText?s.addText(t):s.addText)||"Add",p="function"==typeof s.actions?s.actions(t,i):s.actions;function x(){let e=[];return u&&e.push({text:$,value:"add",before:I("mdiPlusThick",.7),onClick:()=>o({parent:t,parentDetails:r})}),e=[...e,...(p||[]).map(e=>({...e,onClick(){e.onClick&&e.onClick(t,i)}}))],c&&e.push({text:d,value:"remove",before:I("mdiDelete",.7),onClick:()=>l({row:t,index:n,parent:i,parentDetails:a})}),e}let m=x();if(!m.length)return null;let f={type:"select",caret:!1,popover:{limitTo:".aio-input-tree"},className:"aio-input-tree-options-button",options:m,text:I("mdiDotsHorizontal",.7)};return(0,_jsxRuntime.jsx)(AIOInput,{...f})},TreeBody=e=>{let{rootProps:t,types:n,openDic:i,mountedDic:r,indent:a,size:s,change:o,getChilds:l,toggle:u}=(0,_react.useContext)(TreeContext),{rows:c,level:d,parent:$,parentId:p,parentIndent:x,parentDetails:m}=e,f=void 0===p||!!i[p],j=void 0==p||r[p],{onAdd:h,onRemove:g,actions:v}=t,{optionsList:y}=GetOptions({rootProps:t,types:n,options:c,level:d,isOpen:e=>!!i[e],change:(e,t)=>o(e,t)});function R(){let e="aio-input-tree-body";return $||(e+=" aio-input-tree-root"),f&&(e+=" open"),e+=j?" mounted":" not-mounted",e+=` aio-input-tree-body-level-${d}`}return(h||g||v)&&(y=y.map(e=>{let{index:t,level:n=0,option:i}=e.details,r=0===t,a=t===c.length-1,s={index:t,level:n,isFirstChild:r,isLastChild:a},o=(0,_jsxRuntime.jsx)(TreeActions,{row:i,index:t,parent:$,rowDetails:s,parentDetails:m});return{...e,after:o}})),(0,_jsxRuntime.jsx)("div",{className:R(),children:y.map((e,t)=>{let n=c[t],r=e.value,o={level:d,index:t,isLastChild:t===y.length-1,isFirstChild:0===t},u=l({row:n,details:o}),m=!!i[r],j={row:n,option:e,parent:$,parentId:p,id:r,parentOpen:f,open:m,details:o,indent:{height:s,childsLength:u.length,size:a,parentIndent:x,...o}},h={className:"aio-input-tree-row"};return(0,_react.createElement)("div",{...h,key:r},(0,_jsxRuntime.jsx)(TreeRow,{item:j}),(0,_jsxRuntime.jsx)(TreeChilds,{item:j}))})})},TreeRow=e=>{let{openDic:t,getChilds:n,toggle:i}=(0,_react.useContext)(TreeContext),{item:r}=e,a=n(r).length?!!t[r.id]:void 0,s={indent:r.indent,option:r.option,toggle:{state:a,action:()=>i(r.id)}};return(0,_jsxRuntime.jsx)(Layout,{...s})},TreeChilds=e=>{let{getChilds:t}=(0,_react.useContext)(TreeContext),{row:n,id:i,open:r,indent:a,details:s}=e.item,o=t(e.item);return r&&o&&o.length?(0,_jsxRuntime.jsx)(TreeBody,{rows:o,level:a.level+1,parent:n,parentId:i,parentIndent:a,parentDetails:s}):null},DPContext=(0,_react.createContext)({});function Calendar(e){let{rootProps:t,DATE:n}=(0,_react.useContext)(AICTX),{onClose:i}=e,{multiple:r,unit:a=Def("date-unit"),jalali:s,value:o,disabled:l,size:u=12,theme:c=Def("theme"),translate:d=e=>e,onChange:$=()=>{},option:p={}}=t,[x]=(0,_react.useState)(n.getMonths(s)),[m]=(0,_react.useState)(n.getToday(s)),[f]=(0,_react.useState)(n.getWeekDay(m).weekDay),[j]=(0,_react.useState)(x[m[1]-1]),[h,g]=(0,_react.useState)(y);function v(){let e;return r?o.length?o[o.length-1]:void 0:o}function y(){let e=v();e=e&&null!==e?e:m;let[t,i,r]=n.convertToArray(e);return{year:t,month:i,day:r}}let R=(0,_react.useRef)(h);function b(e){"Today"===e&&("month"===a?e="This Month":"hour"===a&&(e="This Hour"));let t={Clear:"حذف","This Hour":"ساعت کنونی",Today:"امروز","This Month":"ماه جاری","Select Year":"انتخاب سال",Close:"بستن"},n;return s&&t[e]&&(n=t[e]),d(e)}function _(e){let t;if("today"===e){let[n,i,r]=m;t={year:n,month:i,day:"month"===a?1:r}}else t={...h,...e};g(t)}function C(){return{fontSize:u,background:c[1],color:c[0],stroke:c[0],cursor:!0===l?"not-allowed":void 0}}function A(){let e=v();return"string"==typeof e?n.getSplitter(e):"/"}function k(){return{changeActiveDate:_,DATE:n,translate:b,rootProps:t,activeDate:R.current,today:m,todayWeekDay:f,thisMonthString:j,months:x,onChange(e){let{year:l=1e3,month:u=1,day:c=1,hour:d=0}=e,m=[l,u,c,d],f=s?m:n.toJalali(m),j=s?n.toGregorian(m):m,{weekDay:h,index:g}="month"===a?{weekDay:"",index:0}:n.getWeekDay(m),v=e=>{if(void 0===e)return;let t=e.toString();return 1===t.length?`0${t}`:t},y="",R=A();"month"===a?y=`${l}${R}${v(u)}`:"day"===a?y=`${l}${R}${v(u)}${R}${v(c)}`:"hour"===a&&(y=`${l}${R}${v(u)}${R}${v(c)}${R}${v(d)}`);let b=x[u-1],_=s?b:n.getMonths(!0)[u-1],C=s?n.getMonths(!1)[u-1]:b,k={months:x,jalaliDateArray:f,gregorianDateArray:j,dateArray:m,weekDay:h,weekDayIndex:g,dateString:y,year:l,month:u,day:c,hour:d,monthString:b,jalaliMonthString:_,gregorianMonthString:C},N,w=0;if(r){let T=[],S=(T=o?Array.isArray(o)?[...o]:[o]:[]).indexOf(y);if(N=-1===S?[...T,y]:T.filter(e=>e!==y),"number"==typeof r)for(;N.length>r;)N=N.slice(1,N.length);S=N.length-1}else w=0,N=y;$(N,k),i&&"function"==typeof p.close&&p.close({option:void 0,index:w,rootProps:t})&&i()}}}return R.current=h,(0,_jsxRuntime.jsx)(DPContext.Provider,{value:k(),children:(0,_jsxRuntime.jsxs)("div",{className:"aio-input-date-container",style:{display:"flex",fontSize:u},children:[(0,_jsxRuntime.jsxs)("div",{className:"aio-input-date-calendar aio-input-theme-bg1 aio-input-theme-color0 aio-input-theme-stroke0",style:C(),children:[(0,_jsxRuntime.jsx)(DPHeader,{}),(0,_jsxRuntime.jsx)(DPBody,{}),(0,_jsxRuntime.jsx)(DPFooter,{})]}),(0,_jsxRuntime.jsx)(DPToday,{})]})})}function DPToday(){let{rootProps:e,translate:t,today:n,todayWeekDay:i,thisMonthString:r}=(0,_react.useContext)(DPContext),{theme:a=Def("theme"),jalali:s,unit:o=Def("date-unit")}=e;return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-date-today aio-input-theme-color1 aio-input-theme-bg0",style:{color:a[1],background:a[0]},children:[(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-today-label",children:t("Today")}),"month"!==o&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-today-weekday",children:s?i:i.slice(0,3)}),"month"!==o&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-today-day",children:n[2]}),(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-today-month",children:s?r:r.slice(0,3)}),(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-today-year",children:n[0]}),"hour"===o&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-today-year",children:n[3]+":00"})]})}function DPFooter(){let{rootProps:e,changeActiveDate:t,translate:n}=(0,_react.useContext)(DPContext),{disabled:i,onChange:r=()=>{},deSelect:a,multiple:s,now:o=!0}=e;if(i)return null;let l="aio-input-theme-color0";function u(){"function"==typeof a?a():r(s?[]:void 0)}return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-date-footer",children:[!!a&&(0,_jsxRuntime.jsx)("button",{onClick:()=>u(),className:l,children:n("Clear")}),!!o&&(0,_jsxRuntime.jsx)("button",{onClick:()=>t("today"),className:l,children:n("Today")})]})}function DPBody(){let{rootProps:e,activeDate:t}=(0,_react.useContext)(DPContext),{unit:n=Def("date-unit"),jalali:i}=e;function r(){let e="aio-input-date-body";return e+=` aio-input-date-body-${n}`,e+=` aio-input-date-${i?"rtl":"ltr"}`}return(0,_jsxRuntime.jsxs)("div",{className:r(),children:["hour"===n&&(0,_aioUtils.GetArray)(24,e=>(0,_jsxRuntime.jsx)(DPCell,{dateArray:[t.year,t.month,t.day,e]},"cell"+e)),"day"===n&&(0,_jsxRuntime.jsx)(DPBodyDay,{}),"month"===n&&(0,_aioUtils.GetArray)(12,e=>(0,_jsxRuntime.jsx)(DPCell,{dateArray:[t.year,e+1]},"cell"+e))]})}function DPBodyDay(){let{rootProps:e,activeDate:t,DATE:n}=(0,_react.useContext)(DPContext),{theme:i=Def("theme"),jalali:r}=e,a=n.getWeekDay([t.year,t.month,1]).index,s=n.getMonthDaysLength([t.year,t.month]),o=n.getWeekDays(r);return(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[o.map((e,t)=>(0,_jsxRuntime.jsx)(DPCellWeekday,{weekDay:e},"weekday"+t)),(0,_aioUtils.GetArray)(a,e=>(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-space aio-input-date-cell aio-input-theme-bg1",style:{background:i[1]}},"space"+e)),(0,_aioUtils.GetArray)(s,e=>(0,_jsxRuntime.jsx)(DPCell,{dateArray:[t.year||0,t.month||0,e+1]},"cell"+e)),(0,_aioUtils.GetArray)(42-(a+s),e=>(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-space aio-input-date-cell aio-input-theme-bg1",style:{background:i[1]}},"endspace"+e))]})}const DPCellWeekday=e=>{let{rootProps:t,translate:n}=(0,_react.useContext)(DPContext),{theme:i=Def("theme"),jalali:r}=t,{weekDay:a}=e;return(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-weekday aio-input-date-cell aio-input-theme-bg1 aio-input-theme-color0",style:{background:i[1],color:i[0]},children:(0,_jsxRuntime.jsx)("span",{children:n(a.slice(0,r?1:2))})})};function DPCell(e){let{rootProps:t,translate:n,onChange:i,DATE:r}=(0,_react.useContext)(DPContext),{disabled:a,dateAttrs:s,theme:o=Def("theme"),value:l,jalali:u,unit:c=Def("date-unit"),multiple:d}=t,{dateArray:$}=e;function p(){return d?!!l.length&&!!l.find(e=>r.isEqual($,e)):!!l&&r.isEqual($,l)}function x(e,t,n,i){var r="aio-input-date-cell";return n&&(r+=" aio-input-date-disabled"),e?r+=" aio-input-date-active aio-input-theme-bg0 aio-input-theme-color1":r+=" aio-input-theme-bg1 aio-input-theme-color0",t&&(r+=" today aio-input-theme-border0"),i&&(r+=" className"),r}let m=p(),f=r.isEqual($,r.getToday(u)),j=r.isGreater($,r.getToday(u)),h={};if(s){let g=null,v=null,y="";if("day"===t.unit){let R=r.getWeekDay($);g=R.weekDay,v=R.index}else if("month"===t.unit){let b=r.getMonths(u);y=b[$[1]-1]}h=(h=s({dateArray:$,isToday:f,isActive:m,isFuture:j,weekDayIndex:v,weekDay:g,monthString:y}))||{}}let _=!0===a||!0===h.disabled,C=x(m,f,_,h.className),A=_?void 0:()=>{i({year:$[0],month:$[1],day:$[2],hour:$[3]})},k={};_||(k.background=o[1]),-1!==C.indexOf("aio-input-date-active")&&(k.background=o[0],k.color=o[1]),-1!==C.indexOf("today")&&(k.border=`1px solid ${o[0]}`),k={...k,...h.style};let N;if("hour"===c)N=$[3]+":00";else if("day"===c)N=$[2];else if("month"===c){let w=r.getMonths(u);N=n(u?w[$[1]-1]:w[$[1]-1].slice(0,3))}return(0,_jsxRuntime.jsx)("div",{style:k,onClick:A,className:C,children:_?(0,_jsxRuntime.jsx)("del",{children:N}):N})}function DPHeaderItem(e){let{unit:t}=e,{rootProps:n,activeDate:i,months:r}=(0,_react.useContext)(DPContext),{theme:a=Def("theme"),jalali:s}=n;if(!i||!i[t])return null;let o="year"===t?i.year:r[i[t]-1].substring(0,s?10:3),l={type:"button",text:o,justify:!0,caret:!1,attrs:{className:"aio-input-date-dropdown aio-input-theme-color0"},popover:{position:"fullscreen",setAttrs(e){if("modal"===e)return{style:{background:a[1],color:a[0]}}},body:e=>(0,_jsxRuntime.jsx)(DPHeaderPopup,{onClose:e.close,unit:t})}};return(0,_jsxRuntime.jsx)(AIOInput,{...l})}const DPHeaderPopup=e=>{let{onClose:t,unit:n}=e,{rootProps:i,DATE:r,translate:a,activeDate:s,changeActiveDate:o}=(0,_react.useContext)(DPContext),{jalali:l,theme:u=Def("theme")}=i,[c]=(0,_react.useState)(r.getMonths(l)),[d,$]=(0,_react.useState)(10*Math.floor(s.year/10)),[p,x]=(0,_react.useState)(s.year),[m,f]=(0,_react.useState)(s.month);function j(e){"year"===n?(x(e),o({year:e})):(f(e),o({month:e})),t()}function h(e){$(d+10*e)}function g(){let e=[];if("year"===n)for(let t=d;t<d+10;t++){let i=t===p,r="aio-input-date-cell";i?r+=" aio-input-date-active aio-input-theme-bg0 aio-input-theme-color1":r+=" aio-input-theme-bg1 aio-input-theme-color0";let a={style:i?{background:u[0],color:u[1]}:{background:u[1],color:u[0]},className:r,onClick:()=>j(t)};e.push((0,_react.createElement)("div",{...a,key:t},t))}else for(let s=1;s<=12;s++){let o=s===m,l="aio-input-date-cell";o?l+=" aio-input-date-active aio-input-theme-bg0 aio-input-theme-color1":l+=" aio-input-theme-bg1 aio-input-theme-color0";let $={style:o?{background:u[0],color:u[1]}:{background:u[1],color:u[0]},className:l,onClick:()=>j(s)};e.push((0,_react.createElement)("div",{...$,key:s},c[s-1]))}return e}function v(){return"year"!==n?null:(0,_jsxRuntime.jsxs)("div",{className:"aio-input-date-popup-header",children:[(0,_jsxRuntime.jsx)(DPArrow,{type:"minus",onClick:()=>h(-1)}),(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-popup-label",children:a("Select Year")}),(0,_jsxRuntime.jsx)(DPArrow,{type:"plus",onClick:()=>h(1)})]})}function y(){return(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-popup-body",children:g()})}function R(){return(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-popup-footer",children:(0,_jsxRuntime.jsx)("button",{className:"aio-input-theme-bg0 aio-input-theme-color0",onClick:()=>t(),children:a("Close")})})}return(0,_react.useEffect)(()=>{x(s.year),f(s.month)},[s.year,s.month]),(0,_jsxRuntime.jsxs)("div",{className:"aio-input-date-popup"+(l?" aio-input-date-rtl":" aio-input-date-ltr"),children:[v(),y(),R()]})};function DPHeader(){let{rootProps:e,activeDate:t,changeActiveDate:n,DATE:i}=(0,_react.useContext)(DPContext),{unit:r=Def("date-unit")}=e;function a(){if(!t||!t.year||!t.month)return null;let e=i.getMonthDaysLength([t.year,t.month]),r=(0,_aioUtils.GetArray)(e,e=>({text:(e+1).toString(),value:e+1})),a={value:t.day,options:r,onChange:e=>n({day:e})};return(0,_jsxRuntime.jsx)(DPHeaderDropdown,{...a})}return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-date-header",children:[(0,_jsxRuntime.jsx)(DPArrow,{type:"minus"}),(0,_jsxRuntime.jsxs)("div",{className:"aio-input-date-select",children:[(0,_jsxRuntime.jsx)(DPHeaderItem,{unit:"year"}),"month"!==r?(0,_jsxRuntime.jsx)(DPHeaderItem,{unit:"month"}):null,"hour"===r?a():null]}),(0,_jsxRuntime.jsx)(DPArrow,{type:"plus"})]})}function DPHeaderDropdown(e){let{rootProps:t}=(0,_react.useContext)(DPContext),{value:n,options:i,onChange:r}=e,{theme:a=Def("theme")}=t,s={value:n,options:i,onChange:r,caret:!1,type:"select",attrs:{className:"aio-input-date-dropdown aio-input-theme-bg1 aio-input-theme-color0"},option:{style:()=>({background:a[1],color:a[0]})}};return(0,_jsxRuntime.jsx)(AIOInput,{...s})}function DPArrow(e){let{rootProps:t,changeActiveDate:n,activeDate:i,DATE:r}=(0,_react.useContext)(DPContext),{type:a,onClick:s}=e,{jalali:o,unit:l=Def("date-unit"),theme:u=Def("theme")}=t;function c(){if(s){s();return}let e=(o?-1:1)*("minus"===a?-1:1),t=[i.year,i.month,i.day];if("month"===l&&n({year:i.year+e}),"day"===l){let u=[];n({year:(u=1===t[1]&&-1===e?[t[0]-1,12]:12===t[1]&&1===e?[t[0]+1,1]:[t[0],t[1]+e])[0],month:u[1]})}if("hour"===l){let c=r.getNextTime(t,864e5*e,o);n({year:c[0],month:c[1],day:c[2]})}}function d(){return I("minus"===a?"mdiChevronLeft":"mdiChevronRight",1,{color:u[0],className:"aio-input-theme-color0"})}return(0,_jsxRuntime.jsx)("div",{className:"aio-input-date-arrow",onClick:()=>c(),children:d()})}const AITableContext=(0,_react.createContext)({});function Table(){let{rootProps,DATE}=(0,_react.useContext)(AICTX),{paging,getValue={},value,onChange=()=>{},onAdd,onRemove,excel,onSwap,onSearch,rowAttrs,onChangeSort,className,style}=rootProps,[dom]=(0,_react.useState)((0,_react.createRef)()),[searchValue,setSearchValue]=(0,_react.useState)(""),[columns,setColumns]=(0,_react.useState)([]),[searchColumns,setSearchColumns]=(0,_react.useState)([]),[excelColumns,setExcelColumns]=(0,_react.useState)([]),[temp]=(0,_react.useState)({}),[DragRows]=(0,_react.useState)(!!onSwap&&new _aioUtils.DragClass({callback(e,t){if(!1===DragRows)return;let{dragIndex:n}=e,{dropIndex:i,rows:r}=t,a=DragRows.reOrder(r,n,i),s=r[n],o=r[i];"function"==typeof onSwap?onSwap(a,s,o):onChange(a)}})),[sorts,setSorts]=(0,_react.useState)([]);function getColumns(){let{columns:e=[]}=rootProps;e="function"==typeof e?e():e;let t=[],n=[],i=e.map(e=>{let{id:i="aitc"+Math.round(1e6*Math.random()),sort:r,search:a,excel:s}=e,o={...e,_id:i};return a&&t.push(o),s&&n.push(o),o});return setColumns(i),setSearchColumns(t),setExcelColumns(n),i}function getSorts(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n],{_id:r,input:a}=i,s=!0===i.sort?{}:i.sort;if(!s)continue;let{active:o=!1,dir:l="dec"}=s,u;u=s.getValue?s.getValue:e=>{let t=getDynamics({value:i.value,row:e,column:i});return a&&"date"===a.type&&(t=DATE.getTime(t)),t};let c;c=a&&-1!==["number","date","range"].indexOf(a.type)?"number":s.type||"string";let d={dir:l,title:s.title||i.title,sortId:r,active:o,type:c,getValue:u};t.push(d)}setSorts(t)}function getDynamics(p){let{value,row,column,def,rowIndex}=p;if(paging){let{number,size}=paging;rowIndex&&(rowIndex+=(number-1)*size)}let type=typeof value;if("string"===type){let result=value,param={row,column:column,rowIndex:rowIndex};if(getValue[value])result=getValue[value](param);else if(-1!==value.indexOf("row."))try{eval(`result = ${value}`)}catch{result=""}return void 0===result?def:result}return"undefined"===type?def:"function"===type?value({row,column,rowIndex}):void 0===value?def:value}function add(){"function"==typeof onAdd?onAdd():onChange([{...onAdd},...value])}function remove(e,t){let n=()=>onChange(value.filter(t=>t._id!==e._id));"function"==typeof onRemove?onRemove({row:e,action:n,rowIndex:t}):n()}function exportToExcel(){let e=[];if("function"==typeof rootProps.excel)e=rootProps.excel(value);else for(let t=0;t<value.length;t++){let n=value[t],i={};for(let r=0;r<excelColumns.length;r++){let a=excelColumns[r],{excel:s,value:o}=a,l="";if(!0===s)l="string"==typeof a.title?a.title:"untitle";else{if("string"!=typeof s)continue;l=s}i[l]=getDynamics({value:o,row:n,column:a,rowIndex:t})}e.push(i)}(0,_aioUtils.ExportToExcel)(e,{promptText:"string"==typeof excel?excel:"Inter Excel File Name"})}function getSearchedRows(e){return!0===onSearch&&searchColumns.length&&searchValue?AIOInputSearch(e,searchValue,(e,t)=>{let n="";for(let i=0;i<searchColumns.length;i++){let r=searchColumns[i],a=getDynamics({value:r.value,row:e,def:"",column:r,rowIndex:t});a&&(n+=a+" ")}return n}):e}function sortRows(e,t){return e?t&&t.length?e.sort((e,n)=>{for(let i=0;i<t.length;i++){let{dir:r,getValue:a}=t[i];if(!a)break;let s=a(e),o=a(n);if(s<o)return -1*("dec"===r?-1:1);if(s>o)return 1*("dec"===r?-1:1);if(i===t.length-1)break}return 0}):e:[]}function getSortedRows(e){if(temp.isInitSortExecuted||onChangeSort)return e;let t=sorts.filter(e=>!1!==e.active);if(!t.length||!e.length)return e;temp.isInitSortExecuted=!0;let n=sortRows(e,t);return onChange(n),n}function getRows(){let e=getSearchedRows(value),t=getSortedRows(e),n=paging&&!paging.serverSide?t.slice((paging.number-1)*paging.size,paging.number*paging.size):t;return{rows:value,searchedRows:e,sortedRows:t,pagedRows:n}}function getCellStyle(e){let t=getDynamics({value:e.width}),n=getDynamics({value:e.minWidth});return{width:t||void 0,flex:t?void 0:1,minWidth:n}}function getCellAttrs(e){let{row:t,rowIndex:n,column:i,type:r}=e,{cellAttrs:a,titleAttrs:s}=i,o=getDynamics({value:"title"===r?s:a,column:i,def:{},row:t,rowIndex:n}),l=getDynamics({value:i.justify,def:!1}),u=`aio-input-table-${r}`+(l?` aio-input-table-${r}-justify`:"");return o=(0,_aioUtils.AddToAttrs)(o,{className:u,style:getCellStyle(i)}),"title"===r&&(o.title=getDynamics({value:i.title,def:""})),{...o}}function getRowAttrs(e,t){let n=rowAttrs?rowAttrs({row:e,rowIndex:t}):{},i=(0,_aioUtils.AddToAttrs)(n,{className:"aio-input-table-row"});return!1!==DragRows&&(i={...i,...DragRows.getDragAttrs({dragIndex:t}),...DragRows.getDropAttrs({dropIndex:t,rows:value})}),i}function search(e){!0===onSearch?setSearchValue(e):"function"==typeof onSearch&&onSearch(e)}function getContext(e){return{ROWS:e,rootProps,columns,sorts,setSorts,sortRows,excelColumns,getCellAttrs,getRowAttrs,add,remove,search,exportToExcel,getDynamics}}(0,_react.useEffect)(()=>{let e;getSorts(getColumns())},[]);let ROWS=getRows(),attrs=(0,_aioUtils.AddToAttrs)(rootProps.attrs,{className:["aio-input aio-input-table",className],style:rootProps.style,attrs:{ref:dom}});return(0,_jsxRuntime.jsx)(AITableContext.Provider,{value:getContext(ROWS),children:(0,_jsxRuntime.jsxs)("div",{...attrs,children:[(0,_jsxRuntime.jsx)(TableToolbar,{}),(0,_jsxRuntime.jsxs)("div",{className:"aio-input-table-unit aio-input-scroll",children:[(0,_jsxRuntime.jsx)(TableHeader,{}),(0,_jsxRuntime.jsx)(TableRows,{})]}),paging?(0,_jsxRuntime.jsx)(TablePaging,{}):""]})})}function TableGap(e){let{rootProps:t}=(0,_react.useContext)(AITableContext),{rowGap:n,columnGap:i}=t,{dir:r}=e,a;return a="h"===r?{height:n}:{width:i},(0,_jsxRuntime.jsx)("div",{className:`aio-input-table-border-${r}`,style:a})}function TablePaging(){let{ROWS:e,rootProps:t}=(0,_react.useContext)(AITableContext),[n]=(0,_react.useState)({timeout:void 0,start:void 0,end:void 0,pages:0});function i(i){if("function"!=typeof t.onChangePaging)return alert("aio-input error => in type table you set paging but forget to set onChangePaging function prop to aio input"),{number:0,size:0};let{number:r,size:a=20,length:s=0,sizes:o=[1,5,10,15,20,30,50,70,100],serverSide:l}=i;l||(s=e.sortedRows.length),-1===o.indexOf(a)&&(a=o[0]);let u=Math.ceil(s/a),c=(r=(r=r>u?u:r)<1?1:r)-3,d=r+3;return n.start=c,n.end=d,n.pages=u,{...i,length:s,number:r,size:a,sizes:o}}let[r,a]=(0,_react.useState)(i(t.paging||{size:0,number:0}));function s(e){let s=i({...r,...e});a(s),t.onChangePaging&&(s.serverSide?(clearTimeout(n.timeout),n.timeout=setTimeout(()=>{t.onChangePaging&&t.onChangePaging(s)},800)):t.onChangePaging(s))}(0,_react.useEffect)(()=>{t.paging&&a(i(t.paging))},[(t.paging||{size:0,number:0,length:0}).size,(t.paging||{size:0,number:0,length:0}).number,(t.paging||{size:0,number:0,length:0}).length]);let{number:o,size:l,sizes:u}=r,c=[],d=!0;for(let $=n.start;$<=n.end;$++)if($<1||$>n.pages)c.push((0,_jsxRuntime.jsx)("button",{className:"aio-input-table-paging-button aio-input-table-paging-button-hidden",children:$},$));else{let p;d?(p=1,d=!1):p=$===Math.min(n.end,n.pages)?n.pages:$,c.push((0,_jsxRuntime.jsx)("button",{className:"aio-input-table-paging-button"+(p===o?" active":""),onClick:()=>s({number:p}),children:p},p))}function x(){if(!u||!u.length)return null;let e={attrs:{className:"aio-input-table-paging-button aio-input-table-paging-size"},type:"select",value:l,options:u,option:{text:"option",value:"option"},onChange:e=>s({size:e}),popover:{fitHorizontal:!0}};return(0,_jsxRuntime.jsx)(AIOInput,{...e})}return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-table-paging",children:[c,x()]})}function TableRows(){let{ROWS:e,rootProps:t}=(0,_react.useContext)(AITableContext),{rowTemplate:n,rowAfter:i=()=>null,rowBefore:r=()=>null,rowsTemplate:a,placeholder:s="there is not any items"}=t,o=e.pagedRows||[],l;if(a)l=a(o);else if(o.length)l=o.map((e,t)=>{let{id:a="ailr"+Math.round(1e7*Math.random())}=e;e._id=void 0===e._id?a:e._id;let s=t===o.length-1,l;return l=n?n({row:e,rowIndex:t,isLast:s}):(0,_jsxRuntime.jsx)(TableRow,{row:e,rowIndex:t,isLast:s},e._id),(0,_jsxRuntime.jsxs)(_react.Fragment,{children:[r({row:e,rowIndex:t}),l,i({row:e,rowIndex:t})]},e._id)});else{if(!s)return null;l=(0,_jsxRuntime.jsx)("div",{style:{width:"100%",textAlign:"center",padding:12,boxSizing:"border-box"},children:s})}return(0,_jsxRuntime.jsx)("div",{className:"aio-input-table-rows",children:l})}function TableToolbar(){let{add:e,exportToExcel:t,sorts:n,sortRows:i,setSorts:r,search:a,rootProps:s,excelColumns:o}=(0,_react.useContext)(AITableContext),{toolbarAttrs:l,toolbar:u,onAdd:c,onSearch:d,onChangeSort:$,onChange:p=()=>{},value:x,addText:m}=s;if(l=(0,_aioUtils.AddToAttrs)(l,{className:"aio-input-table-toolbar"}),!c&&!u&&!d&&!n.length&&!o.length)return null;function f(e,t){j(n.map(n=>n.sortId===e?{...n,...t}:n))}async function j(e){if($)!1!==await $(e)&&r(e);else{r(e);let t=e.filter(e=>!1!==e.active);t.length&&p(i(x,t))}}function h(){if(!n.length)return null;let e={popover:{header:{attrs:{className:"aio-input-table-toolbar-popover-header"},title:"Sort",onClose:!1},pageSelector:".aio-input-table"},caret:!1,type:"select",options:n,option:{text:"option.title",checked:"!!option.active",close:()=>!1,value:"option.sortId",after({option:e}){let{dir:t="dec",sortId:n}=e;return(0,_jsxRuntime.jsx)("div",{onClick(e){e.stopPropagation(),f(n,{dir:"dec"===t?"inc":"dec"})},children:I("dec"===t?"mdiArrowDown":"mdiArrowUp",.8)})}},attrs:{className:"aio-input-table-toolbar-button"},text:I("mdiSort",.7),onSwap:(e,t,n)=>j(e),onChange:(e,t)=>f(e,{active:!t.checked})};return(0,_react.createElement)(AIOInput,{...e,key:"sortbutton"})}function g(){let{addText:e}=s;return s.addText?"function"==typeof e?e(x):e:I("mdiPlusThick",.8)}return(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsxs)("div",{...l,children:[u&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-table-toolbar-content",children:"function"==typeof u?u():u}),(0,_jsxRuntime.jsx)("div",{className:"aio-input-table-search",children:!!d&&(0,_jsxRuntime.jsx)(AIOInput,{type:"text",onChange:e=>a(e),after:I("mdiMagnify",.7)})}),h(),!!o.length&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-table-toolbar-button",onClick:()=>t(),children:I("mdiFileExcel",.8)}),!!c&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-table-toolbar-button",onClick:()=>e(),children:g()})]}),(0,_jsxRuntime.jsx)(TableGap,{dir:"h"})]})}function TableHeader(){let{rootProps:e,columns:t}=(0,_react.useContext)(AITableContext),{headerAttrs:n,onRemove:i}=e;n=(0,_aioUtils.AddToAttrs)(n,{className:"aio-input-table-header"});let r=t.map((e,n)=>(0,_jsxRuntime.jsx)(TableTitle,{column:e,isLast:n===t.length-1},e._id)),a=i?(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)(TableGap,{dir:"v"}),(0,_jsxRuntime.jsx)("div",{className:"aio-input-table-remove-title"})]}):null;return(0,_jsxRuntime.jsxs)("div",{...n,children:[r,a,(0,_jsxRuntime.jsx)(TableGap,{dir:"h"})]})}function TableTitle(e){let{column:t,isLast:n}=e,{getCellAttrs:i}=(0,_react.useContext)(AITableContext),r=i({column:t,type:"title"});return(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)("div",{...r,children:r.title}),!n&&(0,_jsxRuntime.jsx)(TableGap,{dir:"v"})]})}function TableRow(e){let{row:t,isLast:n,rowIndex:i}=e,{remove:r,rootProps:a,columns:s,getRowAttrs:o}=(0,_react.useContext)(AITableContext);function l(){return s.map((e,n)=>{let r=t._id+" "+e._id,a=n===s.length-1;return(0,_jsxRuntime.jsx)(TableCell,{isLast:a,row:t,rowIndex:i,column:e},r)})}let{onRemove:u}=a;return(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsxs)("div",{...o(t,i),children:[l(),u?(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)(TableGap,{dir:"v"}),(0,_jsxRuntime.jsx)("button",{className:"aio-input-table-remove",onClick:()=>r(t,i),children:I("mdiClose",.8)})]}):null]},t._id),(0,_jsxRuntime.jsx)(TableGap,{dir:"h"})]})}const TableCell=p=>{let{row,rowIndex,column,isLast}=p,{getCellAttrs,rootProps,getDynamics}=(0,_react.useContext)(AITableContext),{onChange=()=>{},value=[]}=rootProps;function setCell(row,column,cellNewValue){column.input&&column.input.onChange?column.input.onChange({value:cellNewValue,row,column}):(row=JSON.parse(JSON.stringify(row)),eval(`${column.value} = cellNewValue`),onChange(value.map(e=>e._id!==row._id?e:row)))}let contentProps={row,rowIndex,column,onChange:column.input?e=>setCell(row,column,e):void 0},key=row._id+" "+column._id;return(0,_jsxRuntime.jsxs)(_react.Fragment,{children:[(0,_jsxRuntime.jsx)("div",{...getCellAttrs({row,rowIndex,column,type:"cell"}),children:(0,_react.createElement)(TableCellContent,{...contentProps,key:key})}),!isLast&&(0,_jsxRuntime.jsx)(TableGap,{dir:"v"})]},key)};function TableCellContent(e){let{row:t,column:n,rowIndex:i,onChange:r}=e,{getDynamics:a}=(0,_react.useContext)(AITableContext),s=a({value:n.template,row:t,rowIndex:i,column:n});if(void 0!==s)return s;let o=a({value:n.input,row:t,rowIndex:i,column:n}),l=a({value:n.value,row:t,rowIndex:i,column:n});if(!o)return l;o.justify=o.justify||a({value:n.justify,row:t,rowIndex:i,column:n});let u={type:"text"};for(let c in o){let d=c,$=o[d];-1!==["onChange","onClick"].indexOf(d)?u[d]=$:u[d]=a({value:$,row:t,rowIndex:i,column:n})}let p={...u,value:l,onChange:r,type:o.type};return(0,_react.createElement)(AIOInput,{...p,key:t._id+" "+n._id})}function AIOInputSearch(e,t,n){if(!t)return e;function i(e,t){for(let n=0;n<e.length;n++)if(-1===t.indexOf(e[n]))return!1;return!0}let r=t.split(" ");return e.filter((e,t)=>i(r,n?n(e,t):e))}const RangeContext=(0,_react.createContext)({}),Range=()=>{let{rootProps:e}=(0,_react.useContext)(AICTX),{start:t=0,end:n=360,min:i=t,max:r=n,step:a=1,reverse:s,round:o,vertical:l,multiple:u,text:c,onChange:d,size:$=Def("range-size"),disabled:p,className:x,labels:m=[],rotate:f=0}=e,[j]=(0,_react.useState)({dom:(0,_react.createRef)(),start:0,index:!1});function h(e){Array.isArray(e)||(e=[e||0]);for(let n=0;n<e.length;n++){let s=e[n]||0;(s=+(s=Math.round((s-t)/a)*a+t).toFixed((0,_aioUtils.GetPrecisionCount)(a)))<i&&(s=i),s>r&&(s=r),e[n]=s}return e}let g=h(e.value),v=(0,_react.useRef)(g);v.current=g;let[y,R]=(0,_react.useState)(b());function b(){if(!Array.isArray(p))return{};let e={};for(let t=0;t<p.length;t++)e["a"+p[t]]=!0;return e}function _(e){return"point"===e?o?100:0:"label"===e?o?116:14:"scale"===e?o?100:14:0}function C(e){d&&(e=h(e),d(u?e:e[0]))}function A(e){if(!0===p||!1!==j.index)return;let t=v.current,n;(!((n=o?B(e.centerAngle):W(e[l?"yp":"xp"]))<t[t.length-1])||!(n>t[0]))&&(n<t[0]?S(-1):S(1))}function k(e){for(let t=0;t<e.length;t++)if(E(e[t]))return!1;return!0}(0,_react.useEffect)(()=>{R(b())},[JSON.stringify(p)]),(0,_react.useEffect)(()=>{d&&(clearTimeout(j.timeOut),j.timeOut=setTimeout(()=>{new _aioUtils.Swip({reverseX:!!s,reverseY:!!s&&!!l,dom:()=>(0,_jquery.default)(j.dom.current),start(e){let{event:t}=e;if(null!==t.target){let n=(0,_jquery.default)(t.target);if((0,_aioUtils.HasClass)(n,"ai-range-point")){let i=n.attr("data-index")||"0";j.index=+i}else j.index=!1;j.start=[...v.current]}return[0,0]},move(e){let{change:t,mousePosition:n}=e;t&&D({dx:t.dx,dy:t.dy,deltaCenterAngle:t.deltaCenterAngle,centerAngle:n.centerAngle})},onClick:function(e){A(e.mousePosition)}})},100))},[D]);let N=(e,t={})=>{let{half:n=!1,range:i=$/(n?2:1)}=t,r=i*e/100,{min:a,max:s}=t;return void 0!==a&&r<a&&(r=a),void 0!==s&&r>s&&(r=s),r},w=(e,t)=>{let n=e.thickness||1,i=0,r=e.roundCap||!1,a=e.full||!1,s=e.offset,o=e.color||"#000";try{let l=n;isNaN(l)&&(l=1),n=l;let u=s;isNaN(u)&&(u=0);let c=$/2-n/2;(i="offset"===t?c-u:u)>c&&(i=c),i<n/2?i=n/2:r=!1}catch{}return{thickness:n,radius:i,color:o,roundCap:r,full:a}},T=e=>{let{thickness:t=1,offset:n=0,color:i="#000",roundCap:r=!1}=e;try{let a=t;isNaN(a)&&(a=1),t=a;let s=n;isNaN(s)&&(s=0);(n=$/2-t/2-s)>$-t/2&&(n=$-t/2),n<t/2&&(n=t/2)}catch{}return{thickness:t,offset:n,color:i,roundCap:r}};function S(e){let t=[...v.current],n=JSON.stringify(t);for(t=O(t,e*a);!k(t)&&JSON.stringify(t)!==n;)n=JSON.stringify(t),t=O(t,e*a);C(t)}function D(e){if(!0===p)return;let t;C(M(e))}function P(e){let i=v.current,r,a;return r=0===e?t:i[e-1],a=e===i.length-1?n:i[e+1],{before:r,after:a}}function O(e,i,r){let a=e.map(e=>e+i);return a[0]<t||a[a.length-1]>n?r?v.current:e:a}function M(e){let{dx:i,dy:r,deltaCenterAngle:s,centerAngle:u}=e,c=[...j.start],d=j.index;1===c.length&&!1===d&&(d=0);let $;if(!1===d){let p;if(o){let x=s*(n-t)/360;p=x=Math.round(x/a)*a}else p=Math.round(W(Z(l?r:i))/a)*a;let m=O(c,p,!0);$=k(m)?m:v.current}else{let{before:f,after:h}=P(d),g;if(o)g=Math.round(B(u)/a)*a;else{let y=Math.round(W(Z(l?r:i))/a)*a;g=c[d]+y}g>h&&(g=h),g<f&&(g=f),E(g)&&(g=v.current[d]),c[d]=g,$=c}return $}function L(){return l?s?"bottom":"top":s?"right":"left"}function U(){return l?"left":"top"}function E(e){return!!y[`a${e}`]}function G(){let e="ai-range";return o?e+=" ai-range-round":e+=` ai-range-${l?"vertical":"horizontal"}`,x&&(e+=" "+x),s&&(e+=" ai-range-reverse"),e}function z(){let{style:t}=e,n;return{...n=o?{width:$,height:$}:l?{width:$}:{height:$},...t}}function F(){let{attrs:t={}}=e,n=z();return(0,_aioUtils.AddToAttrs)(t,{className:G(),style:n,attrs:{ref:j.dom}})}function H(){return(0,_jsxRuntime.jsxs)("div",{...F(),children:[(0,_jsxRuntime.jsx)(RangeGroove,{}),void 0!==c&&(0,_jsxRuntime.jsx)("div",{className:"ai-range-text",children:"function"==typeof c?c():c},"rangetext"),!o&&(0,_jsxRuntime.jsxs)(_react.Fragment,{children:[(0,_jsxRuntime.jsx)(RangeRanges,{}),(0,_jsxRuntime.jsx)(RangeFills,{})]},"rangefill"),(0,_jsxRuntime.jsx)(RangeSvg,{}),m.map((e,t)=>(0,_jsxRuntime.jsx)(RangeLabel,{label:e},t)),g.map((e,t)=>(0,_jsxRuntime.jsx)(RangeValueContainer,{index:t,itemValue:e},"rangecontainervalue"+t))]})}function q(e){let i=o=o||1,r=(1-i)*(n-t)/i;return e>n+r/2&&(e=t-r+e-n),e}function B(e){let i=360*(o||1),r=360-i;s&&(e=180-e),e-=f,e-=r/2,e-=90;let a=(e=X(e))*(n-t)/i;return q(a)}function V(e,i){let r=360*o,a=360-r,l=e*r/(n-t);return l+=90,l+=a/2,l+=f,l+=i||0,s?l=180-l:l}function X(e){return(e%=360)<0?e=360+e:e}function Y(e){return 100*(e-t)/(n-t)}function W(e){return e*(n-t)/100}function Z(e){return 100*e/(0,_jquery.default)(j.dom.current)[l?"height":"width"]()}function K(){return{getXPByValue:Y,rootProps:e,fixAngle:X,getAngleByValue:V,dom:j.dom,getCircleByStr:w,getRectByStr:T,isValueDisabled:E,value:v.current,getSide:L,getOffset:U,getDefaultOffset:_,sbp:N}}return(0,_jsxRuntime.jsx)(RangeContext.Provider,{value:K(),children:H()})},RangeGroove=()=>{let{rootProps:e}=(0,_react.useContext)(RangeContext),t=(0,_aioUtils.AddToAttrs)(e.grooveAttrs,{className:"ai-range-groove"});return e.round?null:(0,_jsxRuntime.jsx)("div",{...t})},RangeSvg=()=>{let{rootProps:e,value:t}=(0,_react.useContext)(RangeContext),{round:n,ranges:i=[],circles:r=[],size:a=Def("range-size"),end:s=360}=e;if(!n||!(i||[0]).length&&!r.length)return null;let o=[(0,_jsxRuntime.jsx)(RangeCircles,{}),(0,_jsxRuntime.jsx)(RangeRanges,{})];return(0,_jsxRuntime.jsx)("svg",{style:{position:"absolute",left:0,top:0},width:a,height:a,children:o})},RangeCircles=()=>{let{rootProps:e,getCircleByStr:t}=(0,_react.useContext)(RangeContext),{start:n=0,end:i=360,circles:r=[],size:a=Def("range-size")}=e,s=[];for(let o=0;o<r.length;o++){let l=n,u=i,{thickness:c,color:d,radius:$,roundCap:p,full:x}=t(r[o],"radius"),m={thickness:c,color:d,from:l,to:u,radius:$,full:x,roundCap:p};s.push((0,_jsxRuntime.jsx)(RangeArc,{...m}))}return(0,_jsxRuntime.jsx)(_jsxRuntime.Fragment,{children:s})},RangeFills=()=>{let{rootProps:e,value:t}=(0,_react.useContext)(RangeContext),{start:n=0,fill:i,round:r}=e;if(r||!1===i)return null;let a=1===t.length?[n,t[0]]:[...t],s=[];for(let o=1;o<a.length;o++){let{thickness:l,style:u,className:c,color:d}=("function"==typeof i?i(o):i)||{},$=a[o-1],p=a[o],x="ai-range-fill";c&&(x+=" "+c);let m={thickness:l,color:d,from:$,to:p,className:x,style:u};s.push((0,_react.createElement)(RangeRect,{...m,key:"fill"+o}))}return(0,_jsxRuntime.jsx)(_jsxRuntime.Fragment,{children:s})},RangeRanges=()=>{let{rootProps:e,getCircleByStr:t,getRectByStr:n}=(0,_react.useContext)(RangeContext),{start:i=0,ranges:r=[],round:a}=e,s=[],o=i,l=r;for(let u=0;u<l.length;u++){let[c,d]=l[u],$=c,p;if(a){let{thickness:x,color:m,radius:f,roundCap:j}=t(d,"offset"),h={thickness:x,color:m,from:o,to:$,radius:f,roundCap:j,full:!1};p=(0,_jsxRuntime.jsx)(RangeArc,{...h})}else{let{thickness:g,color:v,offset:y,roundCap:R}=n(d),b={thickness:g,color:v,from:o,to:$,offset:y,roundCap:R,className:"ai-range-range"};p=(0,_react.createElement)(RangeRect,{...b,key:"range"+u})}s.push(p),o=$}return(0,_jsxRuntime.jsx)(_jsxRuntime.Fragment,{children:s})},RangeValueContainer=e=>{let{rootProps:t,isValueDisabled:n,fixAngle:i,getAngleByValue:r,getXPByValue:a,dom:s,getSide:o}=(0,_react.useContext)(RangeContext),{itemValue:l,index:u}=e,{round:c}=t,d=i(r(l));function $(){let e;return e=c?{transform:`rotate(${d}deg)`}:{[o()]:a(l)+"%"},{className:"ai-range-value-container",draggable:!1,style:e}}let p={value:l,index:u,disabled:n(l),angle:d,parentDom:s};return(0,_jsxRuntime.jsxs)("div",{...$(),children:[(0,_react.createElement)(RangeHandle,{...p,key:"handle"})," ",(0,_react.createElement)(RangePoint,{...p,key:"point"})]})},RangeRect=({thickness:e,color:t,from:n,to:i,className:r,style:a,offset:s,roundCap:o})=>{let{getXPByValue:l,rootProps:u,getSide:c}=(0,_react.useContext)(RangeContext),{vertical:d}=u,$=l(n),p={[d?"height":"width"]:l(i)-$+"%"},x={[d?"width":"height"]:e},m={[c()]:$+"%"},f=s?{[d?"left":"top"]:s}:{},j=o?{borderRadius:"100%"}:{},h={background:t},g={...p,...x,...m,...f,...j,...h,...a};return(0,_jsxRuntime.jsx)("div",{className:r,style:g})},RangeArc=({thickness:e,color:t,from:n,to:i,radius:r,full:a,roundCap:s})=>{let{fixAngle:o,getAngleByValue:l,rootProps:u}=(0,_react.useContext)(RangeContext),{size:c=Def("range-size"),reverse:d}=u,$,p,x=c/2,m=c/2;if(a)$=0,p=360;else{let f=o(l(n)+90),j=o(l(i)+90);0===j&&(j=360),$=f,p=j,d&&(p=f,$=j)}return(0,_jsxRuntime.jsx)("path",{d:(0,_aioUtils.svgArc)(x,m,r,$,p),stroke:t,strokeWidth:e,fill:"transparent",strokeLinecap:s?"round":void 0},`from${n}to${i}`)},RangePoint=e=>{let{rootProps:t,getOffset:n,sbp:i}=(0,_react.useContext)(RangeContext),[r]=(0,_react.useState)({dom:(0,_react.createRef)()}),{value:a,disabled:s,angle:o,index:l,parentDom:u}=e;if(!1===t.point)return null;let{round:c,size:d=Def("range-size")}=t,{attrs:$={},html:p=a,offset:x=0}=(t.point||(()=>{}))(a,{disabled:s,angle:o,value:a,index:l})||{},m=(0,_aioUtils.getEventAttrs)("onMouseDown",()=>{let e=(0,_jquery.default)(u.current).find("ai-range-value-container");e.css({zIndex:10}),e.eq(l).css({zIndex:100})}),f,j={...$.style};f=c?{left:d/2+x,transform:`rotate(${-o}deg)`}:{[n()]:x};let h={ref:r.dom,className:"ai-range-point-container",style:f,draggable:!1},g=(0,_aioUtils.AddToAttrs)($,{className:["ai-range-point"],style:j,attrs:{draggable:!1,"data-index":l,...m}});return(0,_react.createElement)("div",{...h,key:"rangepoint"+l},(0,_jsxRuntime.jsx)("div",{...g,children:p}))},RangeHandle=e=>{let{rootProps:t,sbp:n}=(0,_react.useContext)(RangeContext),{value:i,angle:r,disabled:a,index:s}=e,{handle:o=()=>{},round:l}=t;if(!1===o||!l)return null;if(o&&"function"!=typeof o)return alert(`aio-input error => in type round, handle props should be a function,
        handle type = (value:number,{disabled:boolean,angle:number})=>{attrs:any}`),null;let{sharp:u=!1,thickness:c=10,size:d=90,color:$="#000",offset:p=0}=o(i,{angle:r,disabled:a,value:i})||{},x=n(d,{half:!0}),m=n(c,{half:!0});function f(){return u?{[x<0?"borderRight":"borderLeft"]:`${Math.abs(x)}px solid ${$}`,borderTop:`${m/2}px solid transparent`,borderBottom:`${m/2}px solid transparent`,left:p}:{width:x,height:m,left:p,background:$}}let j=(0,_aioUtils.AddToAttrs)({},{className:"aio-input-handle",style:f(),attrs:{draggable:!1}});return(0,_react.createElement)("div",{...j,key:"rangehandle"+s})},RangeLabel=e=>{let{dom:t,rootProps:n}=(0,_react.useContext)(RangeContext),{label:i}=e,{zIndex:r,dynamic:a,step:s,list:o=[]}=i,{round:l,start:u=0,end:c=360,reverse:d,vertical:$}=n,[p]=(0,_react.useState)(x);function x(){return j(!0)}function m(){let e=[];if(s){let{start:t=u,end:n=c}=i;for(let r=t;r<=n;r+=s)e.push(r)}for(let a=0;a<o.length;a++)-1===e.indexOf(o[a])&&e.push(o[a]);return e}function f(){if(l||!i.autoHide||$)return;let e=(0,_jquery.default)(t.current).find(".ai-range-label");if(!e.length)return;let n=e.eq(0),r="yes"===n.attr("data-rotated")?"height":"width",a=n.offset().left+(d?0:n[r]());for(let s=1;s<e.length;s++){let o=e.eq(s),u="yes"===o.attr("data-rotated")?"height":"width";o.css({display:"flex"});let c=o.offset().left,p=o[u](),x=c+p;d?x>a-5?o.css({display:"none"}):a=c:c<a+5?o.css({display:"none"}):a=c+p}}function j(e){return e||a?(0,_jsxRuntime.jsx)("div",{className:"ai-range-labels",style:{zIndex:r},children:m().map(e=>(0,_jsxRuntime.jsx)(RangeLabelItem,{label:i,itemValue:e},e))}):p}return(0,_react.useEffect)(()=>{(0,_jquery.default)(window).on("resize",f)},[]),(0,_react.useEffect)(()=>{f()}),(0,_jsxRuntime.jsx)(_jsxRuntime.Fragment,{children:j(!1)})},RangeLabelItem=e=>{let{rootProps:t,isValueDisabled:n,fixAngle:i,getAngleByValue:r,getXPByValue:a,getSide:s}=(0,_react.useContext)(RangeContext),{label:o,itemValue:l}=e,{round:u,vertical:c,size:d=Def("range-size")}=t,$;u&&($=i(r(l)));let p=n(l);function x(e){return u?{transform:`rotate(${$}deg)`}:{[s()]:a(l)+"%",...e}}function m(e,t){let n={};return u&&(n={...n,...t},e.fixAngle&&(n={...n,transform:`rotate(${-$}deg)`})),{width:0,height:0,...n}}function f(){let e=o.setting(l,{disabled:p,angle:$}),{offset:t=0,html:n=""}=e,i={[u||c?"left":"top"]:d/2+t},r={className:"ai-range-label-container",style:x(i),draggable:!1},a=(0,_aioUtils.AddToAttrs)({},{className:["ai-range-label"],style:m(e,i),attrs:{draggable:!1}});return{html:n,textProps:a,containerProps:r}}let{html:j,textProps:h,containerProps:g}=f();return(0,_jsxRuntime.jsx)("div",{...g,children:(0,_jsxRuntime.jsx)("div",{...h,children:j})})},SideMenu=e=>{let{items:t=[],onChange:n,option:i={},type:r="normal"}=e,a="aio-input-sidemenu",s=(0,_react.useRef)(e=>{});function o(e){let{badge:t}=e;if(t||(t=[]),Array.isArray(t)||(t=[t]),!t.length)return[];let n=[];for(let i=0;i<t.length;i++){let{text:r,color:s="red",circle:o}=t[i];n.push((0,_jsxRuntime.jsx)("div",{className:`${a}-badge ${a}-align ${a}-badge-${s}${o?" "+a+"-badge-circle":""}`,children:r}))}return n}function l(e,t){let{items:n=[]}=e,i=o(e);return(0,_jsxRuntime.jsxs)("div",{className:`${a}-after ${a}-align`,children:[!!i.length&&i,!!n.length&&I(t?"mdiChevronDown":"mdiChevronRight",.7)]})}function u(e){let{icon:t=I("mdiCircleMedium",.6)}=e;return t?(0,_jsxRuntime.jsx)("div",{className:`${a}-before`,children:(0,_jsxRuntime.jsx)("div",{className:`${a}-icon ${a}-align`,children:t})}):null}let c={text:"option.text",value:"option.value",toggleIcon:()=>!1,after:({option:e,active:t})=>l(e,!!t),before:({option:e})=>u(e),onClick({option:e}){let{items:t=[],value:i}=e;t.length?s.current(i):e.onClick?e.onClick():n&&n(e)},className:({level:e})=>`${a}-row-level-${e}`},d={...c,...i,className(e){let t=`${a}-row-level-${e.level}`;if("function"==typeof i.className){let n=i.className(e);n&&(t+=" "+n)}return t}},$=(0,_aioUtils.AddToAttrs)(e.attrs,{className:[a,`aio-input-sidemenu-${r}`,e.className]});return(0,_jsxRuntime.jsx)(AIOInput,{...$,className:$.className,type:"tree",size:48,toggleRef:s,value:[...t],getChilds:e=>e.row.items||[],option:d,indent:0})};exports.SideMenu=SideMenu;const AICard=({text:e,subtext:t,onClick:n,before:i,after:r})=>(0,_jsxRuntime.jsxs)("div",{className:"aio-input-card",children:[void 0!==i&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-card-before",onClick:e=>e.stopPropagation(),children:i}),(0,_jsxRuntime.jsxs)("div",{className:"aio-input-card-body",onClick:n,children:[(0,_jsxRuntime.jsx)("div",{className:"aio-input-card-text",children:e}),void 0!==t&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-card-subtext",children:t})]}),void 0!==r&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-card-after",onClick:e=>e.stopPropagation(),children:r})]});exports.AICard=AICard;const AIPanel=({text:e,subtext:t,before:n,after:i,body:r})=>{function a(){return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-panel-header",children:[(0,_jsxRuntime.jsx)("div",{className:"aio-input-panel-before",children:!!n&&n}),(0,_jsxRuntime.jsxs)("div",{className:"aio-input-panel-texts",children:[(0,_jsxRuntime.jsx)("div",{className:"aio-input-panel-text",children:e}),void 0!==t&&(0,_jsxRuntime.jsx)("div",{className:"aio-input-panel-subtext",children:t})]}),(0,_jsxRuntime.jsx)("div",{className:"aio-input-panel-after",children:!!i&&i})]})}function s(){return(0,_jsxRuntime.jsx)("div",{className:"aio-input-panel-body",children:r})}return(0,_jsxRuntime.jsxs)("div",{className:"aio-input-panel",children:[a()," ",s()]})};exports.AIPanel=AIPanel;const AISwitch=({colors:e=["#555","orange"],size:t=[16,2,3,48],value:n,onChange:i=()=>{}})=>{function r(){return{paddingRight:t[0]+t[1],paddingLeft:t[1],border:`${t[2]}px solid ${n?e[1]:e[0]}`}}function a(){return{width:t[3]-t[0]-t[1],height:t[0]+2*t[1]}}function s(){return{width:t[0],height:t[0],top:`calc(50% - ${t[0]/2}px)`,background:n?e[1]:e[0]}}return(0,_jsxRuntime.jsx)("div",{className:`aio-input-switch${n?" active":""}`,style:r(),onClick:()=>i(!n),children:(0,_jsxRuntime.jsx)("div",{className:"aio-input-switch-outer",style:a(),children:(0,_jsxRuntime.jsx)("div",{className:"aio-input-switch-inner",style:s()})})})};function AIOInput_defaultProps(e){let t=new _aioUtils.Storage("aio-input-storage");for(let n in e)t.save(n,e[n])}function getTypes(e){function t(){return -1!==["select","date","time"].indexOf(n)||-1!==["text","number","textarea"].indexOf(n)&&!!e.options||"button"===n&&!!e.popover}let{type:n,multiple:i}=e,r;return r="table"===n||"tags"===n||-1!==["radio","range","file","buttons","select","date","acardion"].indexOf(n)&&!!i,{isMultiple:r,isInput:-1!==["text","number","textarea","password"].indexOf(n),isDropdown:t(),hasOption:-1!==["text","number","textarea","color","select","radio","tabs","list","buttons","tags"].indexOf(n),hasPlaceholder:-1!==["text","number","textarea","color","select","table","image","date"].indexOf(n),hasKeyboard:-1!==["text","textarea","number","password"].indexOf(n),hasText:-1!==["checkbox","button","select"].indexOf(n),hasSearch:-1!==["table","select"].indexOf(n)}}function getDefaultProps(e,t){let n=Array.isArray(e.value)?"array":typeof e.value;return"select"===(e={...e}).type?e.multiple&&void 0===e.text&&(e.text="Select Items"):"time"===e.type?e.value||(e.value={}):"acardion"===e.type?e.deSelect=!0:"date"===e.type&&e.multiple&&(e.option={...e.option,text:"option",value:"option"}),!0===e.loading&&(e.disabled=!0),t.isMultiple?e.value?"array"!==n&&(e.value=[e.value]):e.value=[]:"tree"===e.type||"array"===n&&(e.value=e.value[0]),e}function Def(e){return({theme:[],"date-size":180,"tree-size":36,"range-size":72,"date-unit":"day"})[e]}function I(e,t,n){return new _aioUtils.GetSvg().getIcon(e,t,n)}function GetOptions(e){let{options:t,rootProps:n,types:i,level:r,isOpen:a,change:s,defaultOptionProps:o={}}=e,{deSelect:l}=n,u=[],c={},d=i.isDropdown&&i.hasOption&&!!n.onSwap;function $(e){return"select"===n.type&&i.isMultiple?-1!==n.value.indexOf(e):"radio"===n.type?i.isMultiple?-1!==n.value.indexOf(e):n.value===e:void 0}function p(e){return"tree"===n.type?!!a&&!!a(e):i.isMultiple?-1!==n.value.indexOf(e):e===n.value}l&&"function"!=typeof l&&!0!==l&&(t=[l,...t]);for(let x=0;x<t.length;x++){let m=t[x],f={option:m,index:x,active:!1,level:r,rootProps:n,change:s?e=>{s&&s(m,e)}:void 0},j=!!n.disabled||!!n.loading||!!GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"disabled"}),h=GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"show"});if(!1===h)continue;let g=GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"value"}),v=p(g),y=GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"text"});f.active=v;let R=GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"attrs",def:{}}),b=$(g),_=GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"checked",def:b}),C={show:h,loading:n.loading,attrs:R,text:y,value:g,disabled:j,draggable:d,checkIcon:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"checkIcon"})||n.checkIcon,checked:_,toggleIcon:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,def:!0,key:"toggleIcon"}),before:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"before"}),after:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"after"}),justify:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"justify"}),subtext:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"subtext"}),onClick:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"onClick",preventFunction:!0}),className:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"className"}),style:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"style"}),tagAttrs:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"tagAttrs"}),tagBefore:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"tagBefore"}),close:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"close",def:!i.isMultiple}),tagAfter:GetOptionProps({rootProps:n,optionDetails:f,defaultOptionProps:o,key:"tagAfter"}),details:f};u.push(C),c["a"+C.value]=C}return{optionsList:u,optionsDic:c}}function GetOptionProps(p){let{rootProps,key,def,preventFunction,optionDetails,defaultOptionProps={}}=p,{option}=optionDetails,optionResult="function"!=typeof option[key]||preventFunction?option[key]:option[key](optionDetails);if(void 0!==optionResult)return optionResult;let prop=(rootProps.option||{})[key];if("string"==typeof(prop=void 0===prop?defaultOptionProps[key]:prop))try{let value;return eval("value = "+prop),value}catch{}if("function"==typeof prop&&!preventFunction){let res=prop(optionDetails);return void 0===res?def:res}return void 0!==prop?prop:def}function getTimeByUnit(e,t){let{value:n={},jalali:i,unit:r={year:!0,month:!0,day:!0}}=e;function a(){let e=new _aioUtils.AIODate().getToday(i);return{year:e[0],month:e[1],day:e[2],hour:e[3],minute:e[4],second:e[5]}}let s=a(),o={},l;for(l in r)if(!0===r[l]){let u=n[l],c={year:1e3,month:1,day:1,hour:0,minute:0,second:0}[l],d={year:3e3,month:12,day:31,hour:23,minute:59,second:59}[l];(void 0!==u&&"number"!=typeof u||u<c||u>d)&&alert(`aio input error => in type time value.${l} should be an number between ${c} and ${d}`);let $=void 0===u||t?s[l]:u;o[l]=$}return o}function getTimeText(e){let t=getTimeByUnit(e);if(!t)return"string"==typeof e.placeholder?e.placeholder:"string"==typeof e.text?e.text:"";if(e.pattern)return new _aioUtils.AIODate().getDateByPattern(t,e.pattern);if(void 0!==e.text)return e.text;let n=[],i=[];void 0!==t.year&&i.push((0,_aioUtils.Get2Digit)(t.year)),void 0!==t.month&&i.push((0,_aioUtils.Get2Digit)(t.month)),void 0!==t.day&&i.push((0,_aioUtils.Get2Digit)(t.day)),i.length&&n.push(i.join("/"));let r=[];return void 0!==t.hour&&r.push((0,_aioUtils.Get2Digit)(t.hour)),void 0!==t.minute&&r.push((0,_aioUtils.Get2Digit)(t.minute)),void 0!==t.second&&r.push((0,_aioUtils.Get2Digit)(t.second)),r.length&&n.push(r.join(":")),n.join(" ")}exports.AISwitch=AISwitch;const AIText=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"text"});exports.AIText=AIText;const AINumber=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"number"});exports.AINumber=AINumber;const AITextarea=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"textarea"});exports.AITextarea=AITextarea;const AIPassword=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"password"});exports.AIPassword=AIPassword;const AIColor=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"color"});exports.AIColor=AIColor;const AISelect=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"select"});exports.AISelect=AISelect;const AIRadio=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"radio"});exports.AIRadio=AIRadio;const AITabs=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"tabs"});exports.AITabs=AITabs;const AIButtons=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"buttons"});exports.AIButtons=AIButtons;const AITags=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"tags"});exports.AITags=AITags;const AITree=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"tree"});exports.AITree=AITree;const AIImage=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"image"});exports.AIImage=AIImage;const AIFile=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"file"});exports.AIFile=AIFile;const AICheckbox=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"checkbox"});exports.AICheckbox=AICheckbox;const AIDate=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"date"});exports.AIDate=AIDate;const AITime=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"time"});exports.AITime=AITime;const AISlider=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"slider"});exports.AISlider=AISlider;const AISpinner=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"spinner"});exports.AISpinner=AISpinner;const AIAcardion=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"acardion"});exports.AIAcardion=AIAcardion;const AIList=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"list"});exports.AIList=AIList;const AITable=e=>(0,_jsxRuntime.jsx)(AIOInput,{...e,type:"table"});exports.AITable=AITable;const MonthCalendar=({date:e,onClick:t=()=>{},dateAttrs:n=()=>({})})=>{let i=new _aioUtils.AIODate,[r]=(0,_react.useState)(i.isJalali(e)),[a]=(0,_react.useState)(i.getMonths(r)),[s]=(0,_react.useState)(i.getWeekDay([e[0],e[1],1]).index),[o]=(0,_react.useState)(i.getMonthDaysLength(e));function l(){return i.getWeekDays(!0).map(e=>(0,_jsxRuntime.jsx)("div",{className:"month-calendar-weekday",children:e[0]}))}function u(){return Array(s).fill(0).map(()=>(0,_jsxRuntime.jsx)("div",{className:""}))}function c(){return Array(o).fill(0).map((t,n)=>d([e[0],e[1],n+1]))}function d(e){let i=(0,_aioUtils.AddToAttrs)(n(e),{className:"month-calendar-day",attrs:{onClick:()=>t(e)}});return(0,_jsxRuntime.jsx)("div",{...i,children:e[2]})}return(0,_jsxRuntime.jsxs)("div",{className:"month-calendar",children:[(0,_jsxRuntime.jsx)("div",{className:"month-calendar-title",children:a[e[1]-1]}),(0,_jsxRuntime.jsx)("div",{className:"month-calendar-weekdays",children:l()}),(0,_jsxRuntime.jsxs)("div",{className:"month-calendar-days",children:[u()," ",c()]})]})};exports.MonthCalendar=MonthCalendar;const PrismCode=({code:e,language:t="js",style:n={}})=>((0,_react.useEffect)(()=>{_prismjs.default.highlightAll()},[]),(0,_jsxRuntime.jsx)("div",{className:"aio-doc-code",style:n,children:(0,_jsxRuntime.jsx)("pre",{style:{height:"100%",overflow:"auto"},children:(0,_jsxRuntime.jsx)("code",{className:`language-${t}`,children:e})})}));function Code(e,t,n){return(0,_jsxRuntime.jsx)(PrismCode,{code:e,language:t,style:n})}function AIOLogin_updateCatchedUser(e,t){let n=new _aioUtils.Storage("ai-login"+e),i=n.load("data");if(!i)return t;let r={...i,user:t};return n.save("data",r)}const AILogin=e=>{let{renderApp:t,translate:n=()=>{},id:i,rememberTime:r,checkToken:a,splash:s,otpLength:o=4}=e,{validation:l=()=>{}}=e,[u,c]=(0,_react.useState)(),[d]=(0,_react.useState)(new _aioUtils.Storage("ai-login"+i)),[$,p]=(0,_react.useState)(g),x=(0,_react.useRef)($);x.current=$;let[m,f]=(0,_react.useState)(h());function j(){return e.mode?e.mode:e.userpass?"userpass":e.otp?"otpnumber":"userpass"}function h(t){let n={userNameInput:()=>null,passwordInput:()=>null,key:t||j(),title:null,submitText:"",registerInputs:()=>null,responseUserType:!1};if("userpass"===n.key)n.userNameInput=()=>(0,_jsxRuntime.jsx)(AIText,{...E("userName")}),n.passwordInput=()=>(0,_jsxRuntime.jsx)(AIPassword,{...E("password"),preview:!0}),n.responseUserType=!0;else if("register"===n.key){if(n.userNameInput=()=>(0,_jsxRuntime.jsx)(AIText,{...E("userName")}),n.passwordInput=()=>(0,_jsxRuntime.jsx)(AIPassword,{...E("password"),preview:!0}),e.register){let i=(e.register.inputs||(()=>[]))(x.current)||[];n.registerInputs=()=>{let t=x.current;return(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)(AIPassword,{...E("rePassword"),preview:!0}),i.map(n=>{let i=t.register[n.field];return(0,_jsxRuntime.jsx)(AIOInput,{rtl:e.rtl,label:e.label(n.field),...n,validations(t){if(e.validation)return e.validation(n.field,t)},showErrors:!1,reportError:e=>U(n.field,e),value:i,onChange:e=>p({...t,register:{...t.register,[n.field]:e}})},n.field)})]})}}}else"otpnumber"===n.key?n.userNameInput=()=>(0,_jsxRuntime.jsx)(AIText,{...E("otpNumber"),justNumber:!0,maxLength:11}):"otpcode"===n.key&&(n.passwordInput=()=>(0,_jsxRuntime.jsx)(AIText,{...E("otpCode"),justNumber:!0,maxLength:o}),n.responseUserType=!0);return n.submitText=k(n.key+"Button"),n.title=(0,_jsxRuntime.jsx)("div",{className:"ai-login-title",children:k(n.key+"Title")}),n}function g(){var t;let n={userName:"",password:"",rePassword:"",otpNumber:"",otpCode:"",register:{}};if(!e.register)return n;if(null!==(t=e.register)&&void 0!==t&&t.defaultValue){let i={};for(let r in e.register.defaultValue)i[r]=e.register.defaultValue[r];n.register=i}return n}let[v,y]=(0,_react.useState)({}),[R,b]=(0,_react.useState)(!0),[_,C]=(0,_react.useState)(!!s),[A]=(0,_react.useState)(new _aioPopup.default);function k(t){let{otp:i}=e,r={registerButton:{en:"Register",fa:"ثبت نام"},userpassButton:{en:"Login",fa:"ورود"},otpnumberButton:{en:"Send Number",fa:"ارسال شماره همراه"},otpcodeButton:{en:"Login",fa:"ورود"},registerTitle:{en:"Register",fa:"ثبت نام"},userpassTitle:{en:"Login",fa:"ورود"},otpcodeTitle:{en:"OTP Code",fa:"کد یکبار مصرف"},otpnumberTitle:{en:"Phone Number",fa:"شماره همراه"},switchuserpass:{en:"login by user name",fa:"ورود با نام کاربری"},switchregister:{en:"Go To Register",fa:"ثبت نام"},switchotp:{en:"login by otp",fa:"ورود با رمز یکبار مصرف"},rePasswordMatch:{en:"Password is not match with Re password",fa:"رمز عبور با تکرار آن مطابقت ندارد"},userNameRequired:{en:"User Name is required",fa:"نام کاربری ضروری است"},passwordRequired:{en:"password is required",fa:"رمز عبور ضروری است"},rePasswordRequired:{en:"Re Password is required",fa:"تکرار رمز عبور ضروری است"},otpNumberRequired:{en:"Phone Number is required",fa:"شماره همراه ضروری است"},otpCodeLength:{en:`otp code should be ${o} digit`,fa:`کد یکبار مصرف باید ${o} رقم باشد`},registerError:{en:"Registeration failed",fa:"ثبت نام با خطا روبرو شد"},userpassError:{en:"login by userName failed",fa:"ورود با نام کاربری با خطا روبرو شد"},otpcodeError:{en:"login by otp failed",fa:"ورود با کد یکبار مصرف با خطا روبرو شد"},otpnumberError:{en:"send otp number for receive otp code failed",fa:"ارسال شماره همراه برای دریافت کد یکبار مصرف با خطا روبرو شد"}};return"fa"===n?r[t].fa:n(t)||r[t].en}function N(e){d.save("data",e),c(e)}function w(){window.location.reload()}function T(){f(h("otpcode"))}function S(e){d.save("data",e),c(e)}async function D(t){let n=m.key,i={userpass:N,register:w,otpnumber:T,otpcode:S}[n],{onSuccess:r}=await e.getRequestOptions(x.current,m.key),a,s;try{s=await r(t)}catch(o){V({type:"error",text:k(n+"Error"),subtext:o.message});return}"string"==typeof s&&(a=s);let l={userpass:"modes.userpass onSuccess props should returns string as error or {user:any,token:string} as success",register:"modes.register onSuccess props should returns string as error or true as success",otpnumber:"modes.otp.onSubmitNumber onSuccess props should returns string as error or true as success",otpcode:"modes.otp.onSubmitCode onSuccess props should returns string as error or {user:any,token:string} as success"}[n];m.responseUserType?"object"==typeof s&&s.user&&"string"==typeof s.token||(a=l):!0!==s&&(a=l),a?V({type:"error",text:k(n+"Error"),subtext:a}):i(s)}async function P(){let{url:t,method:n,body:i,onCatch:r}=await e.getRequestOptions(x.current,m.key);_axios.default[n](t,i).then(D).catch(e=>{r?V({type:"error",text:"Error",subtext:r(e)}):e.message&&V({type:"error",text:"Error",subtext:e.message})})}function O(e){p(g()),f(h(e))}function M(e){return{className:"ai-login-mode",onClick:()=>O(e)}}function L(){return(0,_jsxRuntime.jsxs)("div",{className:"ai-login-modes",children:[e.userpass&&"userpass"!==m.key&&(0,_jsxRuntime.jsx)("button",{...M("userpass"),children:k("switchuserpass")}),e.register&&"register"!==m.key&&(0,_jsxRuntime.jsx)("button",{...M("register"),children:k("switchregister")}),e.otp&&"otpnumber"!==m.key&&(0,_jsxRuntime.jsx)("button",{...M("otpnumber"),children:k("switchotp")})]})}function U(e,t){y({...v={...v,[e]:t}})}function E(t){let n=x.current;return{label:e.label(t),validations:e=>G(t,e),showErrors:!1,rtl:e.rtl,reportError:e=>U(t,e),value:n[t],onChange:e=>p({...n,[t]:e})}}function G(t,n){let i=x.current,{otp:r}=e;return"register"!==m.key&&"rePassword"===t?void 0:n?"otpCode"===t&&r&&(n||"").length<o?k("otpCodeLength"):"rePassword"===t&&n!==i.register.password?k("rePasswordMatch"):l(t,n):k({otpCode:"",register:"",otpNumber:"otpNumberRequired",userName:"userNameRequired",password:"passwordRequired",rePassword:"rePasswordRequired"}[t])}function z(){let e=Object.keys(v).filter(e=>void 0!==v[e]).map(e=>v[e]);return(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)("div",{className:"ai-login-errors",children:e.map((e,t)=>(0,_jsxRuntime.jsx)("div",{className:"ai-login-error",children:e},t))}),(0,_jsxRuntime.jsx)("button",{className:"ai-login-submit",disabled:!!e.length,onClick:()=>P(),children:m.submitText})]})}function F(){let{title:e,userNameInput:t,passwordInput:n,registerInputs:i}=m;return(0,_jsxRuntime.jsxs)("div",{className:"ai-login-form",children:[e,t(),n(),i(),z(),L()]})}let H=t=>{let n=e[t],i=null;return n&&(i=n(m.key)),(0,_jsxRuntime.jsx)("div",{className:`ai-login-${t}`,children:i})};function q(){d.remove("data"),window.location.reload()}async function B(){if(s&&setTimeout(()=>{C(!1)},s.time),e.mock){c({user:e.mock.user,token:e.mock.token});return}let t=d.load("data",{},r),{user:n,token:i}=t,{url:o,method:l,onSuccess:u,onCatch:$}=await a(i||"");n&&i&&_axios.default[l](o,{headers:{authorization:`Bearer ${i}`}}).then(e=>{let t;try{t=u(e)}catch(r){V({type:"error",text:"checkToken failed",subtext:v.message});return}!0===t?c({user:n,token:i}):!1===t?q():V({type:"error",text:"checkToken failed",subtext:"checkToken props should return string as error or true as token is valid and false as token is invalid"})}).catch(e=>{if(e.message)V({type:"error",text:"Error",subtext:e.message});else{let t,n="";try{t=$(e)}catch(i){n=i.message}"string"==typeof t?n=t:!1===t?q():n="AILogin checkToken onCatch props should returns string as error or false as invalid token",n&&V({type:"error",text:"checkToken failed",subtext:n})}}),b(!1)}function V(e){A.addAlert(e)}function X(){if(R||_)return s?s.html:null;if(!u){let n=(0,_aioUtils.AddToAttrs)(e.attrs,{className:"ai-login",style:{direction:e.rtl?"rtl":void 0}});return(0,_jsxRuntime.jsxs)("div",{...n,children:[H("before")," ",F()," ",H("after")]})}return t({token:u.token,user:u.user,logout:q})}return(0,_react.useEffect)(()=>{B()},[]),(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[X()," ",A.render()]})};exports.AILogin=AILogin;const MAPCTX=(0,_react.createContext)({}),AIMap=e=>{let{zoom:t={value:14},value:n=[35.699939,51.338497],getSearchResult:i,onSearch:r,mapRef:a}=e,[s,o]=(0,_react.useState)(null);a&&(a.current=s);let[l,u]=(0,_react.useState)(n),c=(0,_react.useRef)(void 0);function d(t){u(t),e.onChange&&(clearTimeout(c.current),c.current=setTimeout(()=>{e.onChange&&e.onChange(t)},600))}function $(){return(0,_jsxRuntime.jsxs)("div",{className:"marker-icon",children:[(0,_jsxRuntime.jsx)("div",{className:"marker-icon-circle"}),(0,_jsxRuntime.jsx)("div",{className:"marker-icon-arrow"})]})}function p(){return{pos:l,setMap:o,rootProps:e,move:d,getDefaultMarkerIcon:$}}return(0,_react.useEffect)(()=>{null!==s&&s.setView(n,t.value,{animate:!1}),u(n)},[n[0]+"-"+n[1]+"-"+t.value]),(0,_jsxRuntime.jsx)(MAPCTX.Provider,{value:p(),children:(0,_jsxRuntime.jsxs)("div",{className:"ai-map",children:[!!i&&(0,_jsxRuntime.jsx)(MapHeader,{}),(0,_jsxRuntime.jsx)(MapBody,{}),(0,_jsxRuntime.jsx)(MapFooter,{})]})})};exports.AIMap=AIMap;const MapBody=()=>{let{rootProps:e,pos:t,setMap:n,getDefaultMarkerIcon:i}=(0,_react.useContext)(MAPCTX),{style:r,zoom:a={value:14},dragging:s=!0,children:o,shapes:l=[],marker:u,markers:c=[],whenReady:d}=e,$={width:"100%",height:"100%"};return(0,_jsxRuntime.jsxs)(_reactLeaflet.MapContainer,{center:t,style:{...$,...r},zoom:a.value||14,scrollWheelZoom:a.wheel?"center":void 0,zoomControl:!1!==a.control,attributionControl:!0,dragging:s,ref:n,whenReady:d,children:[(0,_jsxRuntime.jsx)(_reactLeaflet.TileLayer,{url:"https://{s}.tile.openstreetmap.de/{z}/{x}/{y}.png"}),(0,_jsxRuntime.jsx)(MapEvents,{}),!1!==u&&(0,_jsxRuntime.jsx)(MapMarker,{pos:t,html:(0,_react.isValidElement)(u)?u:i()},"main-marker"),c.map((e,t)=>(0,_jsxRuntime.jsx)(MapMarker,{pos:e.pos,html:e.html},`marker-${t}`)),l.map((e,t)=>(0,_jsxRuntime.jsx)(MapShape,{shape:e},t)),(0,_jsxRuntime.jsx)(MapLayers,{}),o]})},MapHeader=()=>{let{rootProps:e,move:t}=(0,_react.useContext)(MAPCTX),{getSearchResult:n,onSearch:i}=e,[r,a]=(0,_react.useState)(""),[s,o]=(0,_react.useState)([]),l=(0,_react.useRef)();function u(e){a(e),clearTimeout(l.current),l.current=setTimeout(async()=>{if(n){let t=await n(e);Array.isArray(t)&&o(t)}},1200)}return(0,_jsxRuntime.jsx)("div",{className:"ai-map-header",children:(0,_jsxRuntime.jsx)(AIOInput,{type:"text",value:r,options:s||[],before:I("mdiMagnify",.8),onChange:e=>u(e),option:{onClick({option:e}){i&&i(e)}}})})},MapLayers=()=>{let{rootProps:e}=(0,_react.useContext)(MAPCTX),{layers:t}=e;if(!t)return null;let{position:n="topright",items:i=[]}=t;return(0,_jsxRuntime.jsx)(_reactLeaflet.LayersControl,{position:n,children:i.map((e,t)=>{let{shapes:n=[],markers:i=[],active:r=!0}=e;return(0,_jsxRuntime.jsx)(_reactLeaflet.LayersControl.Overlay,{name:e.name,checked:r,children:(0,_jsxRuntime.jsxs)(_reactLeaflet.FeatureGroup,{children:[i.map((e,t)=>(0,_jsxRuntime.jsx)(MapMarker,{pos:e.pos,html:e.html},t)),n.map((e,t)=>(0,_jsxRuntime.jsx)(MapShape,{shape:e},t))]})},t)})})},MapShape=({shape:e})=>{let{style:t={},type:n}=e,{stroke:i={},fill:r={}}=t,{width:a=4,dash:s,color:o="orange"}=i,{color:l="orange",opacity:u=.3}=r,c={fillColor:l,color:o,fillOpacity:u,weight:a,dashArray:s};if("circle"===n){let{center:d,radius:$=100}=e;return(0,_jsxRuntime.jsx)(_reactLeaflet.Circle,{center:d,pathOptions:c,radius:$})}return"rect"===n?(0,_jsxRuntime.jsx)(_reactLeaflet.Rectangle,{bounds:e.points,pathOptions:c}):"polyline"===n?(0,_jsxRuntime.jsx)(_reactLeaflet.Polyline,{positions:e.points,pathOptions:c}):null},MapFooter=()=>{let{rootProps:e,pos:t}=(0,_react.useContext)(MAPCTX),{submitText:n="Submit",onSubmit:i,footer:r}=e;return i||r?(0,_jsxRuntime.jsxs)("div",{className:"ai-map-footer",children:[!!i&&(0,_jsxRuntime.jsx)("button",{type:"button",onClick:()=>i(t),children:n}),(0,_jsxRuntime.jsx)("div",{className:"ai-map-footer-html",children:r||null})]}):null},MapMarker=({pos:e,html:t})=>{let{getDefaultMarkerIcon:n}=(0,_react.useContext)(MAPCTX);function i(e){return(0,_leaflet.divIcon)({html:(0,_aioUtils.JSXToHTML)(e),className:"",iconSize:[32,32],iconAnchor:[16,32]})}t=t||n();let r={position:e};return t&&(r.icon=i(t)),(0,_jsxRuntime.jsx)(_reactLeaflet.Marker,{...r,animate:!1})};function MapEvents(){let{rootProps:e,move:t}=(0,_react.useContext)(MAPCTX);return(0,_reactLeaflet.useMapEvents)({click:()=>e.onClick?e.onClick():void 0,move(n){if(!1===e.dragging)return;let{lat:i,lng:r}=n.target.getCenter();t([i,r])},zoom(t){e.onChangeZoom&&e.onChangeZoom(t.target._zoom)},locationfound(e){console.log("location found:",e)},moveend(t){e.onMoveEnd&&e.onMoveEnd(t)}}),null}const AIApp=e=>{let[t,n]=(0,_react.useState)();function i(){if(e.bottomMenu.value){let t=e.bottomMenu.options.find(t=>!1!==t.show&&t.value===e.bottomMenu.value);t&&n(t.value)}let i=e.bottomMenu.options.filter(e=>!1!==e.show);i.length&&n(i[0].value)}function r(){return{bottomMenuValue:t||""}}function a(){if(!e.header)return null;let t=e.header(r());return!1===t?null:(0,_jsxRuntime.jsx)("div",{className:"ai-app-header",children:t})}function s(){return(0,_jsxRuntime.jsx)("div",{className:"ai-app-body",children:e.body({bottomMenuValue:t||""})})}function o(){return(0,_jsxRuntime.jsx)(AIBottomMenu,{options:e.bottomMenu.options,value:t||"",onChange:e=>n(e)})}(0,_react.useEffect)(()=>{i()},[e.bottomMenu.value]);let l=(0,_aioUtils.AddToAttrs)(e.attrs,{className:"ai-app"});return(0,_jsxRuntime.jsxs)("div",{...l,children:[a(),s(),o(),!!e.children&&e.children]})};exports.AIApp=AIApp;const AIBottomMenu=({options:e,value:t,onChange:n})=>{function i(e){if(!1===e.show)return null;let i=e.value===t;return(0,_jsxRuntime.jsxs)("div",{className:`ai-app-bottom-menu-option${i?" active":""}`,onClick:()=>n(e.value),children:[!!e.before&&e.before,(0,_jsxRuntime.jsxs)("div",{className:"ai-app-bottom-menu-option-body",children:[void 0!==e.text&&e.text,void 0===e.text&&(0,_jsxRuntime.jsxs)(_jsxRuntime.Fragment,{children:[(0,_jsxRuntime.jsx)("div",{className:"ai-app-bottom-menu-uptext",children:e.uptext}),(0,_jsxRuntime.jsx)("div",{className:"ai-app-bottom-menu-subtext",children:e.subtext})]})]}),!!e.after&&e.after]},e.value)}return(0,_jsxRuntime.jsx)("div",{className:"ai-app-bottom-menu",children:e.map((e,t)=>i(e))})},Mask=e=>{let[t]=(0,_react.useState)((0,_react.createRef)()),[n,i]=(0,_react.useState)(e.value||""),[r,a]=(0,_react.useState)(o(e.value||"")),s=(0,_react.useRef)(r);function o(t){let n=[],i=t;for(let r of e.pattern)if("number"===r[0]||"text"===r[0]||"select"===r[0]){let a=+r[1],s=i.slice(0,a);n.push(s),i=i.slice(a,i.length)}else i=i.slice(r[1],i.length);return n}function l(n,r,s){let o=-1;console.log(n);let l="";for(let u=0;u<e.pattern.length;u++){let c=e.pattern[u];if("number"===c[0]||"text"===c[0]||"select"===c[0]){o++;let d=+c[1],$=n[o],p=d-$.length;if(p){let x="number"===c[0]?"0":"x";for(let m=0;m<p;m++)$=x+$;n[o]=$}else if(s===u){let f=(0,_jquery.default)(t.current).find(".aio-input"),j=f.length;++r>j&&(r=0);let h=f.eq(r).find("input");h.length&&h.focus().select()}l+=$}else l+=c[0]}i(l),e.onChange(l),a(n)}function u(e,t,n){l(s.current.map((n,i)=>t===i?e:n),t,n)}function c(){let t=0;return e.pattern.map((e,n)=>{let i=e[0],r=t;if("text"===i||"number"===i){let a=+e[1];return t++,(0,_jsxRuntime.jsx)(AIText,{style:{width:10*a},placeholder:Array(a).fill("x").join(""),maxLength:a,justNumber:"number"===i,value:s.current[r],onChange:e=>u(e,r,n)})}if("select"!==i)return(0,_jsxRuntime.jsx)("div",{className:"aio-input-mask-gap",children:e[2]||e[0]});{let o=e[2];return t++,(0,_jsxRuntime.jsx)(AISelect,{style:{width:"fit-content"},options:o,option:{text:"option",value:"option"},value:s.current[r],onChange:e=>u(e,r,n)})}})}return s.current=r,(0,_react.useEffect)(()=>{i(e.value||""),a(o(e.value||""))},[e.value]),(0,_jsxRuntime.jsx)("div",{className:"example",children:(0,_jsxRuntime.jsx)("div",{className:"aio-input-mask",ref:t,title:n,children:c()})})};exports.Mask=Mask;const MonthCells=({year:e,month:t,cellContent:n,weekDayContent:i})=>{let[r]=(0,_react.useState)(new _aioUtils.AIODate),[a]=(0,_react.useState)(r.getMonths(!0));function s(){let n={monthDaysLength:r.getMonthDaysLength([e,t]),firstDayIndex:r.getWeekDay([e,t,1]).index,monthString:r.getMonths(!0)[t-1]};return console.log(n,e,t),n}let o=Math.floor(100/7),l=`${o}% ${o}% ${o}% ${o}% ${o}% ${o}% ${o}%`;function u(){return i?(0,_jsxRuntime.jsx)("div",{className:"month-cells-grid",style:{gridTemplateColumns:l},children:r.getWeekDays(!0).map((e,t)=>(0,_jsxRuntime.jsx)("div",{className:"month-cells-weekday",children:i(t)},e))}):null}function c(){return Array(p.firstDayIndex).fill(0).map((e,t)=>(0,_jsxRuntime.jsx)("div",{className:""},t))}function d(){return(0,_aioUtils.GetArray)(p.monthDaysLength).map(e=>$(e+1))}function $(i){let a=[e,t,i],s=r.getWeekDay(a).index;return(0,_jsxRuntime.jsx)("div",{className:"month-cells-cell",children:n(a,s)},i)}let p=s();return(0,_jsxRuntime.jsx)("div",{className:"month-cells",children:(0,_jsxRuntime.jsxs)("div",{className:"month-cells-body",children:[u(),(0,_jsxRuntime.jsxs)("div",{className:"month-cells-grid",style:{gridTemplateColumns:l},children:[c()," ",d()]})]})})};exports.MonthCells=MonthCells;